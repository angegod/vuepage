import{a as T}from"./axios.1779699b.js";import{_ as Q,j as k,o as i,c as d,b as H,w as z,d as s,a as e,F as b,f as y,t as m,m as g,n as W,s as R,T as le,p as X,g as Y,i as se,k as ae,x as ne}from"./index.ed87eece.js";import{C as Z,S as ee,P as oe,N as ie}from"./carousel.4a1c2ea6.js";const h=$=>(X("data-v-6b65036b"),$=$(),Y(),$),de={class:"h-[500px] pl-5"},ue={class:"flex flex-row min-w-[500px]",key:"step1"},ce={class:"pl-2 pr-2 w-1/2"},re={class:"flex flex-col"},pe=h(()=>e("span",{class:"text-lg"},"卡片名稱:",-1)),fe={class:"mt-3 flex flex-col"},ve=h(()=>e("span",{class:"text-lg"},"卡片編號",-1)),me=["value"],xe={class:"flex flex-col mt-5"},_e=h(()=>e("span",{class:"text-lg"},"稀有度:",-1)),ge=["value"],he={class:"flex flex-col mt-5"},we=h(()=>e("span",{class:"text-lg"},"縮圖:",-1)),be=["src"],ye={class:"pl-2 pr-2 w-1/2 flex flex-col justify-between"},ke={class:"flex flex-col"},$e=h(()=>e("span",{class:"text-lg"},"全身圖:",-1)),Ce=["src"],Ee={key:"step2",class:"flex flex-row min-w-[500px]"},Ie={class:"w-1/2 pl-2 pr-2 flex flex-col"},Be={class:"flex flex-col mt-5"},Se={class:"flex flex-row mb-1"},Ne=h(()=>e("span",{class:"text-lg"},"即時效果:",-1)),je=["onUpdate:modelValue"],De={class:"flex flex-col mt-5"},Pe={class:"flex flex-row mb-1"},Fe=h(()=>e("span",{class:"text-lg"},"回合效果:",-1)),Te=["placeholder","onUpdate:modelValue"],Le={class:"flex flex-col mt-5"},Ae={class:"flex flex-row mb-1"},Me=h(()=>e("span",{class:"text-lg"},"連動效果:",-1)),Oe=["placeholder","onUpdate:modelValue"],Ve={class:"w-1/2 pl-2 pr-2 flex flex-col justify-between min-h-[400px]"},Je={class:"flex flex-col"},Ke=h(()=>e("div",null,[e("span",null,"技能標籤")],-1)),Ue={class:"colorSelect w-[150px]",id:"tagSelect2"},qe=h(()=>e("option",{value:0},m("請選擇"),-1)),Ge=["label"],We=["value"],Re={class:"flex flex-col"},He={class:"flex flex-row min-w-[500px]",key:"step3"},ze={class:"px-2 w-1/2"},Qe={class:"flex flex-col"},Xe=h(()=>e("span",null,"回合累積能量:",-1)),Ye={class:"flex flex-col"},Ze=h(()=>e("span",null,"總儲存能量:",-1)),et={class:"flex flex-col"},tt=h(()=>e("span",null,"回合消耗能量:",-1)),lt={class:"flex flex-col"},st=h(()=>e("span",null,"進場能量:",-1)),at={class:"w-1/2"},nt={class:"flex flex-col"},ot=h(()=>e("span",null,"卡片關鍵字:",-1)),it={class:"my-2"},dt=h(()=>e("span",null,"盤面圖:",-1)),ut={class:"spread"},ct=["src"],rt=h(()=>e("div",{class:"my-2"},[e("span",null,"圖片標示位置:"),e("input",{type:"number",class:"selfInput",id:"spreadIndex",min:1})],-1)),pt={class:"min-w-[500px]",key:"step4"},ft={class:"w-5/6 mx-auto mt-5 flex flex-row flex-wrap justify-between mb-5 max-[450px]:justify-center"},vt={class:"w-2/5 min-w-[150px] max-[450px]:w-[100%]"},mt={class:"[&>span]:text-[20px] mb-3 text-center"},xt={key:0,class:"w-[100%] text-center text-amber-900 font-bold"},_t={key:1,class:"w-[100%] text-center text-slate-500 font-bold"},gt={key:2,class:"w-[100%] text-center text-yellow-600 font-bold"},ht={key:0,class:"imgbox1 max-w-[150px] mx-auto"},wt=["src","alt"],bt={key:1,class:"imgbox2 max-w-[150px] mx-auto"},yt=["src","alt"],kt={key:2,class:"imgbox3 max-w-[150px] mx-auto"},$t=["src","alt"],Ct={class:"w-1/2 flex flex-col min-w-[150px] ml-2 max-[450px]:ml-0 max-[450px]:w-[100%]"},Et={class:"flex flex-col mt-5 min-h-[10vh]"},It=h(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"即時效果")])],-1)),Bt={class:"flex flex-col"},St={class:"text-black"},Nt={class:"flex flex-col mt-5 min-h-[20vh]"},jt=h(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"回合效果")])],-1)),Dt={class:"flex flex-col"},Pt={class:"text-black"},Ft={class:"flex flex-col mt-5 min-h-[10vh]"},Tt=h(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"連動效果")])],-1)),Lt={class:"flex flex-col"},At={class:"text-black"},Mt={__name:"AddCard",props:["max","func"],emits:["close"],setup($,{expose:j,emit:D}){let J=$,t=k({}),w=k(1),r=k(null),p=k(null),C=k(null),S=k([]),N=k([]),E=k([""]),B=k([""]),x=k([""]);const U=D;console.log(S.value);function L(f){document.getElementById(f).value=null,document.getElementById(f).click()}async function A(f){let o=document.getElementById(f).files[0];const a=new FileReader;a.onload=v=>{f==="iconInput"?r.value={file:v.target.result,name:o.name,realFile:o}:f==="imageInput"?p.value={file:v.target.result,name:o.name,realFile:o}:f==="spreadInput"&&(C.value={file:v.target.result,name:o.name,realFile:o}),console.log(C.value)},await a.readAsDataURL(o)}function M(f){switch(f){case"combo":B.value.push("");break;case"round":E.value.push("");break;case"instant":x.value.push("");break}}function O(f){switch(f){case"combo":B.value.length>1&&(B.value=B.value.filter((o,a)=>a!==B.value.length-1)),console.log(B.value.length);break;case"round":E.value.length>1&&(E.value=E.value.filter((o,a)=>a!==E.value.length-1)),console.log(E.value.length);break;case"instant":x.value.length>1&&(x.value=x.value.filter((o,a)=>a!==x.value.length-1)),console.log(x.value.length);break}}function K(){console.log(S.value);var f=parseInt(document.getElementById("tagSelect2").value),o={};S.value.forEach(a=>{let v=a.data.find(I=>I.id===f);v!==void 0&&(o=v)}),console.log(f),!(N.value.includes(o)||f===0)&&(N.value.push(o),console.log(N.value),N.value=N.value.sort((a,v)=>a.id-v.id),t.value.tag.push(f),t.value.tag=t.value.tag.sort((a,v)=>a-v),console.log(N.value))}function q(f){f.key==="Enter"&&(alert("關鍵字輸入!!"),t.value.keyword===void 0&&(t.value.keyword=[]),t.value.keyword.push(f.target.value),f.target.value="")}async function F(){if(console.log(w.value),w.value===3&&(t.value.PointMax===void 0||t.value.PointConsume===void 0||t.value.PointGet===void 0||t.value.PointEnter===void 0)){alert("請輸入對應資料!!");return}if(w.value+=1,w.value===4&&(console.log(t.value),G()),w.value===5){let f=new FormData;f.append("image",r.value.realFile),f.append("oldName",r.value.name.split(".")[0]),f.append("newName",`1_${t.value.id}`),console.log(f.getAll("image"));const o=await T.post("http://localhost:5000/card/icon",f,{headers:{"Content-Type":"multipart/form-data"}});console.log(o.data);let a=new FormData;a.append("image",p.value.realFile),a.append("oldName",p.value.name.split(".")[0]),a.append("newName",`1_${t.value.id}`),console.log(p.value);const v=await T.post("http://localhost:5000/card/image",a,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(v.data),C.value!==null){console.log("開始上傳盤面");let u=new FormData;u.append("image",C.value.realFile),u.append("oldName",C.value.name.split(".")[0]),u.append("newName",`1_${t.value.id}`),console.log(C.value);const l=await T.post("http://localhost:5000/card/spread",u,{headers:{"Content-Type":"multipart/form-data"}});console.log(l.data)}let I={series:1,card:t.value};await T.post("http://localhost:5000/card/add",I).then(u=>{console.log("資料儲存"),console.log(u.data.card),alert("新卡片已添加"),U("close","")})}}function G(){t.value.id===void 0&&(t.value.id=J.max),t.value.roundEffect=E.value,t.value.instantEffect=x.value,t.value.comboEffect=B.value,t.value.image=`/images/card/icon/1_${t.value.id}.png`,t.value.fullimage=`/images/card/image/1_${t.value.id}.png`,t.value.spread={id:parseInt(document.getElementById("spreadIndex").value),image:`/images/card/image/${t.value.id}.png`};let f=[];N.value.forEach(a=>{f.push(parseInt(a.id))}),t.value.tag=f;let o={id:t.value.id,name:t.value.name,rarity:t.value.rarity,image:t.value.image,instantEffect:t.value.instantEffect,roundEffect:t.value.roundEffect,comboEffect:t.value.comboEffect,PointMax:parseInt(t.value.PointMax),PointEnter:parseInt(t.value.PointEnter),PointConsume:parseInt(t.value.PointConsume),PointGet:parseInt(t.value.PointGet),tag:t.value.tag,fullimage:t.value.fullimage,keyword:t.value.keyword,spread:t.value.spread};t.value=o,console.log(t.value)}function V(f){S.value=f}return j({setFunc:V}),(f,o)=>(i(),d("div",de,[H(le,{name:"step",tag:"div",class:"flex flex-row"},{default:z(()=>[s(w)===1?(i(),d("div",ue,[e("div",ce,[e("div",re,[pe,e("input",{type:"text",class:"selfInput",placeholder:"卡片名子",onChange:o[0]||(o[0]=a=>s(t).name=a.target.value)},null,32)]),e("div",fe,[ve,e("input",{type:"number",class:"selfInput",value:$.max,onChange:o[1]||(o[1]=a=>s(t).id=parseInt(a.target.value))},null,40,me)]),e("div",xe,[_e,(i(),d(b,null,y(3,a=>e("div",null,[e("input",{type:"radio",name:"rarity",value:a,onChange:o[2]||(o[2]=v=>s(t).rarity=parseInt(v.target.value))},null,40,ge),e("span",null,m(a+"星"),1)])),64))]),e("div",he,[we,e("button",{onClick:o[3]||(o[3]=a=>L("iconInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"iconInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[4]||(o[4]=()=>A("iconInput"))},null,32),s(r)!==null?(i(),d("img",{key:0,src:s(r).file,alt:"縮圖",class:"max-w-[100px] max-h-[100px]"},null,8,be)):g("",!0)])]),e("div",ye,[e("div",ke,[$e,e("button",{onClick:o[5]||(o[5]=a=>L("imageInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"imageInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[6]||(o[6]=()=>A("imageInput"))},null,32),s(p)!==null?(i(),d("img",{key:0,src:s(p).file,alt:"縮圖",class:"max-w-[200px] max-h-[300px]"},null,8,Ce)):g("",!0)]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:F},"下一步")])])])):g("",!0),s(w)===2?(i(),d("div",Ee,[e("div",Ie,[e("div",Be,[e("div",Se,[Ne,e("button",{class:"addBtn ml-3 px-3",onClick:o[7]||(o[7]=a=>M("instant"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[8]||(o[8]=a=>O("instant"))},"刪除")]),(i(!0),d(b,null,y(s(x),(a,v)=>W((i(),d("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:"即使效果","onUpdate:modelValue":I=>s(x)[v]=I},null,8,je)),[[R,s(x)[v]]])),256))]),e("div",De,[e("div",Pe,[Fe,e("button",{class:"addBtn ml-3 px-3",onClick:o[9]||(o[9]=a=>M("round"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[10]||(o[10]=a=>O("round"))},"刪除")]),(i(!0),d(b,null,y(s(E),(a,v)=>W((i(),d("textarea",{class:"selfInput mt-1 mb-1 whitespace-pre-wrap",placeholder:`回合效果${v+1}`,"onUpdate:modelValue":I=>s(E)[v]=I},null,8,Te)),[[R,s(E)[v]]])),256))]),e("div",Le,[e("div",Ae,[Me,e("button",{class:"addBtn ml-3 px-3",onClick:o[11]||(o[11]=a=>M("combo"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[12]||(o[12]=a=>O("combo"))},"刪除")]),(i(!0),d(b,null,y(s(B),(a,v)=>W((i(),d("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:`連動效果${v+1}`,"onUpdate:modelValue":I=>s(B)[v]=I},null,8,Oe)),[[R,s(B)[v]]])),256))])]),e("div",Ve,[e("div",Je,[Ke,e("div",null,[e("select",Ue,[qe,(i(!0),d(b,null,y(s(S),a=>(i(),d("optgroup",{label:a.typeName},[(i(!0),d(b,null,y(a.data,v=>(i(),d("option",{value:v.id,class:"bg-amber-900"},m(v.name),9,We))),256))],8,Ge))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:o[13]||(o[13]=a=>K())},"新增")]),e("div",Re,[(i(!0),d(b,null,y(s(N),a=>(i(),d("span",null,m(a.id+" "+a.name),1))),256))])]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:F},"下一步")])])])):g("",!0),s(w)===3?(i(),d("div",He,[e("div",ze,[e("div",Qe,[Xe,e("input",{type:"number",id:"pointGet",class:"selfInput",min:1,max:8,required:"",onChange:o[14]||(o[14]=a=>s(t).PointGet=a.target.value)},null,32)]),e("div",Ye,[Ze,e("input",{type:"number",id:"pointMax",class:"selfInput",min:1,max:8,required:"",onChange:o[15]||(o[15]=a=>s(t).PointMax=a.target.value)},null,32)]),e("div",et,[tt,e("input",{type:"number",id:"pointConsume",class:"selfInput",min:1,max:8,required:"",onChange:o[16]||(o[16]=a=>s(t).PointConsume=a.target.value)},null,32)]),e("div",lt,[st,e("input",{type:"number",id:"pointEnter",class:"selfInput",min:1,max:8,required:"",onChange:o[17]||(o[17]=a=>s(t).PointEnter=a.target.value)},null,32)])]),e("div",at,[e("div",nt,[ot,e("input",{type:"text",class:"selfInput",onKeydown:q},null,32),(i(!0),d(b,null,y(s(t).keyword,a=>(i(),d("span",null,m(a),1))),256))]),e("div",it,[dt,e("button",{onClick:o[18]||(o[18]=a=>L("spreadInput")),class:"max-w-[100px] addBtn px-2"},"上傳"),e("input",{type:"file",id:"spreadInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[19]||(o[19]=()=>A("spreadInput"))},null,32),e("div",ut,[s(C)!==null?(i(),d("img",{key:0,src:s(C).file,alt:"盤面圖",class:"w-[240px]"},null,8,ct)):g("",!0)])]),rt,e("div",{class:"mt-2"},[e("button",{class:"addBtn pl-2 pr-2",onClick:F},"下一步")])])])):g("",!0),s(w)===4?(i(),d("div",pt,[e("div",ft,[e("div",vt,[e("div",mt,[s(t).rarity===1?(i(),d("span",xt,m(s(t).name),1)):g("",!0),s(t).rarity===2?(i(),d("span",_t,m(s(t).name),1)):g("",!0),s(t).rarity===3?(i(),d("span",gt,m(s(t).name),1)):g("",!0)]),s(t).rarity===1?(i(),d("div",ht,[e("img",{src:s(p).file,alt:s(t).name,class:"h-[40vh] min-w-[150px]"},null,8,wt)])):g("",!0),s(t).rarity===2?(i(),d("div",bt,[e("img",{src:s(p).file,alt:s(t).name,class:"h-[40vh] min-w-[150px]"},null,8,yt)])):g("",!0),s(t).rarity===3?(i(),d("div",kt,[e("img",{src:s(p).file,alt:s(t).name,class:"h-[40vh] min-w-[150px]"},null,8,$t)])):g("",!0)]),e("div",Ct,[e("div",Et,[It,e("div",Bt,[(i(!0),d(b,null,y(s(t).instantEffect,a=>(i(),d("span",St,"•"+m(a),1))),256))])]),e("div",Nt,[jt,e("div",Dt,[(i(!0),d(b,null,y(s(t).roundEffect,a=>(i(),d("span",Pt,"•"+m(a),1))),256))])]),e("div",Ft,[Tt,e("div",Lt,[(i(!0),d(b,null,y(s(t).comboEffect,a=>(i(),d("span",At,"•"+m(a),1))),256))])])])]),e("div",{class:"w-5/6 mt-5 mx-auto"},[e("button",{class:"addBtn min-w-[100px] ml-2",onClick:F},"儲存")])])):g("",!0)]),_:1})]))}},Ot=Q(Mt,[["__scopeId","data-v-6b65036b"]]);const P=$=>(X("data-v-cfa30c83"),$=$(),Y(),$),Vt={class:"main"},Jt={class:"w-4/5 mx-auto flex flex-row justify-evenly"},Kt={key:0,class:"w-1/2 min-h-[500px] flex flex-row"},Ut={class:"CardImage w-1/2"},qt={class:"text-white font-bold text-xl"},Gt=["src"],Wt={class:"Details flex flex-col w-1/2 mt-5 [&>div]:mb-5"},Rt={class:"flex flex-row"},Ht=P(()=>e("span",{class:"standwardLabel"},"即時效果",-1)),zt={class:"mb-3 flex flex-col"},Qt=["onKeydown"],Xt={class:"flex flex-row"},Yt=P(()=>e("span",{class:"standwardLabel"},"回合效果",-1)),Zt={class:"mb-3 flex flex-col"},el=["onKeydown"],tl={class:"flex flex-row"},ll=P(()=>e("span",{class:"standwardLabel"},"連動效果",-1)),sl={class:"mb-3 flex flex-col"},al=["onKeydown"],nl={class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},ol={class:"flex-col"},il=P(()=>e("span",{class:"standwardLabel"},"自身技能標籤",-1)),dl={class:"mb-3"},ul=["value"],cl={key:0},rl={class:"colorSelect w-[150px]",id:"tagSelect"},pl=P(()=>e("option",{value:0},m("請選擇"),-1)),fl=["label"],vl=["value"],ml={key:1},xl=P(()=>e("span",{class:"text-yellow-500 font-bold text-lg"},"沒有找到匹配技能標籤",-1)),_l=[xl],gl={class:"mb-2 flex-col"},hl={class:"max-h-[150px] overflow-y-scroll hiddenScrollbar"},wl={class:"w-[50px]"},bl={class:"text-white"},yl={class:"w-[150px]"},kl={class:"text-white"},$l={class:"w-[50px]"},Cl={class:"text-white"},El=["id","onClick"],Il=P(()=>e("span",{class:"standwardLabel"},"搜尋關鍵字管理",-1)),Bl=["value"],Sl={key:0,class:"max-h-[150px] overflow-y-scroll hiddenScrollbar"},Nl={class:"text-white min-w-[200px]"},jl=["id","onClick"],Dl={class:"absolute bottom-0"},Pl={class:"slide w-4/5 mx-auto mt-3 pt-3"},Fl={class:"ml-5 mb-3"},Tl=P(()=>e("span",{class:"text-white"},"請輸入要卡片編號:",-1)),Ll={class:"flex flex-row"},Al=["onClick"],Ml=["src"],Ol={key:0,class:"w-[100%] text-center bg-amber-900 text-white rounded-md"},Vl={key:1,class:"w-[100%] text-center bg-slate-500 text-white rounded-md"},Jl={key:2,class:"w-[100%] text-center bg-yellow-600 text-white rounded-md"},Kl={className:"overlay",id:"overlay"},Ul={class:"popup max-[500px]:w-[80%] max-[500px]:min-w-[200px]"};let te=k(null);const ql={name:"App",components:{Carousel:Z,Slide:ee,Pagination:oe,Navigation:ie},methods:{slideItem:function($,j){if($.target.value>j||$.target.value<0)alert("該編號卡片資料沒有找到!!");else{let D=$.target.value;te.value.data.slideTo(D-1)}}},data(){}},Gl=Object.assign(ql,{setup($){let j=[],D=[],J=k(1),t=k([]),w=k([]),r=k([]),p=k(1),C="",S="",N=k(null);const E=se("frontpath");if(E!==""){var B=window.location.href;B.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}T.post("http://localhost:5000/card/get",{get:J.value}).then(u=>{console.log(u.data),j=u.data.card,D=u.data.func,w.value=JSON.parse(JSON.stringify(D)),r.value=JSON.parse(JSON.stringify(j)),K(1)});let x=k({});function U(u){t.value=t.value.filter((n,c)=>c!==u);let l=r.value[p.value-1].tag;r.value[p.value-1].tag=l.filter((n,c)=>c!==u),console.log(r.value[p.value-1])}function L(){var u=parseInt(document.getElementById("tagSelect").value),l={};w.value.forEach(n=>{let c=n.data.find(_=>_.id===u);c!==void 0&&(l=c)}),!(t.value.includes(l)||u===0)&&(console.log(l),t.value.push(l),console.log(t.value),t.value=t.value.sort((n,c)=>n.id-c.id),r.value[p.value-1].tag.push(u),r.value[p.value-1].tag=r.value[p.value-1].tag.sort((n,c)=>n-c),console.log(j[p.value-1].tag),console.log(r.value[p.value-1].tag))}function A(){let u=r.value[p.value-1].keyword;u===void 0&&(u=[]),u.push(S),console.log(u),r.value[p.value-1].keyword=u,console.log(r.value[p.value-1].keyword),S=""}function M(u){let l=r.value[p.value-1].keyword;l=l.filter((n,c)=>c!==u),r.value[p.value-1].keyword=l,console.log(r.value[p.value-1].keyword)}function O(){if(confirm("將會儲存你所做的所有更改，如果確定覆蓋則按確定"))try{console.log(r.value),console.log(j);let u={getId:J.value,newData:r.value};console.log(u),T.post("http://localhost:5000/card/edit",u).then(l=>{console.log(l),alert(l.data),j=JSON.parse(JSON.stringify(r.value))})}catch(u){console.log(u)}}function K(u){p.value=u,x.value=r.value.find(l=>l.id===p.value),t.value=[],x.value.tag.forEach(l=>{D.forEach(n=>{let c=n.data.find(_=>_.id===l);c!==void 0&&t.value.push(c)})})}function q(u){if(C=u.target.value,console.log(C),C===""){w.value=D;return}let l=[];D.forEach(n=>{let c=[];if(n.data.forEach(_=>{_.name.includes(C)&&c.push(_)}),c.length!==0){console.log(c);let _=n;_.data=c,l.push(_)}}),l.length!==0?w.value=l:w.value=[]}function F(u){S=u.target.value,console.log(S)}function G(){let u=JSON.parse(JSON.stringify(j.find(l=>l.id===p.value)));t.value=[],u.tag.forEach(l=>{D.forEach(n=>{let c=n.data.find(_=>_.id===l);c!==void 0&&t.value.push(c)})}),x.value=u,r.value[p.value-1]=u}function V(u){u.target.parentElement.querySelector("textarea").classList.remove("hidden"),u.target.classList.add("hidden")}function f(u,l,n=void 0){if(console.log(u.key),u.key==="Enter"){switch(l){case"instant":r.value[p.value-1].instantEffect[n]=u.target.value;break;case"round":r.value[p.value-1].roundEffect[n]=u.target.value;break;case"combo":r.value[p.value-1].comboEffect[n]=u.target.value;break}console.log(r.value[p.value-1]),u.target.parentElement.querySelector("span").classList.remove("hidden"),u.target.classList.add("hidden");return}if(u.key,u.key==="Delete")switch(l){case"instant":break;case"round":r.value[p.value-1].roundEffect=r.value[p.value-1].roundEffect.filter((c,_)=>_!==n);break;case"combo":r.value[p.value-1].comboEffect=r.value[p.value-1].comboEffect.filter((c,_)=>_!==n);break}}function o(u){let l=r.value[p.value-1];switch(u){case"round":l.roundEffect.push("回合效果");break;case"instant":l.instantEffect.push("即時效果");break;case"combo":l.comboEffect.push("連動效果");break}}function a(u){let l=r.value[p.value-1];switch(u){case"round":l.roundEffect=l.roundEffect.filter((n,c)=>c!==l.roundEffect.length-1);break;case"instant":l.instantEffect=l.instantEffect.filter((n,c)=>c!==l.instantEffect.length-1);break;case"combo":l.comboEffect=l.comboEffect.filter((n,c)=>c!==l.comboEffect.length-1);break}}function v(){document.getElementById("overlay").style.display="block",N.value.setFunc(w.value)}function I(){document.getElementById("overlay").style.display="none"}return ae("close",I),(u,l)=>(i(),d("div",Vt,[e("div",Jt,[s(x)!==void 0?(i(),d("div",Kt,[e("div",Ut,[e("span",qt,m(s(x).name),1),e("img",{src:s(E)+s(x).fullimage,alt:"全身圖",class:"max-h-[500px]"},null,8,Gt)]),e("div",Wt,[e("div",null,[e("div",Rt,[Ht,e("button",{class:"addBtn ml-5",onClick:l[0]||(l[0]=n=>o("instant"))},"新增"),s(x).instantEffect.length>1?(i(),d("button",{key:0,class:"addBtn ml-5",onClick:l[1]||(l[1]=n=>a("instant"))},"刪除")):g("",!0)]),(i(!0),d(b,null,y(s(x).instantEffect,(n,c)=>(i(),d("div",zt,[e("span",{class:"text-white font-bold",onDblclick:V},m(n),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:_=>f(_,"instant",c)},m(n),41,Qt)]))),256))]),e("div",null,[e("div",Xt,[Yt,e("button",{class:"addBtn ml-5",onClick:l[2]||(l[2]=n=>o("round"))},"新增"),s(x).roundEffect.length>1?(i(),d("button",{key:0,class:"addBtn ml-5",onClick:l[3]||(l[3]=n=>a("round"))},"刪除")):g("",!0)]),(i(!0),d(b,null,y(s(x).roundEffect,(n,c)=>(i(),d("div",Zt,[e("span",{class:"text-white font-bold",onDblclick:V},m(n),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:_=>f(_,"round",c)},m(n),41,el)]))),256))]),e("div",null,[e("div",tl,[ll,e("button",{class:"addBtn ml-5",onClick:l[4]||(l[4]=n=>o("combo"))},"新增"),s(x).comboEffect.length>1?(i(),d("button",{key:0,class:"addBtn ml-5",onClick:l[5]||(l[5]=n=>a("combo"))},"新增")):g("",!0)]),(i(!0),d(b,null,y(s(x).comboEffect,(n,c)=>(i(),d("div",sl,[e("span",{class:"text-white font-bold",onDblclick:V},m(n),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:_=>f(_,"combo",c)},m(n),41,al)]))),256))])])])):g("",!0),e("div",nl,[e("div",ol,[il,e("div",dl,[e("input",{type:"text",value:s(C),placeholder:"技能關鍵字",onInput:l[6]||(l[6]=n=>q(n)),class:"colorSelect"},null,40,ul)]),s(w).length!==0?(i(),d("div",cl,[e("select",rl,[pl,(i(!0),d(b,null,y(s(w),n=>(i(),d("optgroup",{label:n.typeName},[(i(!0),d(b,null,y(n.data,c=>(i(),d("option",{value:c.id,class:"bg-amber-900"},m(c.name),9,vl))),256))],8,fl))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:l[7]||(l[7]=n=>L())},"新增")])):(i(),d("div",ml,_l))]),e("div",gl,[e("div",hl,[e("table",null,[e("tbody",null,[(i(!0),d(b,null,y(s(t),(n,c)=>(i(),d("tr",null,[e("td",wl,[e("span",bl,m(n.id),1)]),e("td",yl,[e("span",kl,m(n.name),1)]),e("td",$l,[e("span",Cl,[e("button",{class:"removeBtn",id:"btns"+c,onClick:_=>U(c)},"移除",8,El)])])]))),256))])])])]),e("div",null,[Il,e("div",null,[e("input",{type:"text",value:s(S),placeholder:"搜尋關鍵字",onInput:l[8]||(l[8]=n=>F(n)),class:"colorSelect"},null,40,Bl),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:l[9]||(l[9]=n=>A())},"新增")]),s(x).keyword!==void 0?(i(),d("div",Sl,[e("table",null,[e("tbody",null,[(i(!0),d(b,null,y(s(x).keyword,(n,c)=>(i(),d("tr",null,[e("td",Nl,[e("span",null,m(n),1)]),e("td",null,[e("button",{class:"removeBtn",id:"btns"+c,onClick:_=>M(c)},"移除",8,jl)])]))),256))])])])):g("",!0)]),e("div",Dl,[e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:l[10]||(l[10]=n=>O())},"儲存"),e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:l[11]||(l[11]=n=>G())},"還原")])])]),e("div",Pl,[e("div",Fl,[Tl,e("div",Ll,[e("input",{type:"number",class:"w-[100px] rounded-md",onChange:l[12]||(l[12]=n=>u.slideItem(n,s(r).length))},null,32),e("button",{class:"addBtn ml-3 px-3",onClick:v},"添加卡片")])]),H(s(Z),{"wrap-around":!0,"items-to-show":5,ref_key:"cardSlide",ref:te},{default:z(()=>[(i(!0),d(b,null,y(s(r),(n,c)=>(i(),ne(s(ee),{key:c},{default:z(()=>[e("div",{class:"flex-col [&>span]:block cursor-pointer",onClick:_=>K(n.id)},[e("img",{src:s(E)+n.image,width:"160",alt:"not found"},null,8,Ml),n.rarity===1?(i(),d("span",Ol,m(n.id),1)):g("",!0),n.rarity===2?(i(),d("span",Vl,m(n.id),1)):g("",!0),n.rarity===3?(i(),d("span",Jl,m(n.id),1)):g("",!0)],8,Al)]),_:2},1024))),128))]),_:1},512)]),e("div",Kl,[e("div",Ul,[e("div",{className:"close",onClick:I},"✖"),H(Ot,{ref_key:"popup",ref:N,max:s(r).length+1,func:s(w),onClose:I},null,8,["max","func"])])])]))}}),zl=Q(Gl,[["__scopeId","data-v-cfa30c83"]]);export{zl as default};
