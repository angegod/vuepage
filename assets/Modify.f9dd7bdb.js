import{a as T}from"./axios.1779699b.js";import{_ as Q,k,o as i,c as d,b as H,w as z,d as s,a as e,F as w,f as b,t as _,n as g,q as W,x as R,T as le,p as X,h as Y,i as se,l as ne,g as ae}from"./index.e3a0fb74.js";import{C as Z,S as ee,P as oe,N as ie}from"./carousel.91fa8c40.js";const y=$=>(X("data-v-13286c45"),$=$(),Y(),$),de={class:"h-[500px] pl-5"},ue={class:"flex flex-row min-w-[500px]",key:"step1"},ce={class:"pl-2 pr-2 w-1/2"},re={class:"flex flex-col"},pe=y(()=>e("span",{class:"text-lg"},"卡片名稱:",-1)),fe={class:"mt-3 flex flex-col"},ve=y(()=>e("span",{class:"text-lg"},"卡片編號",-1)),me=["value"],xe={class:"flex flex-col mt-5"},_e=y(()=>e("span",{class:"text-lg"},"稀有度:",-1)),ge=["value"],he={class:"flex flex-col mt-5"},we=y(()=>e("span",{class:"text-lg"},"縮圖:",-1)),be=["src"],ye={class:"pl-2 pr-2 w-1/2 flex flex-col justify-between"},ke={class:"flex flex-col"},$e=y(()=>e("span",{class:"text-lg"},"全身圖:",-1)),Ce=["src"],Ee={key:"step2",class:"flex flex-row min-w-[500px]"},Ie={class:"w-1/2 pl-2 pr-2 flex flex-col"},Be={class:"flex flex-col mt-5"},Se={class:"flex flex-row mb-1"},Ne=y(()=>e("span",{class:"text-lg"},"即時效果:",-1)),De=["onUpdate:modelValue"],Pe={class:"flex flex-col mt-5"},je={class:"flex flex-row mb-1"},Fe=y(()=>e("span",{class:"text-lg"},"回合效果:",-1)),Te=["placeholder","onUpdate:modelValue"],Le={class:"flex flex-col mt-5"},Ae={class:"flex flex-row mb-1"},Me=y(()=>e("span",{class:"text-lg"},"連動效果:",-1)),Oe=["placeholder","onUpdate:modelValue"],Ve={class:"w-1/2 pl-2 pr-2 flex flex-col justify-between min-h-[400px]"},Je={class:"flex flex-col"},Ke=y(()=>e("div",null,[e("span",null,"技能標籤")],-1)),Ue={class:"colorSelect w-[150px]",id:"tagSelect2"},qe=y(()=>e("option",{value:0},_("請選擇"),-1)),Ge=["label"],We=["value"],Re={class:"flex flex-col"},He={class:"flex flex-row min-w-[500px]",key:"step3"},ze={class:"px-2 w-1/2"},Qe={class:"flex flex-col"},Xe=y(()=>e("span",null,"回合累積能量:",-1)),Ye={class:"flex flex-col"},Ze=y(()=>e("span",null,"總儲存能量:",-1)),et={class:"flex flex-col"},tt=y(()=>e("span",null,"回合消耗能量:",-1)),lt={class:"flex flex-col"},st=y(()=>e("span",null,"進場能量:",-1)),nt={class:"w-1/2"},at={class:"flex flex-col"},ot=y(()=>e("span",null,"卡片關鍵字:",-1)),it={class:"my-2"},dt={class:"spread"},ut=["src"],ct=y(()=>e("div",{class:"my-2"},[e("span",null,"圖片標示位置:"),e("input",{type:"number",class:"selfInput",id:"spreadIndex",min:1})],-1)),rt={class:"min-w-[500px]",key:"step4"},pt={class:"w-5/6 mx-auto mt-5 flex flex-row flex-wrap justify-between mb-5 max-[450px]:justify-center"},ft={class:"w-2/5 min-w-[150px] max-[450px]:w-[100%]"},vt={class:"[&>span]:text-[20px] mb-3 text-center"},mt={key:0,class:"w-[100%] text-center text-amber-900 font-bold"},xt={key:1,class:"w-[100%] text-center text-slate-500 font-bold"},_t={key:2,class:"w-[100%] text-center text-yellow-600 font-bold"},gt={key:0,class:"imgbox1 max-w-[150px] mx-auto"},ht=["src","alt"],wt={key:1,class:"imgbox2 max-w-[150px] mx-auto"},bt=["src","alt"],yt={key:2,class:"imgbox3 max-w-[150px] mx-auto"},kt=["src","alt"],$t={class:"w-1/2 flex flex-col min-w-[150px] ml-2 max-[450px]:ml-0 max-[450px]:w-[100%]"},Ct={class:"flex flex-col mt-5 min-h-[10vh]"},Et=y(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"即時效果")])],-1)),It={class:"flex flex-col"},Bt={class:"text-black"},St={class:"flex flex-col mt-5 min-h-[20vh]"},Nt=y(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"回合效果")])],-1)),Dt={class:"flex flex-col"},Pt={class:"text-black"},jt={class:"flex flex-col mt-5 min-h-[10vh]"},Ft=y(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"連動效果")])],-1)),Tt={class:"flex flex-col"},Lt={class:"text-black"},At={__name:"AddCard",props:["max","func"],emits:["close"],setup($,{expose:D,emit:P}){let J=$,t=k({}),h=k(1),r=k(null),p=k(null),C=k(null),S=k([]),N=k([]),E=k([""]),B=k([""]),m=k([""]);const U=P;console.log(S.value);function L(f){document.getElementById(f).value=null,document.getElementById(f).click()}async function A(f){let o=document.getElementById(f).files[0];const n=new FileReader;n.onload=v=>{f==="iconInput"?r.value={file:v.target.result,name:o.name,realFile:o}:f==="imageInput"?p.value={file:v.target.result,name:o.name,realFile:o}:f==="spreadInput"&&(C.value={file:v.target.result,name:o.name,realFile:o}),console.log(C.value)},await n.readAsDataURL(o)}function M(f){switch(f){case"combo":B.value.push("");break;case"round":E.value.push("");break;case"instant":m.value.push("");break}}function O(f){switch(f){case"combo":B.value.length>1&&(B.value=B.value.filter((o,n)=>n!==B.value.length-1)),console.log(B.value.length);break;case"round":E.value.length>1&&(E.value=E.value.filter((o,n)=>n!==E.value.length-1)),console.log(E.value.length);break;case"instant":m.value.length>1&&(m.value=m.value.filter((o,n)=>n!==m.value.length-1)),console.log(m.value.length);break}}function K(){console.log(S.value);var f=parseInt(document.getElementById("tagSelect2").value),o={};S.value.forEach(n=>{let v=n.data.find(I=>I.id===f);v!==void 0&&(o=v)}),console.log(f),!(N.value.includes(o)||f===0)&&(N.value.push(o),console.log(N.value),N.value=N.value.sort((n,v)=>n.id-v.id),t.value.tag.push(f),t.value.tag=t.value.tag.sort((n,v)=>n-v),console.log(N.value))}function q(f){f.key==="Enter"&&(alert("關鍵字輸入!!"),t.value.keyword===void 0&&(t.value.keyword=[]),t.value.keyword.push(f.target.value),f.target.value="")}async function F(){if(console.log(h.value),h.value===3&&(t.value.PointMax===void 0||t.value.PointConsume===void 0||t.value.PointGet===void 0||t.value.PointEnter===void 0)){alert("請輸入對應資料!!");return}if(h.value+=1,h.value===4&&(console.log(t.value),G()),h.value===5){let f=new FormData;f.append("image",r.value.realFile),f.append("oldName",r.value.name.split(".")[0]),f.append("newName",`1_${t.value.id}`),console.log(f.getAll("image"));const o=await T.post("http://localhost:5000/card/icon",f,{headers:{"Content-Type":"multipart/form-data"}});console.log(o.data);let n=new FormData;n.append("image",p.value.realFile),n.append("oldName",p.value.name.split(".")[0]),n.append("newName",`1_${t.value.id}`),console.log(p.value);const v=await T.post("http://localhost:5000/card/image",n,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(v.data),C.value!==null){console.log("開始上傳盤面");let u=new FormData;u.append("image",C.value.realFile),u.append("oldName",C.value.name.split(".")[0]),u.append("newName",`1_${t.value.id}`),console.log(C.value);const l=await T.post("http://localhost:5000/card/spread",u,{headers:{"Content-Type":"multipart/form-data"}});console.log(l.data)}let I={series:1,card:t.value};await T.post("http://localhost:5000/card/add",I).then(u=>{console.log("資料儲存"),console.log(u.data.card),alert("新卡片已添加"),U("close","")})}}function G(){t.value.id===void 0&&(t.value.id=J.max),t.value.roundEffect=E.value,t.value.instantEffect=m.value,t.value.comboEffect=B.value,t.value.image=`/images/card/icon/1_${t.value.id}.png`,t.value.fullimage=`/images/card/image/1_${t.value.id}.png`,t.value.spread={id:parseInt(document.getElementById("spreadIndex").value),image:`/images/card/image/${t.value.id}.png`};let f=[];N.value.forEach(n=>{f.push(parseInt(n.id))}),t.value.tag=f;let o={id:t.value.id,name:t.value.name,rarity:t.value.rarity,image:t.value.image,instantEffect:t.value.instantEffect,roundEffect:t.value.roundEffect,comboEffect:t.value.comboEffect,PointMax:parseInt(t.value.PointMax),PointEnter:parseInt(t.value.PointEnter),PointConsume:parseInt(t.value.PointConsume),PointGet:parseInt(t.value.PointGet),tag:t.value.tag,fullimage:t.value.fullimage,keyword:t.value.keyword,spread:t.value.spread};t.value=o,console.log(t.value)}function V(f){S.value=f}return D({setFunc:V}),(f,o)=>(i(),d("div",de,[H(le,{name:"step",tag:"div",class:"flex flex-row"},{default:z(()=>[s(h)===1?(i(),d("div",ue,[e("div",ce,[e("div",re,[pe,e("input",{type:"text",class:"selfInput",placeholder:"卡片名子",onChange:o[0]||(o[0]=n=>s(t).name=n.target.value)},null,32)]),e("div",fe,[ve,e("input",{type:"number",class:"selfInput",value:$.max,onChange:o[1]||(o[1]=n=>s(t).id=parseInt(n.target.value))},null,40,me)]),e("div",xe,[_e,(i(),d(w,null,b(3,n=>e("div",null,[e("input",{type:"radio",name:"rarity",value:n,onChange:o[2]||(o[2]=v=>s(t).rarity=parseInt(v.target.value))},null,40,ge),e("span",null,_(n+"星"),1)])),64))]),e("div",he,[we,e("button",{onClick:o[3]||(o[3]=n=>L("iconInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"iconInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[4]||(o[4]=()=>A("iconInput"))},null,32),s(r)!==null?(i(),d("img",{key:0,src:s(r).file,alt:"縮圖",class:"max-w-[100px] max-h-[100px]"},null,8,be)):g("",!0)])]),e("div",ye,[e("div",ke,[$e,e("button",{onClick:o[5]||(o[5]=n=>L("imageInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"imageInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[6]||(o[6]=()=>A("imageInput"))},null,32),s(p)!==null?(i(),d("img",{key:0,src:s(p).file,alt:"縮圖",class:"max-w-[200px] max-h-[300px]"},null,8,Ce)):g("",!0)]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:F},"下一步")])])])):g("",!0),s(h)===2?(i(),d("div",Ee,[e("div",Ie,[e("div",Be,[e("div",Se,[Ne,e("button",{class:"addBtn ml-3 px-3",onClick:o[7]||(o[7]=n=>M("instant"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[8]||(o[8]=n=>O("instant"))},"刪除")]),(i(!0),d(w,null,b(s(m),(n,v)=>W((i(),d("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:"即使效果","onUpdate:modelValue":I=>s(m)[v]=I},null,8,De)),[[R,s(m)[v]]])),256))]),e("div",Pe,[e("div",je,[Fe,e("button",{class:"addBtn ml-3 px-3",onClick:o[9]||(o[9]=n=>M("round"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[10]||(o[10]=n=>O("round"))},"刪除")]),(i(!0),d(w,null,b(s(E),(n,v)=>W((i(),d("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:`回合效果${v+1}`,"onUpdate:modelValue":I=>s(E)[v]=I},null,8,Te)),[[R,s(E)[v]]])),256))]),e("div",Le,[e("div",Ae,[Me,e("button",{class:"addBtn ml-3 px-3",onClick:o[11]||(o[11]=n=>M("combo"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[12]||(o[12]=n=>O("combo"))},"刪除")]),(i(!0),d(w,null,b(s(B),(n,v)=>W((i(),d("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:`連動效果${v+1}`,"onUpdate:modelValue":I=>s(B)[v]=I},null,8,Oe)),[[R,s(B)[v]]])),256))])]),e("div",Ve,[e("div",Je,[Ke,e("div",null,[e("select",Ue,[qe,(i(!0),d(w,null,b(s(S),n=>(i(),d("optgroup",{label:n.typeName},[(i(!0),d(w,null,b(n.data,v=>(i(),d("option",{value:v.id,class:"bg-amber-900"},_(v.name),9,We))),256))],8,Ge))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:o[13]||(o[13]=n=>K())},"新增")]),e("div",Re,[(i(!0),d(w,null,b(s(N),n=>(i(),d("span",null,_(n.id+" "+n.name),1))),256))])]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:F},"下一步")])])])):g("",!0),s(h)===3?(i(),d("div",He,[e("div",ze,[e("div",Qe,[Xe,e("input",{type:"number",id:"pointGet",class:"selfInput",min:1,max:8,required:"",onChange:o[14]||(o[14]=n=>s(t).PointGet=n.target.value)},null,32)]),e("div",Ye,[Ze,e("input",{type:"number",id:"pointMax",class:"selfInput",min:1,max:8,required:"",onChange:o[15]||(o[15]=n=>s(t).PointMax=n.target.value)},null,32)]),e("div",et,[tt,e("input",{type:"number",id:"pointConsume",class:"selfInput",min:1,max:8,required:"",onChange:o[16]||(o[16]=n=>s(t).PointConsume=n.target.value)},null,32)]),e("div",lt,[st,e("input",{type:"number",id:"pointEnter",class:"selfInput",min:1,max:8,required:"",onChange:o[17]||(o[17]=n=>s(t).PointEnter=n.target.value)},null,32)])]),e("div",nt,[e("div",at,[ot,e("input",{type:"text",class:"selfInput",onKeydown:q},null,32),(i(!0),d(w,null,b(s(t).keyword,n=>(i(),d("span",null,_(n),1))),256))]),e("div",it,[e("button",{onClick:o[18]||(o[18]=n=>L("spreadInput")),class:"max-w-[100px] addBtn px-2"},"上傳"),e("input",{type:"file",id:"spreadInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[19]||(o[19]=()=>A("spreadInput"))},null,32),e("div",dt,[s(C)!==null?(i(),d("img",{key:0,src:s(C).file,alt:"盤面圖",class:"w-[240px]"},null,8,ut)):g("",!0)])]),ct,e("div",{class:"mt-2"},[e("button",{class:"addBtn pl-2 pr-2",onClick:F},"下一步")])])])):g("",!0),s(h)===4?(i(),d("div",rt,[e("div",pt,[e("div",ft,[e("div",vt,[s(t).rarity===1?(i(),d("span",mt,_(s(t).name),1)):g("",!0),s(t).rarity===2?(i(),d("span",xt,_(s(t).name),1)):g("",!0),s(t).rarity===3?(i(),d("span",_t,_(s(t).name),1)):g("",!0)]),s(t).rarity===1?(i(),d("div",gt,[e("img",{src:s(p).file,alt:s(t).name,class:"h-[40vh] min-w-[150px]"},null,8,ht)])):g("",!0),s(t).rarity===2?(i(),d("div",wt,[e("img",{src:s(p).file,alt:s(t).name,class:"h-[40vh] min-w-[150px]"},null,8,bt)])):g("",!0),s(t).rarity===3?(i(),d("div",yt,[e("img",{src:s(p).file,alt:s(t).name,class:"h-[40vh] min-w-[150px]"},null,8,kt)])):g("",!0)]),e("div",$t,[e("div",Ct,[Et,e("div",It,[(i(!0),d(w,null,b(s(t).instantEffect,n=>(i(),d("span",Bt,"•"+_(n),1))),256))])]),e("div",St,[Nt,e("div",Dt,[(i(!0),d(w,null,b(s(t).roundEffect,n=>(i(),d("span",Pt,"•"+_(n),1))),256))])]),e("div",jt,[Ft,e("div",Tt,[(i(!0),d(w,null,b(s(t).comboEffect,n=>(i(),d("span",Lt,"•"+_(n),1))),256))])])])]),e("div",{class:"w-5/6 mt-5 mx-auto"},[e("button",{class:"addBtn min-w-[100px] ml-2",onClick:F},"儲存")])])):g("",!0)]),_:1})]))}},Mt=Q(At,[["__scopeId","data-v-13286c45"]]);const j=$=>(X("data-v-a622a3f7"),$=$(),Y(),$),Ot={class:"main"},Vt={class:"w-4/5 mx-auto flex flex-row justify-evenly"},Jt={class:"w-1/2 min-h-[500px] flex flex-row"},Kt={class:"CardImage w-1/2"},Ut={class:"text-white font-bold text-xl"},qt=["src"],Gt={class:"Details flex flex-col w-1/2 mt-5 [&>div]:mb-5"},Wt={class:"flex flex-row"},Rt=j(()=>e("span",{class:"standwardLabel"},"即時效果",-1)),Ht={class:"mb-3 flex flex-col"},zt=["value","onKeydown"],Qt={class:"flex flex-row"},Xt=j(()=>e("span",{class:"standwardLabel"},"回合效果",-1)),Yt={class:"mb-3 flex flex-col"},Zt=["value","onKeydown"],el={class:"flex flex-row"},tl=j(()=>e("span",{class:"standwardLabel"},"連動效果",-1)),ll={class:"mb-3 flex flex-col"},sl=["value","onKeydown"],nl={class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},al={class:"flex-col"},ol=j(()=>e("span",{class:"standwardLabel"},"自身技能標籤",-1)),il={class:"mb-3"},dl=["value"],ul={key:0},cl={class:"colorSelect w-[150px]",id:"tagSelect"},rl=j(()=>e("option",{value:0},_("請選擇"),-1)),pl=["label"],fl=["value"],vl={key:1},ml=j(()=>e("span",{class:"text-yellow-500 font-bold text-lg"},"沒有找到匹配技能標籤",-1)),xl=[ml],_l={class:"mb-2 flex-col"},gl={class:"max-h-[150px] overflow-y-scroll hiddenScrollbar"},hl={class:"w-[50px]"},wl={class:"text-white"},bl={class:"w-[150px]"},yl={class:"text-white"},kl={class:"w-[50px]"},$l={class:"text-white"},Cl=["id","onClick"],El=j(()=>e("span",{class:"standwardLabel"},"搜尋關鍵字管理",-1)),Il=["value"],Bl={key:0,class:"max-h-[150px] overflow-y-scroll hiddenScrollbar"},Sl={class:"text-white min-w-[200px]"},Nl=["id","onClick"],Dl={class:"absolute bottom-0"},Pl={class:"slide w-4/5 mx-auto mt-3 pt-3"},jl={class:"ml-5 mb-3"},Fl=j(()=>e("span",{class:"text-white"},"請輸入要卡片編號:",-1)),Tl={class:"flex flex-row"},Ll=["onClick"],Al=["src"],Ml={key:0,class:"w-[100%] text-center bg-amber-900 text-white rounded-md"},Ol={key:1,class:"w-[100%] text-center bg-slate-500 text-white rounded-md"},Vl={key:2,class:"w-[100%] text-center bg-yellow-600 text-white rounded-md"},Jl={className:"overlay",id:"overlay"},Kl={class:"popup max-[500px]:w-[80%] max-[500px]:min-w-[200px]"};let te=k(null);const Ul={name:"App",components:{Carousel:Z,Slide:ee,Pagination:oe,Navigation:ie},methods:{slideItem:function($,D){if($.target.value>D||$.target.value<0)alert("該編號卡片資料沒有找到!!");else{let P=$.target.value;te.value.data.slideTo(P-1)}}},data(){}},ql=Object.assign(Ul,{setup($){let D=[],P=[],J=k(1),t=k([]),h=k([]),r=k([]),p=k(1),C="",S="",N=k(null);const E=se("frontpath");if(E!==""){var B=window.location.href;B.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}T.post("http://localhost:5000/card/get",{get:J.value}).then(u=>{console.log(u.data),D=u.data.card,P=u.data.func,h.value=JSON.parse(JSON.stringify(P)),r.value=JSON.parse(JSON.stringify(D)),K(1)});let m=k({});function U(u){t.value=t.value.filter((a,c)=>c!==u);let l=r.value[p.value-1].tag;r.value[p.value-1].tag=l.filter((a,c)=>c!==u),console.log(r.value[p.value-1])}function L(){var u=parseInt(document.getElementById("tagSelect").value),l={};h.value.forEach(a=>{let c=a.data.find(x=>x.id===u);c!==void 0&&(l=c)}),!(t.value.includes(l)||u===0)&&(console.log(l),t.value.push(l),console.log(t.value),t.value=t.value.sort((a,c)=>a.id-c.id),r.value[p.value-1].tag.push(u),r.value[p.value-1].tag=r.value[p.value-1].tag.sort((a,c)=>a-c),console.log(D[p.value-1].tag),console.log(r.value[p.value-1].tag))}function A(){let u=r.value[p.value-1].keyword;u===void 0&&(u=[]),u.push(S),console.log(u),r.value[p.value-1].keyword=u,console.log(r.value[p.value-1].keyword),S=""}function M(u){let l=r.value[p.value-1].keyword;l=l.filter((a,c)=>c!==u),r.value[p.value-1].keyword=l,console.log(r.value[p.value-1].keyword)}function O(){if(confirm("將會儲存你所做的所有更改，如果確定覆蓋則按確定"))try{console.log(r.value),console.log(D);let u={getId:J.value,newData:r.value};console.log(u),T.post("http://localhost:5000/card/edit",u).then(l=>{console.log(l),alert(l.data),D=JSON.parse(JSON.stringify(r.value))})}catch(u){console.log(u)}}function K(u){p.value=u,m.value=r.value.find(l=>l.id===p.value),t.value=[],m.value.tag.forEach(l=>{P.forEach(a=>{let c=a.data.find(x=>x.id===l);c!==void 0&&t.value.push(c)})})}function q(u){if(C=u.target.value,console.log(C),C===""){h.value=P;return}let l=[];P.forEach(a=>{let c=[];if(a.data.forEach(x=>{x.name.includes(C)&&c.push(x)}),c.length!==0){console.log(c);let x=a;x.data=c,l.push(x)}}),l.length!==0?h.value=l:h.value=[]}function F(u){S=u.target.value,console.log(S)}function G(){let u=JSON.parse(JSON.stringify(D.find(l=>l.id===p.value)));t.value=[],u.tag.forEach(l=>{P.forEach(a=>{let c=a.data.find(x=>x.id===l);c!==void 0&&t.value.push(c)})}),m.value=u,r.value[p.value-1]=u}function V(u){u.target.parentElement.querySelector("input").classList.remove("hidden"),u.target.classList.add("hidden")}function f(u,l,a=void 0){if(console.log(u.key),u.key==="Enter"){switch(l){case"instant":r.value[p.value-1].instantEffect[a]=u.target.value;break;case"round":r.value[p.value-1].roundEffect[a]=u.target.value;break;case"combo":r.value[p.value-1].comboEffect[a]=u.target.value;break}console.log(r.value[p.value-1]),u.target.parentElement.querySelector("span").classList.remove("hidden"),u.target.classList.add("hidden");return}if(u.key,u.key==="Delete")switch(l){case"instant":break;case"round":r.value[p.value-1].roundEffect=r.value[p.value-1].roundEffect.filter((c,x)=>x!==a);break;case"combo":r.value[p.value-1].comboEffect=r.value[p.value-1].comboEffect.filter((c,x)=>x!==a);break}}function o(u){let l=r.value[p.value-1];switch(u){case"round":l.roundEffect.push("回合效果");break;case"instant":l.instantEffect.push("即時效果");break;case"combo":l.comboEffect.push("連動效果");break}}function n(u){let l=r.value[p.value-1];switch(u){case"round":l.roundEffect=l.roundEffect.filter((a,c)=>c!==l.roundEffect.length-1);break;case"instant":l.instantEffect=l.instantEffect.filter((a,c)=>c!==l.instantEffect.length-1);break;case"combo":l.comboEffect=l.comboEffect.filter((a,c)=>c!==l.comboEffect.length-1);break}}function v(){document.getElementById("overlay").style.display="block",N.value.setFunc(h.value)}function I(){document.getElementById("overlay").style.display="none"}return ne("close",I),(u,l)=>(i(),d("div",Ot,[e("div",Vt,[e("div",Jt,[e("div",Kt,[e("span",Ut,_(s(m).name),1),e("img",{src:s(E)+s(m).fullimage,alt:"55555",class:"max-h-[500px]"},null,8,qt)]),e("div",Gt,[e("div",null,[e("div",Wt,[Rt,e("button",{class:"addBtn ml-5",onClick:l[0]||(l[0]=a=>o("instant"))},"新增"),s(m).instantEffect.length>1?(i(),d("button",{key:0,class:"addBtn ml-5",onClick:l[1]||(l[1]=a=>n("instant"))},"刪除")):g("",!0)]),(i(!0),d(w,null,b(s(m).instantEffect,(a,c)=>(i(),d("div",Ht,[e("span",{class:"text-white font-bold",onDblclick:V},_(a),33),e("input",{type:"text",value:a,class:"hidden bg-gray-600 text-white",onKeydown:x=>f(x,"instant",c)},null,40,zt)]))),256))]),e("div",null,[e("div",Qt,[Xt,e("button",{class:"addBtn ml-5",onClick:l[2]||(l[2]=a=>o("round"))},"新增"),s(m).roundEffect.length>1?(i(),d("button",{key:0,class:"addBtn ml-5",onClick:l[3]||(l[3]=a=>n("round"))},"刪除")):g("",!0)]),(i(!0),d(w,null,b(s(m).roundEffect,(a,c)=>(i(),d("div",Yt,[e("span",{class:"text-white font-bold",onDblclick:V},_(a),33),e("input",{type:"text",value:a,class:"hidden bg-gray-600 text-white",onKeydown:x=>f(x,"round",c)},null,40,Zt)]))),256))]),e("div",null,[e("div",el,[tl,e("button",{class:"addBtn ml-5",onClick:l[4]||(l[4]=a=>o("combo"))},"新增"),s(m).comboEffect.length>1?(i(),d("button",{key:0,class:"addBtn ml-5",onClick:l[5]||(l[5]=a=>n("combo"))},"新增")):g("",!0)]),(i(!0),d(w,null,b(s(m).comboEffect,(a,c)=>(i(),d("div",ll,[e("span",{class:"text-white font-bold",onDblclick:V},_(a),33),e("input",{type:"text",value:a,class:"hidden bg-gray-600 text-white",onKeydown:x=>f(x,"combo",c)},null,40,sl)]))),256))])])]),e("div",nl,[e("div",al,[ol,e("div",il,[e("input",{type:"text",value:s(C),placeholder:"技能關鍵字",onInput:l[6]||(l[6]=a=>q(a)),class:"colorSelect"},null,40,dl)]),s(h).length!==0?(i(),d("div",ul,[e("select",cl,[rl,(i(!0),d(w,null,b(s(h),a=>(i(),d("optgroup",{label:a.typeName},[(i(!0),d(w,null,b(a.data,c=>(i(),d("option",{value:c.id,class:"bg-amber-900"},_(c.name),9,fl))),256))],8,pl))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:l[7]||(l[7]=a=>L())},"新增")])):(i(),d("div",vl,xl))]),e("div",_l,[e("div",gl,[e("table",null,[e("tbody",null,[(i(!0),d(w,null,b(s(t),(a,c)=>(i(),d("tr",null,[e("td",hl,[e("span",wl,_(a.id),1)]),e("td",bl,[e("span",yl,_(a.name),1)]),e("td",kl,[e("span",$l,[e("button",{class:"removeBtn",id:"btns"+c,onClick:x=>U(c)},"移除",8,Cl)])])]))),256))])])])]),e("div",null,[El,e("div",null,[e("input",{type:"text",value:s(S),placeholder:"搜尋關鍵字",onInput:l[8]||(l[8]=a=>F(a)),class:"colorSelect"},null,40,Il),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:l[9]||(l[9]=a=>A())},"新增")]),s(m).keyword!==void 0?(i(),d("div",Bl,[e("table",null,[e("tbody",null,[(i(!0),d(w,null,b(s(m).keyword,(a,c)=>(i(),d("tr",null,[e("td",Sl,[e("span",null,_(a),1)]),e("td",null,[e("button",{class:"removeBtn",id:"btns"+c,onClick:x=>M(c)},"移除",8,Nl)])]))),256))])])])):g("",!0)]),e("div",Dl,[e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:l[10]||(l[10]=a=>O())},"儲存"),e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:l[11]||(l[11]=a=>G())},"還原")])])]),e("div",Pl,[e("div",jl,[Fl,e("div",Tl,[e("input",{type:"number",class:"w-[100px] rounded-md",onChange:l[12]||(l[12]=a=>u.slideItem(a,s(r).length))},null,32),e("button",{class:"addBtn ml-3 px-3",onClick:v},"添加卡片")])]),H(s(Z),{"wrap-around":!0,"items-to-show":5,ref_key:"cardSlide",ref:te},{default:z(()=>[(i(!0),d(w,null,b(s(r),(a,c)=>(i(),ae(s(ee),{key:c},{default:z(()=>[e("div",{class:"flex-col [&>span]:block cursor-pointer",onClick:x=>K(a.id)},[e("img",{src:s(E)+a.image,width:"160",alt:"not found"},null,8,Al),a.rarity===1?(i(),d("span",Ml,_(a.id),1)):g("",!0),a.rarity===2?(i(),d("span",Ol,_(a.id),1)):g("",!0),a.rarity===3?(i(),d("span",Vl,_(a.id),1)):g("",!0)],8,Ll)]),_:2},1024))),128))]),_:1},512)]),e("div",Jl,[e("div",Kl,[e("div",{className:"close",onClick:I},"✖"),H(Mt,{ref_key:"popup",ref:N,max:s(r).length+1,func:s(h),onClose:I},null,8,["max","func"])])])]))}}),Hl=Q(ql,[["__scopeId","data-v-a622a3f7"]]);export{Hl as default};
