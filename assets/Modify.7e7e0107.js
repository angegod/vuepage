import{_ as Y,j as B,o as n,c as o,b as J,w as X,d as l,a as e,F as $,f as k,t as v,m as g,n as R,C as Q,T as ie,p as Z,g as ee,i as te,D as de,E as ce,k as ue,x as le,G as re,v as pe}from"./index.1d604f45.js";import{a as U}from"./axios.1779699b.js";import{C as se,S as ne,P as fe,N as me}from"./carousel.f0fa757b.js";const S=E=>(Z("data-v-6ae4c7df"),E=E(),ee(),E),ve={class:"h-[500px] pl-5"},_e={class:"flex flex-row min-w-[500px]",key:"step1"},xe={class:"pl-2 pr-2 w-1/2"},he={class:"flex flex-col"},ge=S(()=>e("span",{class:"text-lg"},"卡片名稱:",-1)),we={class:"mt-3 flex flex-col"},be=S(()=>e("span",{class:"text-lg"},"卡片編號",-1)),ye=["value"],$e={class:"flex flex-col mt-5"},ke=S(()=>e("span",{class:"text-lg"},"稀有度:",-1)),Ee=["value"],Ce={class:"flex flex-col mt-5"},Ie=S(()=>e("span",{class:"text-lg"},"縮圖:",-1)),Be=["src"],Se={class:"pl-2 pr-2 w-1/2 flex flex-col justify-between"},Pe={class:"flex flex-col"},De=S(()=>e("span",{class:"text-lg"},"全身圖:",-1)),Ne=["src"],Fe={key:"step2",class:"flex flex-row min-w-[500px]"},je={class:"w-1/2 pl-2 pr-2 flex flex-col"},Le={class:"flex flex-col mt-5"},Ke={class:"flex flex-row mb-1"},Me=S(()=>e("span",{class:"text-lg"},"即時效果:",-1)),Te=["onUpdate:modelValue"],Ae={class:"flex flex-col mt-5"},Oe={class:"flex flex-row mb-1"},Ue=S(()=>e("span",{class:"text-lg"},"回合效果:",-1)),Ve=["placeholder","onUpdate:modelValue"],Ge={class:"flex flex-col mt-5"},Je={class:"flex flex-row mb-1"},qe=S(()=>e("span",{class:"text-lg"},"連動效果:",-1)),Re=["placeholder","onUpdate:modelValue"],We={class:"w-1/2 pl-2 pr-2 flex flex-col justify-between min-h-[400px]"},He={class:"flex flex-col"},ze=S(()=>e("div",null,[e("span",null,"技能標籤")],-1)),Qe={class:"colorSelect w-[150px]",id:"tagSelect2"},Xe=S(()=>e("option",{value:0},v("請選擇"),-1)),Ye=["label"],Ze=["value"],et={class:"flex flex-col"},tt={class:"flex flex-row min-w-[500px]",key:"step3"},lt={class:"px-2 w-1/2"},st={class:"flex flex-col"},nt=S(()=>e("span",null,"回合累積能量:",-1)),at={class:"flex flex-col"},ot=S(()=>e("span",null,"總儲存能量:",-1)),it={class:"flex flex-col"},dt=S(()=>e("span",null,"回合消耗能量:",-1)),ct={class:"flex flex-col"},ut=S(()=>e("span",null,"進場能量:",-1)),rt={class:"w-1/2"},pt={class:"flex flex-col"},ft=S(()=>e("span",null,"卡片關鍵字:",-1)),mt={class:"my-2"},vt=S(()=>e("span",null,"盤面圖:",-1)),_t={class:"spread"},xt=["src"],ht=S(()=>e("div",{class:"my-2"},[e("span",null,"圖片標示位置:"),e("input",{type:"number",class:"selfInput",id:"spreadIndex",min:1})],-1)),gt={class:"min-w-[500px]",key:"step4"},wt={class:"w-5/6 mx-auto mt-5 flex flex-row flex-wrap justify-between mb-5 max-[450px]:justify-center"},bt={class:"w-2/5 min-w-[150px] max-[450px]:w-[100%]"},yt={class:"[&>span]:text-[20px] mb-3 text-center"},$t={key:0,class:"w-[100%] text-center text-amber-900 font-bold"},kt={key:1,class:"w-[100%] text-center text-slate-500 font-bold"},Et={key:2,class:"w-[100%] text-center text-yellow-600 font-bold"},Ct={key:0,class:"imgbox1 max-w-[150px] mx-auto"},It=["src","alt"],Bt={key:1,class:"imgbox2 max-w-[150px] mx-auto"},St=["src","alt"],Pt={key:2,class:"imgbox3 max-w-[150px] mx-auto"},Dt=["src","alt"],Nt={class:"w-1/2 flex flex-col min-w-[150px] ml-2 max-[450px]:ml-0 max-[450px]:w-[100%]"},Ft={class:"flex flex-col mt-5 min-h-[10vh]"},jt=S(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"即時效果")])],-1)),Lt={class:"flex flex-col"},Kt={class:"text-black"},Mt={class:"flex flex-col mt-5 min-h-[20vh]"},Tt=S(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"回合效果")])],-1)),At={class:"flex flex-col"},Ot={class:"text-black"},Ut={class:"flex flex-col mt-5 min-h-[10vh]"},Vt=S(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"連動效果")])],-1)),Gt={class:"flex flex-col"},Jt={class:"text-black"},qt={__name:"AddCard",props:["max","func"],emits:["close"],setup(E,{expose:D,emit:y}){let N=E,a=B({}),C=B(1),p=B(null),m=B(null),P=B(null),I=B([]),r=B([]),w=B([""]),b=B([""]),_=B([""]);const L=y;console.log(I.value);function T(f){document.getElementById(f).value=null,document.getElementById(f).click()}async function A(f){let d=document.getElementById(f).files[0];const i=new FileReader;i.onload=h=>{f==="iconInput"?p.value={file:h.target.result,name:d.name,realFile:d}:f==="imageInput"?m.value={file:h.target.result,name:d.name,realFile:d}:f==="spreadInput"&&(P.value={file:h.target.result,name:d.name,realFile:d}),console.log(P.value)},await i.readAsDataURL(d)}function V(f){switch(f){case"combo":b.value.push("");break;case"round":w.value.push("");break;case"instant":_.value.push("");break}}function G(f){switch(f){case"combo":b.value.length>1&&(b.value=b.value.filter((d,i)=>i!==b.value.length-1)),console.log(b.value.length);break;case"round":w.value.length>1&&(w.value=w.value.filter((d,i)=>i!==w.value.length-1)),console.log(w.value.length);break;case"instant":_.value.length>1&&(_.value=_.value.filter((d,i)=>i!==_.value.length-1)),console.log(_.value.length);break}}function H(){console.log(I.value);var f=parseInt(document.getElementById("tagSelect2").value),d={};I.value.forEach(i=>{let h=i.data.find(F=>F.id===f);h!==void 0&&(d=h)}),console.log(f),!(r.value.includes(d)||f===0)&&(r.value.push(d),console.log(r.value),r.value=r.value.sort((i,h)=>i.id-h.id),a.value.tag.push(f),a.value.tag=a.value.tag.sort((i,h)=>i-h),console.log(r.value))}function q(f){f.key==="Enter"&&(alert("關鍵字輸入!!"),a.value.keyword===void 0&&(a.value.keyword=[]),a.value.keyword.push(f.target.value),f.target.value="")}async function O(){if(console.log(C.value),C.value===3&&(a.value.PointMax===void 0||a.value.PointConsume===void 0||a.value.PointGet===void 0||a.value.PointEnter===void 0)){alert("請輸入對應資料!!");return}if(C.value+=1,C.value===4&&(console.log(a.value),z()),C.value===5){let f=new FormData;f.append("image",p.value.realFile),f.append("oldName",p.value.name.split(".")[0]),f.append("newName",`1_${a.value.id}`),console.log(f.getAll("image"));const d=await U.post("http://localhost:5000/card/icon",f,{headers:{"Content-Type":"multipart/form-data"}});console.log(d.data);let i=new FormData;i.append("image",m.value.realFile),i.append("oldName",m.value.name.split(".")[0]),i.append("newName",`1_${a.value.id}`),console.log(m.value);const h=await U.post("http://localhost:5000/card/image",i,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(h.data),P.value!==null){console.log("開始上傳盤面");let M=new FormData;M.append("image",P.value.realFile),M.append("oldName",P.value.name.split(".")[0]),M.append("newName",`1_${a.value.id}`),console.log(P.value);const u=await U.post("http://localhost:5000/card/spread",M,{headers:{"Content-Type":"multipart/form-data"}});console.log(u.data)}let F={series:1,card:a.value};await U.post("http://localhost:5000/card/add",F).then(M=>{alert("新卡片已添加"),L("close","")})}}function z(){a.value.id===void 0&&(a.value.id=N.max),a.value.roundEffect=w.value,a.value.instantEffect=_.value,a.value.comboEffect=b.value,a.value.image=`/images/card/icon/1_${a.value.id}.png`,a.value.fullimage=`/images/card/image/1_${a.value.id}.png`,a.value.spread={id:parseInt(document.getElementById("spreadIndex").value),image:`/images/card/image/${a.value.id}.png`};let f=[];r.value.forEach(i=>{f.push(parseInt(i.id))}),a.value.tag=f;let d={id:a.value.id,name:a.value.name,rarity:a.value.rarity,image:a.value.image,instantEffect:a.value.instantEffect,roundEffect:a.value.roundEffect,comboEffect:a.value.comboEffect,PointMax:parseInt(a.value.PointMax),PointEnter:parseInt(a.value.PointEnter),PointConsume:parseInt(a.value.PointConsume),PointGet:parseInt(a.value.PointGet),tag:a.value.tag,fullimage:a.value.fullimage,keyword:a.value.keyword,spread:a.value.spread};a.value=d,console.log(a.value)}function K(f){I.value=f}return D({setFunc:K}),(f,d)=>(n(),o("div",ve,[J(ie,{name:"step",tag:"div",class:"flex flex-row"},{default:X(()=>[l(C)===1?(n(),o("div",_e,[e("div",xe,[e("div",he,[ge,e("input",{type:"text",class:"selfInput",placeholder:"卡片名子",onChange:d[0]||(d[0]=i=>l(a).name=i.target.value)},null,32)]),e("div",we,[be,e("input",{type:"number",class:"selfInput",value:E.max,onChange:d[1]||(d[1]=i=>l(a).id=parseInt(i.target.value))},null,40,ye)]),e("div",$e,[ke,(n(),o($,null,k(3,i=>e("div",null,[e("input",{type:"radio",name:"rarity",value:i,onChange:d[2]||(d[2]=h=>l(a).rarity=parseInt(h.target.value))},null,40,Ee),e("span",null,v(i+"星"),1)])),64))]),e("div",Ce,[Ie,e("button",{onClick:d[3]||(d[3]=i=>T("iconInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"iconInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:d[4]||(d[4]=()=>A("iconInput"))},null,32),l(p)!==null?(n(),o("img",{key:0,src:l(p).file,alt:"縮圖",class:"max-w-[100px] max-h-[100px]"},null,8,Be)):g("",!0)])]),e("div",Se,[e("div",Pe,[De,e("button",{onClick:d[5]||(d[5]=i=>T("imageInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"imageInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:d[6]||(d[6]=()=>A("imageInput"))},null,32),l(m)!==null?(n(),o("img",{key:0,src:l(m).file,alt:"縮圖",class:"max-w-[200px] max-h-[300px]"},null,8,Ne)):g("",!0)]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:O},"下一步")])])])):g("",!0),l(C)===2?(n(),o("div",Fe,[e("div",je,[e("div",Le,[e("div",Ke,[Me,e("button",{class:"addBtn ml-3 px-3",onClick:d[7]||(d[7]=i=>V("instant"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:d[8]||(d[8]=i=>G("instant"))},"刪除")]),(n(!0),o($,null,k(l(_),(i,h)=>R((n(),o("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:"即使效果","onUpdate:modelValue":F=>l(_)[h]=F},null,8,Te)),[[Q,l(_)[h]]])),256))]),e("div",Ae,[e("div",Oe,[Ue,e("button",{class:"addBtn ml-3 px-3",onClick:d[9]||(d[9]=i=>V("round"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:d[10]||(d[10]=i=>G("round"))},"刪除")]),(n(!0),o($,null,k(l(w),(i,h)=>R((n(),o("textarea",{class:"selfInput mt-1 mb-1 whitespace-pre-wrap",placeholder:`回合效果${h+1}`,"onUpdate:modelValue":F=>l(w)[h]=F},null,8,Ve)),[[Q,l(w)[h]]])),256))]),e("div",Ge,[e("div",Je,[qe,e("button",{class:"addBtn ml-3 px-3",onClick:d[11]||(d[11]=i=>V("combo"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:d[12]||(d[12]=i=>G("combo"))},"刪除")]),(n(!0),o($,null,k(l(b),(i,h)=>R((n(),o("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:`連動效果${h+1}`,"onUpdate:modelValue":F=>l(b)[h]=F},null,8,Re)),[[Q,l(b)[h]]])),256))])]),e("div",We,[e("div",He,[ze,e("div",null,[e("select",Qe,[Xe,(n(!0),o($,null,k(l(I),i=>(n(),o("optgroup",{label:i.typeName},[(n(!0),o($,null,k(i.data,h=>(n(),o("option",{value:h.id,class:"bg-amber-900"},v(h.name),9,Ze))),256))],8,Ye))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:d[13]||(d[13]=i=>H())},"新增")]),e("div",et,[(n(!0),o($,null,k(l(r),i=>(n(),o("span",null,v(i.id+" "+i.name),1))),256))])]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:O},"下一步")])])])):g("",!0),l(C)===3?(n(),o("div",tt,[e("div",lt,[e("div",st,[nt,e("input",{type:"number",id:"pointGet",class:"selfInput",min:1,max:8,required:"",onChange:d[14]||(d[14]=i=>l(a).PointGet=i.target.value)},null,32)]),e("div",at,[ot,e("input",{type:"number",id:"pointMax",class:"selfInput",min:1,max:8,required:"",onChange:d[15]||(d[15]=i=>l(a).PointMax=i.target.value)},null,32)]),e("div",it,[dt,e("input",{type:"number",id:"pointConsume",class:"selfInput",min:1,max:8,required:"",onChange:d[16]||(d[16]=i=>l(a).PointConsume=i.target.value)},null,32)]),e("div",ct,[ut,e("input",{type:"number",id:"pointEnter",class:"selfInput",min:1,max:8,required:"",onChange:d[17]||(d[17]=i=>l(a).PointEnter=i.target.value)},null,32)])]),e("div",rt,[e("div",pt,[ft,e("input",{type:"text",class:"selfInput",onKeydown:q},null,32),(n(!0),o($,null,k(l(a).keyword,i=>(n(),o("span",null,v(i),1))),256))]),e("div",mt,[vt,e("button",{onClick:d[18]||(d[18]=i=>T("spreadInput")),class:"max-w-[100px] addBtn px-2"},"上傳"),e("input",{type:"file",id:"spreadInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:d[19]||(d[19]=()=>A("spreadInput"))},null,32),e("div",_t,[l(P)!==null?(n(),o("img",{key:0,src:l(P).file,alt:"盤面圖",class:"w-[240px]"},null,8,xt)):g("",!0)])]),ht,e("div",{class:"mt-2"},[e("button",{class:"addBtn pl-2 pr-2",onClick:O},"下一步")])])])):g("",!0),l(C)===4?(n(),o("div",gt,[e("div",wt,[e("div",bt,[e("div",yt,[l(a).rarity===1?(n(),o("span",$t,v(l(a).name),1)):g("",!0),l(a).rarity===2?(n(),o("span",kt,v(l(a).name),1)):g("",!0),l(a).rarity===3?(n(),o("span",Et,v(l(a).name),1)):g("",!0)]),l(a).rarity===1?(n(),o("div",Ct,[e("img",{src:l(m).file,alt:l(a).name,class:"h-[40vh] min-w-[150px]"},null,8,It)])):g("",!0),l(a).rarity===2?(n(),o("div",Bt,[e("img",{src:l(m).file,alt:l(a).name,class:"h-[40vh] min-w-[150px]"},null,8,St)])):g("",!0),l(a).rarity===3?(n(),o("div",Pt,[e("img",{src:l(m).file,alt:l(a).name,class:"h-[40vh] min-w-[150px]"},null,8,Dt)])):g("",!0)]),e("div",Nt,[e("div",Ft,[jt,e("div",Lt,[(n(!0),o($,null,k(l(a).instantEffect,i=>(n(),o("span",Kt,"•"+v(i),1))),256))])]),e("div",Mt,[Tt,e("div",At,[(n(!0),o($,null,k(l(a).roundEffect,i=>(n(),o("span",Ot,"•"+v(i),1))),256))])]),e("div",Ut,[Vt,e("div",Gt,[(n(!0),o($,null,k(l(a).comboEffect,i=>(n(),o("span",Jt,"•"+v(i),1))),256))])])])]),e("div",{class:"w-5/6 mt-5 mx-auto"},[e("button",{class:"addBtn min-w-[100px] ml-2",onClick:O},"儲存")])])):g("",!0)]),_:1})]))}},Rt=Y(qt,[["__scopeId","data-v-6ae4c7df"]]);const W=E=>(Z("data-v-e1489e1b"),E=E(),ee(),E),Wt=W(()=>e("div",{class:"flex-col"},[e("span",{class:"text-amber-800 text-[18px]"},"基本訊息")],-1)),Ht={class:"mt-2"},zt={class:"my-2 flex flex-col"},Qt=W(()=>e("span",{class:"text-amber-600 text-[16px]"},"名稱",-1)),Xt=["value"],Yt={class:"my-2"},Zt=W(()=>e("span",{class:"text-amber-600 text-[16px]"},"稀有度",-1)),el=["onClick"],tl={key:0},ll=["src","alt"],sl=["src"],nl={key:1,class:"opacity-60"},al=["src","alt"],ol={class:"my-2"},il=W(()=>e("span",{class:"text-amber-600 text-[16px]"},"FP能量",-1)),dl={class:"flex flex-row"},cl={class:"text-white w-[100px]"},ul={class:"w-[100px]"},rl=["value","onChange"],pl={__name:"EditBasic",props:["card"],emits:["update:card"],setup(E,{emit:D}){let y=E;const N=D,a=te("frontpath");if(a!==""){var C=window.location.href;C.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}let p=de(()=>[{name:"進場FP",mode:"PointEnter",value:y.card.PointEnter},{name:"補充FP",mode:"PointGet",value:y.card.PointGet},{name:"消耗FP",mode:"PointConsume",value:y.card.PointConsume},{name:"最大FP",mode:"PointMax",value:y.card.PointMax}]);function m(w){N("update:card",{...y.card,rarity:w})}function P(){document.getElementById("nameSpan").style.display="none",document.getElementById("nameInput").style.display="block"}function I(w){console.log(w.key),w.key==="Enter"&&(console.log("55555"),y.card.name=w.target.value,document.getElementById("nameSpan").style.display="block",document.getElementById("nameInput").style.display="none")}const r=(w,b)=>{const _=parseInt(w.target.value);p.value.find(L=>L.mode===b).value=_,console.log(p.value),N("update:card",{...y.card,[b]:_})};return(w,b)=>(n(),o($,null,[Wt,e("div",Ht,[e("div",zt,[Qt,e("span",{class:"text-white",onDblclick:b[0]||(b[0]=_=>P()),id:"nameSpan"},v(l(y).card.name),33),e("input",{type:"text",class:"w-[150px] bg-gray-500 text-white",id:"nameInput",style:{display:"none"},value:l(y).card.name,onKeydown:b[1]||(b[1]=_=>I(_))},null,40,Xt)]),e("div",Yt,[Zt,e("div",null,[(n(),o($,null,k(3,_=>e("button",{class:"max-w-[70px] mr-2 relative inline-block rarity",onClick:L=>m(_)},[l(y).card.rarity===_?(n(),o("div",tl,[e("img",{src:l(a)+`/images/rarity${_}.png`,alt:`rarity${_}`},null,8,ll),e("img",{src:l(a)+"/images/checked.svg",class:"text-white top-[0px] right-0 absolute"},null,8,sl)])):(n(),o("div",nl,[e("img",{src:l(a)+`/images/rarity${_}.png`,alt:`rarity${_}`},null,8,al)]))],8,el)),64))])]),e("div",ol,[il,(n(!0),o($,null,k(l(p),_=>(n(),o("div",dl,[e("span",cl,v(_.name),1),e("div",ul,[e("input",{type:"number",class:"outline-none w-[40px] bg-inherit text-white border-b-2 text-center",value:_.value,onChange:L=>r(L,_.mode)},null,40,rl)])]))),256))])])],64))}},fl=Y(pl,[["__scopeId","data-v-e1489e1b"]]),ml=e("span",{class:"standwardLabel"},"關鍵字管理",-1),vl=["value"],_l={key:0,class:"overflow-y-scroll hiddenScrollbar"},xl={class:"flex flex-row my-2"},hl={key:0,class:"text-white min-w-[200px]"},gl={key:1},wl=["id","onClick"],bl={__name:"EditKeyword",props:["card"],emits:["update:card"],setup(E,{emit:D}){let y=E,N="";if(te("frontpath")!==""){var C=window.location.href;C.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}function p(I){N=I.target.value}function m(){let I=y.card.keyword;I==null&&(I=[]),I.push(N),console.log(I),N=""}function P(I){let r=y.card.keyword;r=r.filter((w,b)=>b!==I),y.card.keyword=r}return(I,r)=>(n(),o($,null,[ml,e("div",null,[e("input",{type:"text",value:l(N),placeholder:"搜尋關鍵字",onInput:r[0]||(r[0]=w=>p(w)),class:"colorSelect"},null,40,vl),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:r[1]||(r[1]=w=>m())},"新增")]),l(y).card.keyword!==void 0&&l(y).card.keyword.length!==0?(n(),o("div",_l,[(n(!0),o($,null,k(l(y).card.keyword,(w,b)=>(n(),o("div",xl,[w!==""?(n(),o("div",hl,[e("span",null,v(w),1)])):g("",!0),w!==""?(n(),o("div",gl,[e("button",{class:"removeBtn",id:"btns"+b,onClick:_=>P(b)},"移除",8,wl)])):g("",!0)]))),256))])):g("",!0)],64))}};const j=E=>(Z("data-v-59bffbe0"),E=E(),ee(),E),yl={class:"main"},$l={class:"w-4/5 mx-auto mb-2"},kl=j(()=>e("span",{class:"text-white text-xl"},"系列",-1)),El={class:"flex flex-row"},Cl={class:"w-4/5 mx-auto flex flex-row justify-evenly"},Il={key:0,class:"w-1/2 min-h-[500px] flex flex-row"},Bl={class:"CardImage w-1/2"},Sl={class:"text-white font-bold text-xl"},Pl=["src"],Dl={class:"Details flex flex-col w-1/2 mt-5 [&>div]:mb-5"},Nl={class:"flex flex-row"},Fl=j(()=>e("span",{class:"standwardLabel"},"即時效果",-1)),jl={class:"mb-3 flex flex-col"},Ll=["onKeydown"],Kl={class:"flex flex-row"},Ml=j(()=>e("span",{class:"standwardLabel"},"回合效果",-1)),Tl={class:"mb-3 flex flex-col"},Al=["onKeydown"],Ol={class:"flex flex-row"},Ul=j(()=>e("span",{class:"standwardLabel"},"連動效果",-1)),Vl={class:"mb-3 flex flex-col"},Gl=["onKeydown"],Jl=j(()=>e("span",{class:"text-red-700 text-lg"},"選擇要編輯的項目:",-1)),ql={class:"flex flex-col"},Rl=["onClick"],Wl=["src"],Hl={class:"text-white text-md"},zl={key:1,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},Ql={key:2,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},Xl={class:"flex-col"},Yl=j(()=>e("span",{class:"standwardLabel"},"自身技能標籤",-1)),Zl={class:"mb-3"},es=["value"],ts={key:0},ls={class:"colorSelect w-[150px]",id:"tagSelect"},ss=j(()=>e("option",{value:0},v("請選擇"),-1)),ns=["label"],as=["value"],os={key:1},is=j(()=>e("span",{class:"text-yellow-500 font-bold text-lg"},"沒有找到匹配技能標籤",-1)),ds=[is],cs={class:"mb-2 flex-col"},us={class:"overflow-y-scroll hiddenScrollbar"},rs={class:"flex flex-col"},ps={class:"flex flex-row my-1"},fs={class:"w-1/5"},ms={class:"text-white"},vs={class:"w-2/5"},_s={class:"text-white"},xs={class:"w-2/5"},hs=["id","onClick"],gs={key:3,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},ws={key:4,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},bs=j(()=>e("div",null,[e("span",{class:"text-amber-800 text-[18px]"},"效果敘述")],-1)),ys={class:"my-5"},$s={class:"flex flex-row"},ks=j(()=>e("span",{class:"standwardSubLabel"},"即時效果",-1)),Es={class:"mb-3 flex flex-col"},Cs=["onKeydown"],Is={class:"my-5"},Bs={class:"flex flex-row my-1"},Ss=j(()=>e("span",{class:"standwardSubLabel"},"回合效果",-1)),Ps={class:"mb-3 flex flex-col"},Ds=["onKeydown"],Ns={class:"my-5"},Fs={class:"flex flex-row my-1"},js=j(()=>e("span",{class:"standwardSubLabel"},"連動效果",-1)),Ls={class:"mb-3 flex flex-col"},Ks=["onKeydown"],Ms={class:"w-3/5 mx-auto my-3"},Ts={class:"slide w-4/5 mx-auto mt-3 pt-3"},As={class:"ml-5 mb-3"},Os=j(()=>e("span",{class:"text-white"},"請輸入要卡片編號:",-1)),Us={class:"flex flex-row"},Vs=["onClick"],Gs=["src"],Js={key:0,class:"w-[100%] text-center bg-amber-900 text-white rounded-md"},qs={key:1,class:"w-[100%] text-center bg-slate-500 text-white rounded-md"},Rs={key:2,class:"w-[100%] text-center bg-yellow-600 text-white rounded-md"},Ws={className:"overlay",id:"overlay"},Hs={class:"popup max-[500px]:w-[80%] max-[500px]:min-w-[200px]"};let ae=B(null);const zs={name:"App",components:{Carousel:se,Slide:ne,Pagination:fe,Navigation:me},methods:{slideItem:function(E,D){if(E.target.value>D||E.target.value<0)alert("該編號卡片資料沒有找到!!");else{let y=E.target.value;ae.value.data.slideTo(y-1)}}},data(){}},Qs=Object.assign(zs,{setup(E){let D=[],y=[],N=B(1),a=B([]),C=B([]),p=B([]),m=B(1),P="",I=B(null),r=B({}),w=B([{name:"基本資訊",mode:"edit_basic"},{name:"效果敘述",mode:"edit_description"},{name:"技能標籤",mode:"edit_tag"},{name:"關鍵字",mode:"edit_keyword"},{name:"圖片管理",mode:"edit_img"}]),b=B("edit_basic");const _=te("frontpath");if(_!==""){var L=window.location.href;L.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}T();function T(){U.post("http://localhost:5000/card/get",{get:N.value}).then(u=>{if(console.log(u.data),D=u.data.card,y=u.data.func,u.data=="發生錯誤"){console.log("沒有發現相關資料");return}C.value=JSON.parse(JSON.stringify(y)),p.value=JSON.parse(JSON.stringify(D)),q(1)})}function A(u){let s=document.getElementById("series"+u);s.classList.contains("clicked")?s.classList.remove("clicked"):s.classList.add("clicked"),N.value=parseInt(u),T()}function V(u){a.value=a.value.filter((t,c)=>c!==u);let s=p.value.find(t=>t.id===parseInt(m.value)).tag;p.value.find(t=>t.id===parseInt(m.value)).tag=s.filter((t,c)=>c!==u),console.log(p.value.find(t=>t.id===parseInt(m.value)))}function G(){var u=parseInt(document.getElementById("tagSelect").value),s={};C.value.forEach(t=>{let c=t.data.find(x=>x.id===u);c!==void 0&&(s=c)}),!(a.value.includes(s)||u===0)&&(a.value.push(s),a.value=a.value.sort((t,c)=>t.id-c.id),p.value.find(t=>t.id===m.value).tag.push(u),p.value.find(t=>t.id===m.value).tag=p.value.find(t=>t.id===m.value).tag.sort((t,c)=>t-c),console.log(D.find(t=>t.id===m.value).tag),console.log(p.value.find(t=>t.id===m.value).tag))}function H(){if(confirm("將會儲存你所做的所有更改，如果確定覆蓋則按確定"))try{console.log(p.value),console.log(D);let u={getId:N.value,newData:p.value};console.log(u),U.post("http://localhost:5000/card/edit",u).then(s=>{console.log(s),alert(s.data),D=JSON.parse(JSON.stringify(p.value))})}catch(u){console.log(u)}}function q(u){m.value=u,r.value=p.value.find(s=>s.id===m.value),a.value=[],r.value.tag.forEach(s=>{y.forEach(t=>{let c=t.data.find(x=>x.id===s);c!==void 0&&a.value.push(c)})})}function O(u){if(P=u.target.value,console.log(P),P===""){C.value=y;return}let s=[];y.forEach(t=>{let c=[];if(t.data.forEach(x=>{x.name.includes(P)&&c.push(x)}),c.length!==0){console.log(c);let x=t;x.data=c,s.push(x)}}),s.length!==0?C.value=s:C.value=[]}function z(){let u=D.find(t=>t.id===m.value);if(u==null)return;let s=JSON.parse(JSON.stringify(u));a.value=[],s.tag.forEach(t=>{y.forEach(c=>{let x=c.data.find(oe=>oe.id===t);x!==void 0&&a.value.push(x)})}),r.value=s,Object.assign(u,s)}function K(u){u.target.parentElement.querySelector("textarea").classList.remove("hidden"),u.target.classList.add("hidden")}function f(u,s,t=void 0){if(console.log(u.key),u.key==="Enter"){switch(s){case"instant":p.value[m.value-1].instantEffect[t]=u.target.value;break;case"round":p.value[m.value-1].roundEffect[t]=u.target.value;break;case"combo":p.value[m.value-1].comboEffect[t]=u.target.value;break}console.log(p.value.find(x=>x.id===m.value)),u.target.parentElement.querySelector("span").classList.remove("hidden"),u.target.classList.add("hidden");return}if(u.key,u.key==="Delete")switch(s){case"instant":break;case"round":p.value.find(c=>c.id===m.value).roundEffect=p.value.find(c=>c.id===m.value).roundEffect.filter((c,x)=>x!==t);break;case"combo":p.value.find(c=>c.id===m.value).comboEffect=p.value.find(c=>c.id===m.value).comboEffect.filter((c,x)=>x!==t);break}}function d(u){let s=p.value.find(t=>t.id===m.value);switch(u){case"round":s.roundEffect.push("回合效果");break;case"instant":s.instantEffect.push("即時效果");break;case"combo":s.comboEffect.push("連動效果");break}}function i(u){let s=p.value.find(t=>t.id===m.value);switch(u){case"round":if(s.roundEffect.length===1)break;s.roundEffect=s.roundEffect.filter((t,c)=>c!==s.roundEffect.length-1);break;case"instant":if(s.instantEffect.length===1)break;s.instantEffect=s.instantEffect.filter((t,c)=>c!==s.instantEffect.length-1);break;case"combo":if(s.comboEffect.length===1)break;s.comboEffect=s.comboEffect.filter((t,c)=>c!==s.comboEffect.length-1);break}}function h(){document.getElementById("overlay").style.display="block",I.value.setFunc(C.value)}function F(){document.getElementById("overlay").style.display="none"}function M(u){b.value=u}return ce(r,(u,s)=>{p.value[u.id-1]=u,console.log(p.value)},{deep:!0}),ue("close",F),(u,s)=>(n(),o("div",yl,[e("div",$l,[kl,e("div",El,[e("button",{class:"addBtn mr-5 w-[100px]",onClick:s[0]||(s[0]=t=>A(1)),id:"series1"},"晨曦塔"),e("button",{class:"addBtn mr-5 w-[100px]",onClick:s[1]||(s[1]=t=>A(2)),id:"series2"},"測試塔")])]),e("div",Cl,[l(r)!==void 0?(n(),o("div",Il,[e("div",Bl,[e("span",Sl,v(l(r).name),1),e("img",{src:l(_)+l(r).fullimage,alt:"全身圖",class:"max-h-[500px]"},null,8,Pl)]),R(e("div",Dl,[e("div",null,[e("div",Nl,[Fl,e("button",{class:"addBtn ml-5",onClick:s[2]||(s[2]=t=>d("instant"))},"新增"),l(r).instantEffect.length>1?(n(),o("button",{key:0,class:"addBtn ml-5",onClick:s[3]||(s[3]=t=>i("instant"))},"刪除")):g("",!0)]),(n(!0),o($,null,k(l(r).instantEffect,(t,c)=>(n(),o("div",jl,[e("span",{class:"text-white font-bold",onDblclick:K},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:x=>f(x,"instant",c)},v(t),41,Ll)]))),256))]),e("div",null,[e("div",Kl,[Ml,e("button",{class:"addBtn ml-5",onClick:s[4]||(s[4]=t=>d("round"))},"新增"),l(r).roundEffect.length>1?(n(),o("button",{key:0,class:"addBtn ml-5",onClick:s[5]||(s[5]=t=>i("round"))},"刪除")):g("",!0)]),(n(!0),o($,null,k(l(r).roundEffect,(t,c)=>(n(),o("div",Tl,[e("span",{class:"text-white font-bold",onDblclick:K},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:x=>f(x,"round",c)},v(t),41,Al)]))),256))]),e("div",null,[e("div",Ol,[Ul,e("button",{class:"addBtn ml-5",onClick:s[6]||(s[6]=t=>d("combo"))},"新增"),l(r).comboEffect.length>1?(n(),o("button",{key:0,class:"addBtn ml-5",onClick:s[7]||(s[7]=t=>i("combo"))},"刪除")):g("",!0)]),(n(!0),o($,null,k(l(r).comboEffect,(t,c)=>(n(),o("div",Vl,[e("span",{class:"text-white font-bold",onDblclick:K},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:x=>f(x,"combo",c)},v(t),41,Gl)]))),256))])],512),[[pe,!1]]),e("div",null,[Jl,e("div",ql,[(n(!0),o($,null,k(l(w),t=>(n(),o("div",{class:"my-2 flex flex-row cursor-pointer",onClick:c=>M(t.mode)},[e("img",{src:l(_)+"/images/arrow_right.png",width:"20",height:"20"},null,8,Wl),e("span",Hl,v(t.name),1)],8,Rl))),256))])])])):g("",!0),l(b)=="edit_basic"?(n(),o("div",zl,[J(fl,{card:l(r),"onUpdate:card":s[8]||(s[8]=t=>le(r)?r.value=t:r=t)},null,8,["card"])])):g("",!0),l(b)=="edit_tag"?(n(),o("div",Ql,[e("div",Xl,[Yl,e("div",Zl,[e("input",{type:"text",value:l(P),placeholder:"技能關鍵字",onInput:s[9]||(s[9]=t=>O(t)),class:"colorSelect"},null,40,es)]),l(C).length!==0?(n(),o("div",ts,[e("select",ls,[ss,(n(!0),o($,null,k(l(C),t=>(n(),o("optgroup",{label:t.typeName},[(n(!0),o($,null,k(t.data,c=>(n(),o("option",{value:c.id,class:"bg-amber-900"},v(c.name),9,as))),256))],8,ns))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:s[10]||(s[10]=t=>G())},"新增")])):(n(),o("div",os,ds))]),e("div",cs,[e("div",us,[e("div",rs,[(n(!0),o($,null,k(l(a),(t,c)=>(n(),o("div",ps,[e("div",fs,[e("span",ms,v(t.id),1)]),e("div",vs,[e("span",_s,v(t.name),1)]),e("div",xs,[e("button",{class:"removeBtn",id:"btns"+c,onClick:x=>V(c)},"移除",8,hs)])]))),256))])])])])):g("",!0),l(b)=="edit_keyword"?(n(),o("div",gs,[J(bl,{card:l(r),"onUpdate:card":s[11]||(s[11]=t=>le(r)?r.value=t:r=t)},null,8,["card"])])):g("",!0),l(b)=="edit_description"?(n(),o("div",ws,[bs,e("div",ys,[e("div",$s,[ks,e("button",{class:"addBtn ml-5",onClick:s[12]||(s[12]=t=>d("instant"))},"新增"),l(r).instantEffect.length>1?(n(),o("button",{key:0,class:"addBtn ml-5",onClick:s[13]||(s[13]=t=>i("instant"))},"刪除")):g("",!0)]),(n(!0),o($,null,k(l(r).instantEffect,(t,c)=>(n(),o("div",Es,[e("span",{class:"text-white font-bold",onDblclick:K},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:x=>f(x,"instant",c)},v(t),41,Cs)]))),256))]),e("div",Is,[e("div",Bs,[Ss,e("button",{class:"addBtn ml-5",onClick:s[14]||(s[14]=t=>d("round"))},"新增"),l(r).roundEffect.length>1?(n(),o("button",{key:0,class:"addBtn ml-5",onClick:s[15]||(s[15]=t=>i("round"))},"刪除")):g("",!0)]),(n(!0),o($,null,k(l(r).roundEffect,(t,c)=>(n(),o("div",Ps,[e("span",{class:"text-white font-bold",onDblclick:K},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:x=>f(x,"round",c)},v(t),41,Ds)]))),256))]),e("div",Ns,[e("div",Fs,[js,e("button",{class:"addBtn ml-5",onClick:s[16]||(s[16]=t=>d("combo"))},"新增"),l(r).comboEffect.length>1?(n(),o("button",{key:0,class:"addBtn ml-5",onClick:s[17]||(s[17]=t=>i("combo"))},"刪除")):g("",!0)]),(n(!0),o($,null,k(l(r).comboEffect,(t,c)=>(n(),o("div",Ls,[e("span",{class:"text-white font-bold",onDblclick:K},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:x=>f(x,"combo",c)},v(t),41,Ks)]))),256))])])):g("",!0)]),e("div",Ms,[e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:s[18]||(s[18]=t=>H())},"儲存"),e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:s[19]||(s[19]=t=>z())},"還原")]),e("div",Ts,[e("div",As,[Os,e("div",Us,[e("input",{type:"number",class:"w-[100px] rounded-md",onChange:s[20]||(s[20]=t=>u.slideItem(t,l(p).length))},null,32),e("button",{class:"addBtn ml-3 px-3",onClick:h},"添加卡片")])]),J(l(se),{"wrap-around":!0,"items-to-show":5,ref_key:"cardSlide",ref:ae},{default:X(()=>[(n(!0),o($,null,k(l(p),(t,c)=>(n(),re(l(ne),{key:c},{default:X(()=>[e("div",{class:"flex-col [&>span]:block cursor-pointer",onClick:x=>q(t.id)},[e("img",{src:l(_)+t.image,width:"160",alt:"not found"},null,8,Gs),t.rarity===1?(n(),o("span",Js,v(t.id),1)):g("",!0),t.rarity===2?(n(),o("span",qs,v(t.id),1)):g("",!0),t.rarity===3?(n(),o("span",Rs,v(t.id),1)):g("",!0)],8,Vs)]),_:2},1024))),128))]),_:1},512)]),e("div",Ws,[e("div",Hs,[e("div",{className:"close",onClick:F},"✖"),J(Rt,{ref_key:"popup",ref:I,max:l(p).length+1,func:l(C),onClose:F},null,8,["max","func"])])])]))}}),en=Y(Qs,[["__scopeId","data-v-59bffbe0"]]);export{en as default};
