import{a as A}from"./axios.1779699b.js";import{_ as Y,j as y,o as i,c as u,b as Q,w as X,d as n,a as e,F as h,f as w,t as x,m as b,n as H,C as z,T as ae,p as Z,g as ee,i as oe,k as ie,D as de}from"./index.6e73d0e0.js";import{C as te,S as le,P as ue,N as ce}from"./carousel.65ee24ca.js";const _=k=>(Z("data-v-6ae4c7df"),k=k(),ee(),k),re={class:"h-[500px] pl-5"},fe={class:"flex flex-row min-w-[500px]",key:"step1"},pe={class:"pl-2 pr-2 w-1/2"},ve={class:"flex flex-col"},me=_(()=>e("span",{class:"text-lg"},"卡片名稱:",-1)),xe={class:"mt-3 flex flex-col"},_e=_(()=>e("span",{class:"text-lg"},"卡片編號",-1)),ge=["value"],he={class:"flex flex-col mt-5"},we=_(()=>e("span",{class:"text-lg"},"稀有度:",-1)),be=["value"],ye={class:"flex flex-col mt-5"},ke=_(()=>e("span",{class:"text-lg"},"縮圖:",-1)),$e=["src"],Ce={class:"pl-2 pr-2 w-1/2 flex flex-col justify-between"},Ee={class:"flex flex-col"},Ie=_(()=>e("span",{class:"text-lg"},"全身圖:",-1)),Be=["src"],Se={key:"step2",class:"flex flex-row min-w-[500px]"},Ne={class:"w-1/2 pl-2 pr-2 flex flex-col"},De={class:"flex flex-col mt-5"},je={class:"flex flex-row mb-1"},Pe=_(()=>e("span",{class:"text-lg"},"即時效果:",-1)),Fe=["onUpdate:modelValue"],Le={class:"flex flex-col mt-5"},Te={class:"flex flex-row mb-1"},Oe=_(()=>e("span",{class:"text-lg"},"回合效果:",-1)),Ae=["placeholder","onUpdate:modelValue"],Me={class:"flex flex-col mt-5"},Ve={class:"flex flex-row mb-1"},Je=_(()=>e("span",{class:"text-lg"},"連動效果:",-1)),Ke=["placeholder","onUpdate:modelValue"],Ue={class:"w-1/2 pl-2 pr-2 flex flex-col justify-between min-h-[400px]"},qe={class:"flex flex-col"},Ge=_(()=>e("div",null,[e("span",null,"技能標籤")],-1)),We={class:"colorSelect w-[150px]",id:"tagSelect2"},Re=_(()=>e("option",{value:0},x("請選擇"),-1)),He=["label"],ze=["value"],Qe={class:"flex flex-col"},Xe={class:"flex flex-row min-w-[500px]",key:"step3"},Ye={class:"px-2 w-1/2"},Ze={class:"flex flex-col"},et=_(()=>e("span",null,"回合累積能量:",-1)),tt={class:"flex flex-col"},lt=_(()=>e("span",null,"總儲存能量:",-1)),st={class:"flex flex-col"},nt=_(()=>e("span",null,"回合消耗能量:",-1)),at={class:"flex flex-col"},ot=_(()=>e("span",null,"進場能量:",-1)),it={class:"w-1/2"},dt={class:"flex flex-col"},ut=_(()=>e("span",null,"卡片關鍵字:",-1)),ct={class:"my-2"},rt=_(()=>e("span",null,"盤面圖:",-1)),ft={class:"spread"},pt=["src"],vt=_(()=>e("div",{class:"my-2"},[e("span",null,"圖片標示位置:"),e("input",{type:"number",class:"selfInput",id:"spreadIndex",min:1})],-1)),mt={class:"min-w-[500px]",key:"step4"},xt={class:"w-5/6 mx-auto mt-5 flex flex-row flex-wrap justify-between mb-5 max-[450px]:justify-center"},_t={class:"w-2/5 min-w-[150px] max-[450px]:w-[100%]"},gt={class:"[&>span]:text-[20px] mb-3 text-center"},ht={key:0,class:"w-[100%] text-center text-amber-900 font-bold"},wt={key:1,class:"w-[100%] text-center text-slate-500 font-bold"},bt={key:2,class:"w-[100%] text-center text-yellow-600 font-bold"},yt={key:0,class:"imgbox1 max-w-[150px] mx-auto"},kt=["src","alt"],$t={key:1,class:"imgbox2 max-w-[150px] mx-auto"},Ct=["src","alt"],Et={key:2,class:"imgbox3 max-w-[150px] mx-auto"},It=["src","alt"],Bt={class:"w-1/2 flex flex-col min-w-[150px] ml-2 max-[450px]:ml-0 max-[450px]:w-[100%]"},St={class:"flex flex-col mt-5 min-h-[10vh]"},Nt=_(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"即時效果")])],-1)),Dt={class:"flex flex-col"},jt={class:"text-black"},Pt={class:"flex flex-col mt-5 min-h-[20vh]"},Ft=_(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"回合效果")])],-1)),Lt={class:"flex flex-col"},Tt={class:"text-black"},Ot={class:"flex flex-col mt-5 min-h-[10vh]"},At=_(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"連動效果")])],-1)),Mt={class:"flex flex-col"},Vt={class:"text-black"},Jt={__name:"AddCard",props:["max","func"],emits:["close"],setup(k,{expose:j,emit:P}){let M=k,s=y({}),g=y(1),r=y(null),f=y(null),$=y(null),N=y([]),D=y([]),C=y([""]),S=y([""]),E=y([""]);const I=P;console.log(N.value);function O(p){document.getElementById(p).value=null,document.getElementById(p).click()}async function V(p){let o=document.getElementById(p).files[0];const a=new FileReader;a.onload=v=>{p==="iconInput"?r.value={file:v.target.result,name:o.name,realFile:o}:p==="imageInput"?f.value={file:v.target.result,name:o.name,realFile:o}:p==="spreadInput"&&($.value={file:v.target.result,name:o.name,realFile:o}),console.log($.value)},await a.readAsDataURL(o)}function J(p){switch(p){case"combo":S.value.push("");break;case"round":C.value.push("");break;case"instant":E.value.push("");break}}function K(p){switch(p){case"combo":S.value.length>1&&(S.value=S.value.filter((o,a)=>a!==S.value.length-1)),console.log(S.value.length);break;case"round":C.value.length>1&&(C.value=C.value.filter((o,a)=>a!==C.value.length-1)),console.log(C.value.length);break;case"instant":E.value.length>1&&(E.value=E.value.filter((o,a)=>a!==E.value.length-1)),console.log(E.value.length);break}}function q(){console.log(N.value);var p=parseInt(document.getElementById("tagSelect2").value),o={};N.value.forEach(a=>{let v=a.data.find(B=>B.id===p);v!==void 0&&(o=v)}),console.log(p),!(D.value.includes(o)||p===0)&&(D.value.push(o),console.log(D.value),D.value=D.value.sort((a,v)=>a.id-v.id),s.value.tag.push(p),s.value.tag=s.value.tag.sort((a,v)=>a-v),console.log(D.value))}function G(p){p.key==="Enter"&&(alert("關鍵字輸入!!"),s.value.keyword===void 0&&(s.value.keyword=[]),s.value.keyword.push(p.target.value),p.target.value="")}async function L(){if(console.log(g.value),g.value===3&&(s.value.PointMax===void 0||s.value.PointConsume===void 0||s.value.PointGet===void 0||s.value.PointEnter===void 0)){alert("請輸入對應資料!!");return}if(g.value+=1,g.value===4&&(console.log(s.value),W()),g.value===5){let p=new FormData;p.append("image",r.value.realFile),p.append("oldName",r.value.name.split(".")[0]),p.append("newName",`1_${s.value.id}`),console.log(p.getAll("image"));const o=await A.post("http://localhost:5000/card/icon",p,{headers:{"Content-Type":"multipart/form-data"}});console.log(o.data);let a=new FormData;a.append("image",f.value.realFile),a.append("oldName",f.value.name.split(".")[0]),a.append("newName",`1_${s.value.id}`),console.log(f.value);const v=await A.post("http://localhost:5000/card/image",a,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(v.data),$.value!==null){console.log("開始上傳盤面");let T=new FormData;T.append("image",$.value.realFile),T.append("oldName",$.value.name.split(".")[0]),T.append("newName",`1_${s.value.id}`),console.log($.value);const U=await A.post("http://localhost:5000/card/spread",T,{headers:{"Content-Type":"multipart/form-data"}});console.log(U.data)}let B={series:1,card:s.value};await A.post("http://localhost:5000/card/add",B).then(T=>{alert("新卡片已添加"),I("close","")})}}function W(){s.value.id===void 0&&(s.value.id=M.max),s.value.roundEffect=C.value,s.value.instantEffect=E.value,s.value.comboEffect=S.value,s.value.image=`/images/card/icon/1_${s.value.id}.png`,s.value.fullimage=`/images/card/image/1_${s.value.id}.png`,s.value.spread={id:parseInt(document.getElementById("spreadIndex").value),image:`/images/card/image/${s.value.id}.png`};let p=[];D.value.forEach(a=>{p.push(parseInt(a.id))}),s.value.tag=p;let o={id:s.value.id,name:s.value.name,rarity:s.value.rarity,image:s.value.image,instantEffect:s.value.instantEffect,roundEffect:s.value.roundEffect,comboEffect:s.value.comboEffect,PointMax:parseInt(s.value.PointMax),PointEnter:parseInt(s.value.PointEnter),PointConsume:parseInt(s.value.PointConsume),PointGet:parseInt(s.value.PointGet),tag:s.value.tag,fullimage:s.value.fullimage,keyword:s.value.keyword,spread:s.value.spread};s.value=o,console.log(s.value)}function R(p){N.value=p}return j({setFunc:R}),(p,o)=>(i(),u("div",re,[Q(ae,{name:"step",tag:"div",class:"flex flex-row"},{default:X(()=>[n(g)===1?(i(),u("div",fe,[e("div",pe,[e("div",ve,[me,e("input",{type:"text",class:"selfInput",placeholder:"卡片名子",onChange:o[0]||(o[0]=a=>n(s).name=a.target.value)},null,32)]),e("div",xe,[_e,e("input",{type:"number",class:"selfInput",value:k.max,onChange:o[1]||(o[1]=a=>n(s).id=parseInt(a.target.value))},null,40,ge)]),e("div",he,[we,(i(),u(h,null,w(3,a=>e("div",null,[e("input",{type:"radio",name:"rarity",value:a,onChange:o[2]||(o[2]=v=>n(s).rarity=parseInt(v.target.value))},null,40,be),e("span",null,x(a+"星"),1)])),64))]),e("div",ye,[ke,e("button",{onClick:o[3]||(o[3]=a=>O("iconInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"iconInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[4]||(o[4]=()=>V("iconInput"))},null,32),n(r)!==null?(i(),u("img",{key:0,src:n(r).file,alt:"縮圖",class:"max-w-[100px] max-h-[100px]"},null,8,$e)):b("",!0)])]),e("div",Ce,[e("div",Ee,[Ie,e("button",{onClick:o[5]||(o[5]=a=>O("imageInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"imageInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[6]||(o[6]=()=>V("imageInput"))},null,32),n(f)!==null?(i(),u("img",{key:0,src:n(f).file,alt:"縮圖",class:"max-w-[200px] max-h-[300px]"},null,8,Be)):b("",!0)]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:L},"下一步")])])])):b("",!0),n(g)===2?(i(),u("div",Se,[e("div",Ne,[e("div",De,[e("div",je,[Pe,e("button",{class:"addBtn ml-3 px-3",onClick:o[7]||(o[7]=a=>J("instant"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[8]||(o[8]=a=>K("instant"))},"刪除")]),(i(!0),u(h,null,w(n(E),(a,v)=>H((i(),u("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:"即使效果","onUpdate:modelValue":B=>n(E)[v]=B},null,8,Fe)),[[z,n(E)[v]]])),256))]),e("div",Le,[e("div",Te,[Oe,e("button",{class:"addBtn ml-3 px-3",onClick:o[9]||(o[9]=a=>J("round"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[10]||(o[10]=a=>K("round"))},"刪除")]),(i(!0),u(h,null,w(n(C),(a,v)=>H((i(),u("textarea",{class:"selfInput mt-1 mb-1 whitespace-pre-wrap",placeholder:`回合效果${v+1}`,"onUpdate:modelValue":B=>n(C)[v]=B},null,8,Ae)),[[z,n(C)[v]]])),256))]),e("div",Me,[e("div",Ve,[Je,e("button",{class:"addBtn ml-3 px-3",onClick:o[11]||(o[11]=a=>J("combo"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[12]||(o[12]=a=>K("combo"))},"刪除")]),(i(!0),u(h,null,w(n(S),(a,v)=>H((i(),u("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:`連動效果${v+1}`,"onUpdate:modelValue":B=>n(S)[v]=B},null,8,Ke)),[[z,n(S)[v]]])),256))])]),e("div",Ue,[e("div",qe,[Ge,e("div",null,[e("select",We,[Re,(i(!0),u(h,null,w(n(N),a=>(i(),u("optgroup",{label:a.typeName},[(i(!0),u(h,null,w(a.data,v=>(i(),u("option",{value:v.id,class:"bg-amber-900"},x(v.name),9,ze))),256))],8,He))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:o[13]||(o[13]=a=>q())},"新增")]),e("div",Qe,[(i(!0),u(h,null,w(n(D),a=>(i(),u("span",null,x(a.id+" "+a.name),1))),256))])]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:L},"下一步")])])])):b("",!0),n(g)===3?(i(),u("div",Xe,[e("div",Ye,[e("div",Ze,[et,e("input",{type:"number",id:"pointGet",class:"selfInput",min:1,max:8,required:"",onChange:o[14]||(o[14]=a=>n(s).PointGet=a.target.value)},null,32)]),e("div",tt,[lt,e("input",{type:"number",id:"pointMax",class:"selfInput",min:1,max:8,required:"",onChange:o[15]||(o[15]=a=>n(s).PointMax=a.target.value)},null,32)]),e("div",st,[nt,e("input",{type:"number",id:"pointConsume",class:"selfInput",min:1,max:8,required:"",onChange:o[16]||(o[16]=a=>n(s).PointConsume=a.target.value)},null,32)]),e("div",at,[ot,e("input",{type:"number",id:"pointEnter",class:"selfInput",min:1,max:8,required:"",onChange:o[17]||(o[17]=a=>n(s).PointEnter=a.target.value)},null,32)])]),e("div",it,[e("div",dt,[ut,e("input",{type:"text",class:"selfInput",onKeydown:G},null,32),(i(!0),u(h,null,w(n(s).keyword,a=>(i(),u("span",null,x(a),1))),256))]),e("div",ct,[rt,e("button",{onClick:o[18]||(o[18]=a=>O("spreadInput")),class:"max-w-[100px] addBtn px-2"},"上傳"),e("input",{type:"file",id:"spreadInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[19]||(o[19]=()=>V("spreadInput"))},null,32),e("div",ft,[n($)!==null?(i(),u("img",{key:0,src:n($).file,alt:"盤面圖",class:"w-[240px]"},null,8,pt)):b("",!0)])]),vt,e("div",{class:"mt-2"},[e("button",{class:"addBtn pl-2 pr-2",onClick:L},"下一步")])])])):b("",!0),n(g)===4?(i(),u("div",mt,[e("div",xt,[e("div",_t,[e("div",gt,[n(s).rarity===1?(i(),u("span",ht,x(n(s).name),1)):b("",!0),n(s).rarity===2?(i(),u("span",wt,x(n(s).name),1)):b("",!0),n(s).rarity===3?(i(),u("span",bt,x(n(s).name),1)):b("",!0)]),n(s).rarity===1?(i(),u("div",yt,[e("img",{src:n(f).file,alt:n(s).name,class:"h-[40vh] min-w-[150px]"},null,8,kt)])):b("",!0),n(s).rarity===2?(i(),u("div",$t,[e("img",{src:n(f).file,alt:n(s).name,class:"h-[40vh] min-w-[150px]"},null,8,Ct)])):b("",!0),n(s).rarity===3?(i(),u("div",Et,[e("img",{src:n(f).file,alt:n(s).name,class:"h-[40vh] min-w-[150px]"},null,8,It)])):b("",!0)]),e("div",Bt,[e("div",St,[Nt,e("div",Dt,[(i(!0),u(h,null,w(n(s).instantEffect,a=>(i(),u("span",jt,"•"+x(a),1))),256))])]),e("div",Pt,[Ft,e("div",Lt,[(i(!0),u(h,null,w(n(s).roundEffect,a=>(i(),u("span",Tt,"•"+x(a),1))),256))])]),e("div",Ot,[At,e("div",Mt,[(i(!0),u(h,null,w(n(s).comboEffect,a=>(i(),u("span",Vt,"•"+x(a),1))),256))])])])]),e("div",{class:"w-5/6 mt-5 mx-auto"},[e("button",{class:"addBtn min-w-[100px] ml-2",onClick:L},"儲存")])])):b("",!0)]),_:1})]))}},Kt=Y(Jt,[["__scopeId","data-v-6ae4c7df"]]);const F=k=>(Z("data-v-bc9e44fd"),k=k(),ee(),k),Ut={class:"main"},qt={class:"w-4/5 mx-auto mb-2"},Gt=F(()=>e("span",{class:"text-white text-xl"},"系列",-1)),Wt={class:"flex flex-row"},Rt={class:"w-4/5 mx-auto flex flex-row justify-evenly"},Ht={key:0,class:"w-1/2 min-h-[500px] flex flex-row"},zt={class:"CardImage w-1/2"},Qt={class:"text-white font-bold text-xl"},Xt=["src"],Yt={class:"Details flex flex-col w-1/2 mt-5 [&>div]:mb-5"},Zt={class:"flex flex-row"},el=F(()=>e("span",{class:"standwardLabel"},"即時效果",-1)),tl={class:"mb-3 flex flex-col"},ll=["onKeydown"],sl={class:"flex flex-row"},nl=F(()=>e("span",{class:"standwardLabel"},"回合效果",-1)),al={class:"mb-3 flex flex-col"},ol=["onKeydown"],il={class:"flex flex-row"},dl=F(()=>e("span",{class:"standwardLabel"},"連動效果",-1)),ul={class:"mb-3 flex flex-col"},cl=["onKeydown"],rl={class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},fl={class:"flex-col"},pl=F(()=>e("span",{class:"standwardLabel"},"自身技能標籤",-1)),vl={class:"mb-3"},ml=["value"],xl={key:0},_l={class:"colorSelect w-[150px]",id:"tagSelect"},gl=F(()=>e("option",{value:0},x("請選擇"),-1)),hl=["label"],wl=["value"],bl={key:1},yl=F(()=>e("span",{class:"text-yellow-500 font-bold text-lg"},"沒有找到匹配技能標籤",-1)),kl=[yl],$l={class:"mb-2 flex-col"},Cl={class:"max-h-[150px] overflow-y-scroll hiddenScrollbar"},El={class:"w-[50px]"},Il={class:"text-white"},Bl={class:"w-[150px]"},Sl={class:"text-white"},Nl={class:"w-[50px]"},Dl={class:"text-white"},jl=["id","onClick"],Pl=F(()=>e("span",{class:"standwardLabel"},"搜尋關鍵字管理",-1)),Fl=["value"],Ll={key:0,class:"max-h-[150px] overflow-y-scroll hiddenScrollbar"},Tl={class:"text-white min-w-[200px]"},Ol=["id","onClick"],Al={class:"absolute bottom-0"},Ml={class:"slide w-4/5 mx-auto mt-3 pt-3"},Vl={class:"ml-5 mb-3"},Jl=F(()=>e("span",{class:"text-white"},"請輸入要卡片編號:",-1)),Kl={class:"flex flex-row"},Ul=["onClick"],ql=["src"],Gl={key:0,class:"w-[100%] text-center bg-amber-900 text-white rounded-md"},Wl={key:1,class:"w-[100%] text-center bg-slate-500 text-white rounded-md"},Rl={key:2,class:"w-[100%] text-center bg-yellow-600 text-white rounded-md"},Hl={className:"overlay",id:"overlay"},zl={class:"popup max-[500px]:w-[80%] max-[500px]:min-w-[200px]"};let se=y(null);const Ql={name:"App",components:{Carousel:te,Slide:le,Pagination:ue,Navigation:ce},methods:{slideItem:function(k,j){if(k.target.value>j||k.target.value<0)alert("該編號卡片資料沒有找到!!");else{let P=k.target.value;se.value.data.slideTo(P-1)}}},data(){}},Xl=Object.assign(Ql,{setup(k){let j=[],P=[],M=y(1),s=y([]),g=y([]),r=y([]),f=y(1),$="",N="",D=y(null);const C=oe("frontpath");if(C!==""){var S=window.location.href;S.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}E();function E(){A.post("http://localhost:5000/card/get",{get:M.value}).then(d=>{if(console.log(d.data),j=d.data.card,P=d.data.func,d.data=="發生錯誤"){console.log("沒有發現相關資料");return}g.value=JSON.parse(JSON.stringify(P)),r.value=JSON.parse(JSON.stringify(j)),L(1)})}let I=y({});function O(d){let l=document.getElementById("series"+d);l.classList.contains("clicked")?l.classList.remove("clicked"):l.classList.add("clicked"),M.value=parseInt(d),E()}function V(d){s.value=s.value.filter((t,c)=>c!==d);let l=r.value.find(t=>t.id===parseInt(f.value)).tag;r.value.find(t=>t.id===parseInt(f.value)).tag=l.filter((t,c)=>c!==d),console.log(r.value.find(t=>t.id===parseInt(f.value)))}function J(){var d=parseInt(document.getElementById("tagSelect").value),l={};g.value.forEach(t=>{let c=t.data.find(m=>m.id===d);c!==void 0&&(l=c)}),!(s.value.includes(l)||d===0)&&(s.value.push(l),s.value=s.value.sort((t,c)=>t.id-c.id),r.value.find(t=>t.id===f.value).tag.push(d),r.value.find(t=>t.id===f.value).tag=r.value.find(t=>t.id===f.value).tag.sort((t,c)=>t-c),console.log(j.find(t=>t.id===f.value).tag),console.log(r.value.find(t=>t.id===f.value).tag))}function K(){let d=r.value.find(l=>l.id===f.value).keyword;d==null&&(d=[]),d.push(N),console.log(d),r.value.find(l=>l.id===f.value).keyword=d,console.log(r.value.find(l=>l.id===f.value).keyword),N=""}function q(d){let l=r.value.find(t=>t.id===f.value).keyword;l=l.filter((t,c)=>c!==d),r.value.find(t=>t.id===f.value).keyword=l,console.log(r.value.find(t=>t.id===f.value).keyword)}function G(){if(confirm("將會儲存你所做的所有更改，如果確定覆蓋則按確定"))try{console.log(r.value),console.log(j);let d={getId:M.value,newData:r.value};console.log(d),A.post("http://localhost:5000/card/edit",d).then(l=>{console.log(l),alert(l.data),j=JSON.parse(JSON.stringify(r.value))})}catch(d){console.log(d)}}function L(d){f.value=d,I.value=r.value.find(l=>l.id===f.value),s.value=[],I.value.tag.forEach(l=>{P.forEach(t=>{let c=t.data.find(m=>m.id===l);c!==void 0&&s.value.push(c)})})}function W(d){if($=d.target.value,console.log($),$===""){g.value=P;return}let l=[];P.forEach(t=>{let c=[];if(t.data.forEach(m=>{m.name.includes($)&&c.push(m)}),c.length!==0){console.log(c);let m=t;m.data=c,l.push(m)}}),l.length!==0?g.value=l:g.value=[]}function R(d){N=d.target.value,console.log(N)}function p(){let d=j.find(t=>t.id===f.value);if(d==null)return;let l=JSON.parse(JSON.stringify(d));s.value=[],l.tag.forEach(t=>{P.forEach(c=>{let m=c.data.find(ne=>ne.id===t);m!==void 0&&s.value.push(m)})}),I.value=l,Object.assign(d,l)}function o(d){d.target.parentElement.querySelector("textarea").classList.remove("hidden"),d.target.classList.add("hidden")}function a(d,l,t=void 0){if(console.log(d.key),d.key==="Enter"){switch(l){case"instant":r.value[f.value-1].instantEffect[t]=d.target.value;break;case"round":r.value[f.value-1].roundEffect[t]=d.target.value;break;case"combo":r.value[f.value-1].comboEffect[t]=d.target.value;break}console.log(r.value.find(m=>m.id===f.value)),d.target.parentElement.querySelector("span").classList.remove("hidden"),d.target.classList.add("hidden");return}if(d.key,d.key==="Delete")switch(l){case"instant":break;case"round":r.value.find(c=>c.id===f.value).roundEffect=r.value.find(c=>c.id===f.value).roundEffect.filter((c,m)=>m!==t);break;case"combo":r.value.find(c=>c.id===f.value).comboEffect=r.value.find(c=>c.id===f.value).comboEffect.filter((c,m)=>m!==t);break}}function v(d){let l=r.value.find(t=>t.id===f.value);switch(d){case"round":l.roundEffect.push("回合效果");break;case"instant":l.instantEffect.push("即時效果");break;case"combo":l.comboEffect.push("連動效果");break}}function B(d){let l=r.value.find(t=>t.id===f.value);switch(d){case"round":if(l.roundEffect.length===1)break;l.roundEffect=l.roundEffect.filter((t,c)=>c!==l.roundEffect.length-1);break;case"instant":if(l.instantEffect.length===1)break;l.instantEffect=l.instantEffect.filter((t,c)=>c!==l.instantEffect.length-1);break;case"combo":if(l.comboEffect.length===1)break;l.comboEffect=l.comboEffect.filter((t,c)=>c!==l.comboEffect.length-1);break}}function T(){document.getElementById("overlay").style.display="block",D.value.setFunc(g.value)}function U(){document.getElementById("overlay").style.display="none"}return ie("close",U),(d,l)=>(i(),u("div",Ut,[e("div",qt,[Gt,e("div",Wt,[e("button",{class:"addBtn mr-5 w-[100px]",onClick:l[0]||(l[0]=t=>O(1)),id:"series1"},"晨曦塔"),e("button",{class:"addBtn mr-5 w-[100px]",onClick:l[1]||(l[1]=t=>O(2)),id:"series2"},"測試塔")])]),e("div",Rt,[n(I)!==void 0?(i(),u("div",Ht,[e("div",zt,[e("span",Qt,x(n(I).name),1),e("img",{src:n(C)+n(I).fullimage,alt:"全身圖",class:"max-h-[500px]"},null,8,Xt)]),e("div",Yt,[e("div",null,[e("div",Zt,[el,e("button",{class:"addBtn ml-5",onClick:l[2]||(l[2]=t=>v("instant"))},"新增"),e("button",{class:"addBtn ml-5",onClick:l[3]||(l[3]=t=>B("instant"))},"刪除")]),(i(!0),u(h,null,w(n(I).instantEffect,(t,c)=>(i(),u("div",tl,[e("span",{class:"text-white font-bold",onDblclick:o},x(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:m=>a(m,"instant",c)},x(t),41,ll)]))),256))]),e("div",null,[e("div",sl,[nl,e("button",{class:"addBtn ml-5",onClick:l[4]||(l[4]=t=>v("round"))},"新增"),e("button",{class:"addBtn ml-5",onClick:l[5]||(l[5]=t=>B("round"))},"刪除")]),(i(!0),u(h,null,w(n(I).roundEffect,(t,c)=>(i(),u("div",al,[e("span",{class:"text-white font-bold",onDblclick:o},x(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:m=>a(m,"round",c)},x(t),41,ol)]))),256))]),e("div",null,[e("div",il,[dl,e("button",{class:"addBtn ml-5",onClick:l[6]||(l[6]=t=>v("combo"))},"新增"),e("button",{class:"addBtn ml-5",onClick:l[7]||(l[7]=t=>B("combo"))},"新增")]),(i(!0),u(h,null,w(n(I).comboEffect,(t,c)=>(i(),u("div",ul,[e("span",{class:"text-white font-bold",onDblclick:o},x(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:m=>a(m,"combo",c)},x(t),41,cl)]))),256))])])])):b("",!0),e("div",rl,[e("div",fl,[pl,e("div",vl,[e("input",{type:"text",value:n($),placeholder:"技能關鍵字",onInput:l[8]||(l[8]=t=>W(t)),class:"colorSelect"},null,40,ml)]),n(g).length!==0?(i(),u("div",xl,[e("select",_l,[gl,(i(!0),u(h,null,w(n(g),t=>(i(),u("optgroup",{label:t.typeName},[(i(!0),u(h,null,w(t.data,c=>(i(),u("option",{value:c.id,class:"bg-amber-900"},x(c.name),9,wl))),256))],8,hl))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:l[9]||(l[9]=t=>J())},"新增")])):(i(),u("div",bl,kl))]),e("div",$l,[e("div",Cl,[e("table",null,[e("tbody",null,[(i(!0),u(h,null,w(n(s),(t,c)=>(i(),u("tr",null,[e("td",El,[e("span",Il,x(t.id),1)]),e("td",Bl,[e("span",Sl,x(t.name),1)]),e("td",Nl,[e("span",Dl,[e("button",{class:"removeBtn",id:"btns"+c,onClick:m=>V(c)},"移除",8,jl)])])]))),256))])])])]),e("div",null,[Pl,e("div",null,[e("input",{type:"text",value:n(N),placeholder:"搜尋關鍵字",onInput:l[10]||(l[10]=t=>R(t)),class:"colorSelect"},null,40,Fl),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:l[11]||(l[11]=t=>K())},"新增")]),n(I).keyword!==void 0?(i(),u("div",Ll,[e("table",null,[e("tbody",null,[(i(!0),u(h,null,w(n(I).keyword,(t,c)=>(i(),u("tr",null,[e("td",Tl,[e("span",null,x(t),1)]),e("td",null,[e("button",{class:"removeBtn",id:"btns"+c,onClick:m=>q(c)},"移除",8,Ol)])]))),256))])])])):b("",!0)]),e("div",Al,[e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:l[12]||(l[12]=t=>G())},"儲存"),e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:l[13]||(l[13]=t=>p())},"還原")])])]),e("div",Ml,[e("div",Vl,[Jl,e("div",Kl,[e("input",{type:"number",class:"w-[100px] rounded-md",onChange:l[14]||(l[14]=t=>d.slideItem(t,n(r).length))},null,32),e("button",{class:"addBtn ml-3 px-3",onClick:T},"添加卡片")])]),Q(n(te),{"wrap-around":!0,"items-to-show":5,ref_key:"cardSlide",ref:se},{default:X(()=>[(i(!0),u(h,null,w(n(r),(t,c)=>(i(),de(n(le),{key:c},{default:X(()=>[e("div",{class:"flex-col [&>span]:block cursor-pointer",onClick:m=>L(t.id)},[e("img",{src:n(C)+t.image,width:"160",alt:"not found"},null,8,ql),t.rarity===1?(i(),u("span",Gl,x(t.id),1)):b("",!0),t.rarity===2?(i(),u("span",Wl,x(t.id),1)):b("",!0),t.rarity===3?(i(),u("span",Rl,x(t.id),1)):b("",!0)],8,Ul)]),_:2},1024))),128))]),_:1},512)]),e("div",Hl,[e("div",zl,[e("div",{className:"close",onClick:U},"✖"),Q(Kt,{ref_key:"popup",ref:D,max:n(r).length+1,func:n(g),onClose:U},null,8,["max","func"])])])]))}}),ts=Y(Xl,[["__scopeId","data-v-bc9e44fd"]]);export{ts as default};
