import{a as A}from"./axios.1779699b.js";import{_ as Y,j as y,o as i,c as d,b as Q,w as X,d as s,a as e,F as h,f as w,t as m,m as b,n as z,y as H,T as ae,p as Z,g as ee,i as ne,k as oe,z as ie}from"./index.c21b360c.js";import{C as te,S as le,P as de,N as ue}from"./carousel.f00b38a8.js";const _=k=>(Z("data-v-6b65036b"),k=k(),ee(),k),ce={class:"h-[500px] pl-5"},re={class:"flex flex-row min-w-[500px]",key:"step1"},pe={class:"pl-2 pr-2 w-1/2"},fe={class:"flex flex-col"},ve=_(()=>e("span",{class:"text-lg"},"卡片名稱:",-1)),me={class:"mt-3 flex flex-col"},xe=_(()=>e("span",{class:"text-lg"},"卡片編號",-1)),_e=["value"],ge={class:"flex flex-col mt-5"},he=_(()=>e("span",{class:"text-lg"},"稀有度:",-1)),we=["value"],be={class:"flex flex-col mt-5"},ye=_(()=>e("span",{class:"text-lg"},"縮圖:",-1)),ke=["src"],$e={class:"pl-2 pr-2 w-1/2 flex flex-col justify-between"},Ce={class:"flex flex-col"},Ee=_(()=>e("span",{class:"text-lg"},"全身圖:",-1)),Ie=["src"],Be={key:"step2",class:"flex flex-row min-w-[500px]"},Se={class:"w-1/2 pl-2 pr-2 flex flex-col"},Ne={class:"flex flex-col mt-5"},De={class:"flex flex-row mb-1"},je=_(()=>e("span",{class:"text-lg"},"即時效果:",-1)),Pe=["onUpdate:modelValue"],Fe={class:"flex flex-col mt-5"},Te={class:"flex flex-row mb-1"},Le=_(()=>e("span",{class:"text-lg"},"回合效果:",-1)),Ae=["placeholder","onUpdate:modelValue"],Me={class:"flex flex-col mt-5"},Oe={class:"flex flex-row mb-1"},Ve=_(()=>e("span",{class:"text-lg"},"連動效果:",-1)),Je=["placeholder","onUpdate:modelValue"],Ke={class:"w-1/2 pl-2 pr-2 flex flex-col justify-between min-h-[400px]"},Ue={class:"flex flex-col"},qe=_(()=>e("div",null,[e("span",null,"技能標籤")],-1)),Ge={class:"colorSelect w-[150px]",id:"tagSelect2"},We=_(()=>e("option",{value:0},m("請選擇"),-1)),Re=["label"],ze=["value"],He={class:"flex flex-col"},Qe={class:"flex flex-row min-w-[500px]",key:"step3"},Xe={class:"px-2 w-1/2"},Ye={class:"flex flex-col"},Ze=_(()=>e("span",null,"回合累積能量:",-1)),et={class:"flex flex-col"},tt=_(()=>e("span",null,"總儲存能量:",-1)),lt={class:"flex flex-col"},st=_(()=>e("span",null,"回合消耗能量:",-1)),at={class:"flex flex-col"},nt=_(()=>e("span",null,"進場能量:",-1)),ot={class:"w-1/2"},it={class:"flex flex-col"},dt=_(()=>e("span",null,"卡片關鍵字:",-1)),ut={class:"my-2"},ct=_(()=>e("span",null,"盤面圖:",-1)),rt={class:"spread"},pt=["src"],ft=_(()=>e("div",{class:"my-2"},[e("span",null,"圖片標示位置:"),e("input",{type:"number",class:"selfInput",id:"spreadIndex",min:1})],-1)),vt={class:"min-w-[500px]",key:"step4"},mt={class:"w-5/6 mx-auto mt-5 flex flex-row flex-wrap justify-between mb-5 max-[450px]:justify-center"},xt={class:"w-2/5 min-w-[150px] max-[450px]:w-[100%]"},_t={class:"[&>span]:text-[20px] mb-3 text-center"},gt={key:0,class:"w-[100%] text-center text-amber-900 font-bold"},ht={key:1,class:"w-[100%] text-center text-slate-500 font-bold"},wt={key:2,class:"w-[100%] text-center text-yellow-600 font-bold"},bt={key:0,class:"imgbox1 max-w-[150px] mx-auto"},yt=["src","alt"],kt={key:1,class:"imgbox2 max-w-[150px] mx-auto"},$t=["src","alt"],Ct={key:2,class:"imgbox3 max-w-[150px] mx-auto"},Et=["src","alt"],It={class:"w-1/2 flex flex-col min-w-[150px] ml-2 max-[450px]:ml-0 max-[450px]:w-[100%]"},Bt={class:"flex flex-col mt-5 min-h-[10vh]"},St=_(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"即時效果")])],-1)),Nt={class:"flex flex-col"},Dt={class:"text-black"},jt={class:"flex flex-col mt-5 min-h-[20vh]"},Pt=_(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"回合效果")])],-1)),Ft={class:"flex flex-col"},Tt={class:"text-black"},Lt={class:"flex flex-col mt-5 min-h-[10vh]"},At=_(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"連動效果")])],-1)),Mt={class:"flex flex-col"},Ot={class:"text-black"},Vt={__name:"AddCard",props:["max","func"],emits:["close"],setup(k,{expose:j,emit:P}){let M=k,t=y({}),g=y(1),r=y(null),p=y(null),$=y(null),N=y([]),D=y([]),C=y([""]),S=y([""]),E=y([""]);const I=P;console.log(N.value);function O(f){document.getElementById(f).value=null,document.getElementById(f).click()}async function V(f){let o=document.getElementById(f).files[0];const a=new FileReader;a.onload=v=>{f==="iconInput"?r.value={file:v.target.result,name:o.name,realFile:o}:f==="imageInput"?p.value={file:v.target.result,name:o.name,realFile:o}:f==="spreadInput"&&($.value={file:v.target.result,name:o.name,realFile:o}),console.log($.value)},await a.readAsDataURL(o)}function J(f){switch(f){case"combo":S.value.push("");break;case"round":C.value.push("");break;case"instant":E.value.push("");break}}function K(f){switch(f){case"combo":S.value.length>1&&(S.value=S.value.filter((o,a)=>a!==S.value.length-1)),console.log(S.value.length);break;case"round":C.value.length>1&&(C.value=C.value.filter((o,a)=>a!==C.value.length-1)),console.log(C.value.length);break;case"instant":E.value.length>1&&(E.value=E.value.filter((o,a)=>a!==E.value.length-1)),console.log(E.value.length);break}}function q(){console.log(N.value);var f=parseInt(document.getElementById("tagSelect2").value),o={};N.value.forEach(a=>{let v=a.data.find(B=>B.id===f);v!==void 0&&(o=v)}),console.log(f),!(D.value.includes(o)||f===0)&&(D.value.push(o),console.log(D.value),D.value=D.value.sort((a,v)=>a.id-v.id),t.value.tag.push(f),t.value.tag=t.value.tag.sort((a,v)=>a-v),console.log(D.value))}function G(f){f.key==="Enter"&&(alert("關鍵字輸入!!"),t.value.keyword===void 0&&(t.value.keyword=[]),t.value.keyword.push(f.target.value),f.target.value="")}async function L(){if(console.log(g.value),g.value===3&&(t.value.PointMax===void 0||t.value.PointConsume===void 0||t.value.PointGet===void 0||t.value.PointEnter===void 0)){alert("請輸入對應資料!!");return}if(g.value+=1,g.value===4&&(console.log(t.value),W()),g.value===5){let f=new FormData;f.append("image",r.value.realFile),f.append("oldName",r.value.name.split(".")[0]),f.append("newName",`1_${t.value.id}`),console.log(f.getAll("image"));const o=await A.post("http://localhost:5000/card/icon",f,{headers:{"Content-Type":"multipart/form-data"}});console.log(o.data);let a=new FormData;a.append("image",p.value.realFile),a.append("oldName",p.value.name.split(".")[0]),a.append("newName",`1_${t.value.id}`),console.log(p.value);const v=await A.post("http://localhost:5000/card/image",a,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(v.data),$.value!==null){console.log("開始上傳盤面");let T=new FormData;T.append("image",$.value.realFile),T.append("oldName",$.value.name.split(".")[0]),T.append("newName",`1_${t.value.id}`),console.log($.value);const U=await A.post("http://localhost:5000/card/spread",T,{headers:{"Content-Type":"multipart/form-data"}});console.log(U.data)}let B={series:1,card:t.value};await A.post("http://localhost:5000/card/add",B).then(T=>{console.log("資料儲存"),console.log(T.data.card),alert("新卡片已添加"),I("close","")})}}function W(){t.value.id===void 0&&(t.value.id=M.max),t.value.roundEffect=C.value,t.value.instantEffect=E.value,t.value.comboEffect=S.value,t.value.image=`/images/card/icon/1_${t.value.id}.png`,t.value.fullimage=`/images/card/image/1_${t.value.id}.png`,t.value.spread={id:parseInt(document.getElementById("spreadIndex").value),image:`/images/card/image/${t.value.id}.png`};let f=[];D.value.forEach(a=>{f.push(parseInt(a.id))}),t.value.tag=f;let o={id:t.value.id,name:t.value.name,rarity:t.value.rarity,image:t.value.image,instantEffect:t.value.instantEffect,roundEffect:t.value.roundEffect,comboEffect:t.value.comboEffect,PointMax:parseInt(t.value.PointMax),PointEnter:parseInt(t.value.PointEnter),PointConsume:parseInt(t.value.PointConsume),PointGet:parseInt(t.value.PointGet),tag:t.value.tag,fullimage:t.value.fullimage,keyword:t.value.keyword,spread:t.value.spread};t.value=o,console.log(t.value)}function R(f){N.value=f}return j({setFunc:R}),(f,o)=>(i(),d("div",ce,[Q(ae,{name:"step",tag:"div",class:"flex flex-row"},{default:X(()=>[s(g)===1?(i(),d("div",re,[e("div",pe,[e("div",fe,[ve,e("input",{type:"text",class:"selfInput",placeholder:"卡片名子",onChange:o[0]||(o[0]=a=>s(t).name=a.target.value)},null,32)]),e("div",me,[xe,e("input",{type:"number",class:"selfInput",value:k.max,onChange:o[1]||(o[1]=a=>s(t).id=parseInt(a.target.value))},null,40,_e)]),e("div",ge,[he,(i(),d(h,null,w(3,a=>e("div",null,[e("input",{type:"radio",name:"rarity",value:a,onChange:o[2]||(o[2]=v=>s(t).rarity=parseInt(v.target.value))},null,40,we),e("span",null,m(a+"星"),1)])),64))]),e("div",be,[ye,e("button",{onClick:o[3]||(o[3]=a=>O("iconInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"iconInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[4]||(o[4]=()=>V("iconInput"))},null,32),s(r)!==null?(i(),d("img",{key:0,src:s(r).file,alt:"縮圖",class:"max-w-[100px] max-h-[100px]"},null,8,ke)):b("",!0)])]),e("div",$e,[e("div",Ce,[Ee,e("button",{onClick:o[5]||(o[5]=a=>O("imageInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"imageInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[6]||(o[6]=()=>V("imageInput"))},null,32),s(p)!==null?(i(),d("img",{key:0,src:s(p).file,alt:"縮圖",class:"max-w-[200px] max-h-[300px]"},null,8,Ie)):b("",!0)]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:L},"下一步")])])])):b("",!0),s(g)===2?(i(),d("div",Be,[e("div",Se,[e("div",Ne,[e("div",De,[je,e("button",{class:"addBtn ml-3 px-3",onClick:o[7]||(o[7]=a=>J("instant"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[8]||(o[8]=a=>K("instant"))},"刪除")]),(i(!0),d(h,null,w(s(E),(a,v)=>z((i(),d("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:"即使效果","onUpdate:modelValue":B=>s(E)[v]=B},null,8,Pe)),[[H,s(E)[v]]])),256))]),e("div",Fe,[e("div",Te,[Le,e("button",{class:"addBtn ml-3 px-3",onClick:o[9]||(o[9]=a=>J("round"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[10]||(o[10]=a=>K("round"))},"刪除")]),(i(!0),d(h,null,w(s(C),(a,v)=>z((i(),d("textarea",{class:"selfInput mt-1 mb-1 whitespace-pre-wrap",placeholder:`回合效果${v+1}`,"onUpdate:modelValue":B=>s(C)[v]=B},null,8,Ae)),[[H,s(C)[v]]])),256))]),e("div",Me,[e("div",Oe,[Ve,e("button",{class:"addBtn ml-3 px-3",onClick:o[11]||(o[11]=a=>J("combo"))},"添加"),e("button",{class:"addBtn ml-3 px-3",onClick:o[12]||(o[12]=a=>K("combo"))},"刪除")]),(i(!0),d(h,null,w(s(S),(a,v)=>z((i(),d("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:`連動效果${v+1}`,"onUpdate:modelValue":B=>s(S)[v]=B},null,8,Je)),[[H,s(S)[v]]])),256))])]),e("div",Ke,[e("div",Ue,[qe,e("div",null,[e("select",Ge,[We,(i(!0),d(h,null,w(s(N),a=>(i(),d("optgroup",{label:a.typeName},[(i(!0),d(h,null,w(a.data,v=>(i(),d("option",{value:v.id,class:"bg-amber-900"},m(v.name),9,ze))),256))],8,Re))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:o[13]||(o[13]=a=>q())},"新增")]),e("div",He,[(i(!0),d(h,null,w(s(D),a=>(i(),d("span",null,m(a.id+" "+a.name),1))),256))])]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:L},"下一步")])])])):b("",!0),s(g)===3?(i(),d("div",Qe,[e("div",Xe,[e("div",Ye,[Ze,e("input",{type:"number",id:"pointGet",class:"selfInput",min:1,max:8,required:"",onChange:o[14]||(o[14]=a=>s(t).PointGet=a.target.value)},null,32)]),e("div",et,[tt,e("input",{type:"number",id:"pointMax",class:"selfInput",min:1,max:8,required:"",onChange:o[15]||(o[15]=a=>s(t).PointMax=a.target.value)},null,32)]),e("div",lt,[st,e("input",{type:"number",id:"pointConsume",class:"selfInput",min:1,max:8,required:"",onChange:o[16]||(o[16]=a=>s(t).PointConsume=a.target.value)},null,32)]),e("div",at,[nt,e("input",{type:"number",id:"pointEnter",class:"selfInput",min:1,max:8,required:"",onChange:o[17]||(o[17]=a=>s(t).PointEnter=a.target.value)},null,32)])]),e("div",ot,[e("div",it,[dt,e("input",{type:"text",class:"selfInput",onKeydown:G},null,32),(i(!0),d(h,null,w(s(t).keyword,a=>(i(),d("span",null,m(a),1))),256))]),e("div",ut,[ct,e("button",{onClick:o[18]||(o[18]=a=>O("spreadInput")),class:"max-w-[100px] addBtn px-2"},"上傳"),e("input",{type:"file",id:"spreadInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:o[19]||(o[19]=()=>V("spreadInput"))},null,32),e("div",rt,[s($)!==null?(i(),d("img",{key:0,src:s($).file,alt:"盤面圖",class:"w-[240px]"},null,8,pt)):b("",!0)])]),ft,e("div",{class:"mt-2"},[e("button",{class:"addBtn pl-2 pr-2",onClick:L},"下一步")])])])):b("",!0),s(g)===4?(i(),d("div",vt,[e("div",mt,[e("div",xt,[e("div",_t,[s(t).rarity===1?(i(),d("span",gt,m(s(t).name),1)):b("",!0),s(t).rarity===2?(i(),d("span",ht,m(s(t).name),1)):b("",!0),s(t).rarity===3?(i(),d("span",wt,m(s(t).name),1)):b("",!0)]),s(t).rarity===1?(i(),d("div",bt,[e("img",{src:s(p).file,alt:s(t).name,class:"h-[40vh] min-w-[150px]"},null,8,yt)])):b("",!0),s(t).rarity===2?(i(),d("div",kt,[e("img",{src:s(p).file,alt:s(t).name,class:"h-[40vh] min-w-[150px]"},null,8,$t)])):b("",!0),s(t).rarity===3?(i(),d("div",Ct,[e("img",{src:s(p).file,alt:s(t).name,class:"h-[40vh] min-w-[150px]"},null,8,Et)])):b("",!0)]),e("div",It,[e("div",Bt,[St,e("div",Nt,[(i(!0),d(h,null,w(s(t).instantEffect,a=>(i(),d("span",Dt,"•"+m(a),1))),256))])]),e("div",jt,[Pt,e("div",Ft,[(i(!0),d(h,null,w(s(t).roundEffect,a=>(i(),d("span",Tt,"•"+m(a),1))),256))])]),e("div",Lt,[At,e("div",Mt,[(i(!0),d(h,null,w(s(t).comboEffect,a=>(i(),d("span",Ot,"•"+m(a),1))),256))])])])]),e("div",{class:"w-5/6 mt-5 mx-auto"},[e("button",{class:"addBtn min-w-[100px] ml-2",onClick:L},"儲存")])])):b("",!0)]),_:1})]))}},Jt=Y(Vt,[["__scopeId","data-v-6b65036b"]]);const F=k=>(Z("data-v-c7351afc"),k=k(),ee(),k),Kt={class:"main"},Ut={class:"w-4/5 mx-auto mb-2"},qt=F(()=>e("span",{class:"text-white text-xl"},"系列",-1)),Gt={class:"flex flex-row"},Wt={class:"w-4/5 mx-auto flex flex-row justify-evenly"},Rt={key:0,class:"w-1/2 min-h-[500px] flex flex-row"},zt={class:"CardImage w-1/2"},Ht={class:"text-white font-bold text-xl"},Qt=["src"],Xt={class:"Details flex flex-col w-1/2 mt-5 [&>div]:mb-5"},Yt={class:"flex flex-row"},Zt=F(()=>e("span",{class:"standwardLabel"},"即時效果",-1)),el={class:"mb-3 flex flex-col"},tl=["onKeydown"],ll={class:"flex flex-row"},sl=F(()=>e("span",{class:"standwardLabel"},"回合效果",-1)),al={class:"mb-3 flex flex-col"},nl=["onKeydown"],ol={class:"flex flex-row"},il=F(()=>e("span",{class:"standwardLabel"},"連動效果",-1)),dl={class:"mb-3 flex flex-col"},ul=["onKeydown"],cl={class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},rl={class:"flex-col"},pl=F(()=>e("span",{class:"standwardLabel"},"自身技能標籤",-1)),fl={class:"mb-3"},vl=["value"],ml={key:0},xl={class:"colorSelect w-[150px]",id:"tagSelect"},_l=F(()=>e("option",{value:0},m("請選擇"),-1)),gl=["label"],hl=["value"],wl={key:1},bl=F(()=>e("span",{class:"text-yellow-500 font-bold text-lg"},"沒有找到匹配技能標籤",-1)),yl=[bl],kl={class:"mb-2 flex-col"},$l={class:"max-h-[150px] overflow-y-scroll hiddenScrollbar"},Cl={class:"w-[50px]"},El={class:"text-white"},Il={class:"w-[150px]"},Bl={class:"text-white"},Sl={class:"w-[50px]"},Nl={class:"text-white"},Dl=["id","onClick"],jl=F(()=>e("span",{class:"standwardLabel"},"搜尋關鍵字管理",-1)),Pl=["value"],Fl={key:0,class:"max-h-[150px] overflow-y-scroll hiddenScrollbar"},Tl={class:"text-white min-w-[200px]"},Ll=["id","onClick"],Al={class:"absolute bottom-0"},Ml={class:"slide w-4/5 mx-auto mt-3 pt-3"},Ol={class:"ml-5 mb-3"},Vl=F(()=>e("span",{class:"text-white"},"請輸入要卡片編號:",-1)),Jl={class:"flex flex-row"},Kl=["onClick"],Ul=["src"],ql={key:0,class:"w-[100%] text-center bg-amber-900 text-white rounded-md"},Gl={key:1,class:"w-[100%] text-center bg-slate-500 text-white rounded-md"},Wl={key:2,class:"w-[100%] text-center bg-yellow-600 text-white rounded-md"},Rl={className:"overlay",id:"overlay"},zl={class:"popup max-[500px]:w-[80%] max-[500px]:min-w-[200px]"};let se=y(null);const Hl={name:"App",components:{Carousel:te,Slide:le,Pagination:de,Navigation:ue},methods:{slideItem:function(k,j){if(k.target.value>j||k.target.value<0)alert("該編號卡片資料沒有找到!!");else{let P=k.target.value;se.value.data.slideTo(P-1)}}},data(){}},Ql=Object.assign(Hl,{setup(k){let j=[],P=[],M=y(1),t=y([]),g=y([]),r=y([]),p=y(1),$="",N="",D=y(null);const C=ne("frontpath");if(C!==""){var S=window.location.href;S.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}E();function E(){A.post("http://localhost:5000/card/get",{get:M.value}).then(u=>{if(console.log(u.data),j=u.data.card,P=u.data.func,u.data=="發生錯誤"){console.log("沒有發現相關資料");return}g.value=JSON.parse(JSON.stringify(P)),r.value=JSON.parse(JSON.stringify(j)),L(1)})}let I=y({});function O(u){M.value=parseInt(u),E()}function V(u){t.value=t.value.filter((n,c)=>c!==u);let l=r.value[p.value-1].tag;r.value[p.value-1].tag=l.filter((n,c)=>c!==u),console.log(r.value[p.value-1])}function J(){var u=parseInt(document.getElementById("tagSelect").value),l={};g.value.forEach(n=>{let c=n.data.find(x=>x.id===u);c!==void 0&&(l=c)}),!(t.value.includes(l)||u===0)&&(t.value.push(l),t.value=t.value.sort((n,c)=>n.id-c.id),r.value[p.value-1].tag.push(u),r.value[p.value-1].tag=r.value[p.value-1].tag.sort((n,c)=>n-c),console.log(j[p.value-1].tag),console.log(r.value[p.value-1].tag))}function K(){let u=r.value[p.value-1].keyword;u===void 0&&(u=[]),u.push(N),console.log(u),r.value[p.value-1].keyword=u,console.log(r.value[p.value-1].keyword),N=""}function q(u){let l=r.value[p.value-1].keyword;l=l.filter((n,c)=>c!==u),r.value[p.value-1].keyword=l,console.log(r.value[p.value-1].keyword)}function G(){if(confirm("將會儲存你所做的所有更改，如果確定覆蓋則按確定"))try{console.log(r.value),console.log(j);let u={getId:M.value,newData:r.value};console.log(u),A.post("http://localhost:5000/card/edit",u).then(l=>{console.log(l),alert(l.data),j=JSON.parse(JSON.stringify(r.value))})}catch(u){console.log(u)}}function L(u){p.value=u,I.value=r.value.find(l=>l.id===p.value),t.value=[],I.value.tag.forEach(l=>{P.forEach(n=>{let c=n.data.find(x=>x.id===l);c!==void 0&&t.value.push(c)})})}function W(u){if($=u.target.value,console.log($),$===""){g.value=P;return}let l=[];P.forEach(n=>{let c=[];if(n.data.forEach(x=>{x.name.includes($)&&c.push(x)}),c.length!==0){console.log(c);let x=n;x.data=c,l.push(x)}}),l.length!==0?g.value=l:g.value=[]}function R(u){N=u.target.value,console.log(N)}function f(){let u=JSON.parse(JSON.stringify(j.find(l=>l.id===p.value)));t.value=[],u.tag.forEach(l=>{P.forEach(n=>{let c=n.data.find(x=>x.id===l);c!==void 0&&t.value.push(c)})}),I.value=u,r.value[p.value-1]=u}function o(u){u.target.parentElement.querySelector("textarea").classList.remove("hidden"),u.target.classList.add("hidden")}function a(u,l,n=void 0){if(console.log(u.key),u.key==="Enter"){switch(l){case"instant":r.value[p.value-1].instantEffect[n]=u.target.value;break;case"round":r.value[p.value-1].roundEffect[n]=u.target.value;break;case"combo":r.value[p.value-1].comboEffect[n]=u.target.value;break}console.log(r.value[p.value-1]),u.target.parentElement.querySelector("span").classList.remove("hidden"),u.target.classList.add("hidden");return}if(u.key,u.key==="Delete")switch(l){case"instant":break;case"round":r.value[p.value-1].roundEffect=r.value[p.value-1].roundEffect.filter((c,x)=>x!==n);break;case"combo":r.value[p.value-1].comboEffect=r.value[p.value-1].comboEffect.filter((c,x)=>x!==n);break}}function v(u){let l=r.value[p.value-1];switch(u){case"round":l.roundEffect.push("回合效果");break;case"instant":l.instantEffect.push("即時效果");break;case"combo":l.comboEffect.push("連動效果");break}}function B(u){let l=r.value[p.value-1];switch(u){case"round":if(l.roundEffect.length===1)break;l.roundEffect=l.roundEffect.filter((n,c)=>c!==l.roundEffect.length-1);break;case"instant":if(l.instantEffect.length===1)break;l.instantEffect=l.instantEffect.filter((n,c)=>c!==l.instantEffect.length-1);break;case"combo":if(l.comboEffect.length===1)break;l.comboEffect=l.comboEffect.filter((n,c)=>c!==l.comboEffect.length-1);break}}function T(){document.getElementById("overlay").style.display="block",D.value.setFunc(g.value)}function U(){document.getElementById("overlay").style.display="none"}return oe("close",U),(u,l)=>(i(),d("div",Kt,[e("div",Ut,[qt,e("div",Gt,[e("button",{class:"addBtn mr-5 w-[100px]",onClick:l[0]||(l[0]=n=>O(1))},"晨曦塔")])]),e("div",Wt,[s(I)!==void 0?(i(),d("div",Rt,[e("div",zt,[e("span",Ht,m(s(I).name),1),e("img",{src:s(C)+s(I).fullimage,alt:"全身圖",class:"max-h-[500px]"},null,8,Qt)]),e("div",Xt,[e("div",null,[e("div",Yt,[Zt,e("button",{class:"addBtn ml-5",onClick:l[1]||(l[1]=n=>v("instant"))},"新增"),e("button",{class:"addBtn ml-5",onClick:l[2]||(l[2]=n=>B("instant"))},"刪除")]),(i(!0),d(h,null,w(s(I).instantEffect,(n,c)=>(i(),d("div",el,[e("span",{class:"text-white font-bold",onDblclick:o},m(n),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:x=>a(x,"instant",c)},m(n),41,tl)]))),256))]),e("div",null,[e("div",ll,[sl,e("button",{class:"addBtn ml-5",onClick:l[3]||(l[3]=n=>v("round"))},"新增"),e("button",{class:"addBtn ml-5",onClick:l[4]||(l[4]=n=>B("round"))},"刪除")]),(i(!0),d(h,null,w(s(I).roundEffect,(n,c)=>(i(),d("div",al,[e("span",{class:"text-white font-bold",onDblclick:o},m(n),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:x=>a(x,"round",c)},m(n),41,nl)]))),256))]),e("div",null,[e("div",ol,[il,e("button",{class:"addBtn ml-5",onClick:l[5]||(l[5]=n=>v("combo"))},"新增"),e("button",{class:"addBtn ml-5",onClick:l[6]||(l[6]=n=>B("combo"))},"新增")]),(i(!0),d(h,null,w(s(I).comboEffect,(n,c)=>(i(),d("div",dl,[e("span",{class:"text-white font-bold",onDblclick:o},m(n),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:x=>a(x,"combo",c)},m(n),41,ul)]))),256))])])])):b("",!0),e("div",cl,[e("div",rl,[pl,e("div",fl,[e("input",{type:"text",value:s($),placeholder:"技能關鍵字",onInput:l[7]||(l[7]=n=>W(n)),class:"colorSelect"},null,40,vl)]),s(g).length!==0?(i(),d("div",ml,[e("select",xl,[_l,(i(!0),d(h,null,w(s(g),n=>(i(),d("optgroup",{label:n.typeName},[(i(!0),d(h,null,w(n.data,c=>(i(),d("option",{value:c.id,class:"bg-amber-900"},m(c.name),9,hl))),256))],8,gl))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:l[8]||(l[8]=n=>J())},"新增")])):(i(),d("div",wl,yl))]),e("div",kl,[e("div",$l,[e("table",null,[e("tbody",null,[(i(!0),d(h,null,w(s(t),(n,c)=>(i(),d("tr",null,[e("td",Cl,[e("span",El,m(n.id),1)]),e("td",Il,[e("span",Bl,m(n.name),1)]),e("td",Sl,[e("span",Nl,[e("button",{class:"removeBtn",id:"btns"+c,onClick:x=>V(c)},"移除",8,Dl)])])]))),256))])])])]),e("div",null,[jl,e("div",null,[e("input",{type:"text",value:s(N),placeholder:"搜尋關鍵字",onInput:l[9]||(l[9]=n=>R(n)),class:"colorSelect"},null,40,Pl),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:l[10]||(l[10]=n=>K())},"新增")]),s(I).keyword!==void 0?(i(),d("div",Fl,[e("table",null,[e("tbody",null,[(i(!0),d(h,null,w(s(I).keyword,(n,c)=>(i(),d("tr",null,[e("td",Tl,[e("span",null,m(n),1)]),e("td",null,[e("button",{class:"removeBtn",id:"btns"+c,onClick:x=>q(c)},"移除",8,Ll)])]))),256))])])])):b("",!0)]),e("div",Al,[e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:l[11]||(l[11]=n=>G())},"儲存"),e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:l[12]||(l[12]=n=>f())},"還原")])])]),e("div",Ml,[e("div",Ol,[Vl,e("div",Jl,[e("input",{type:"number",class:"w-[100px] rounded-md",onChange:l[13]||(l[13]=n=>u.slideItem(n,s(r).length))},null,32),e("button",{class:"addBtn ml-3 px-3",onClick:T},"添加卡片")])]),Q(s(te),{"wrap-around":!0,"items-to-show":5,ref_key:"cardSlide",ref:se},{default:X(()=>[(i(!0),d(h,null,w(s(r),(n,c)=>(i(),ie(s(le),{key:c},{default:X(()=>[e("div",{class:"flex-col [&>span]:block cursor-pointer",onClick:x=>L(n.id)},[e("img",{src:s(C)+n.image,width:"160",alt:"not found"},null,8,Ul),n.rarity===1?(i(),d("span",ql,m(n.id),1)):b("",!0),n.rarity===2?(i(),d("span",Gl,m(n.id),1)):b("",!0),n.rarity===3?(i(),d("span",Wl,m(n.id),1)):b("",!0)],8,Kl)]),_:2},1024))),128))]),_:1},512)]),e("div",Rl,[e("div",zl,[e("div",{className:"close",onClick:U},"✖"),Q(Jt,{ref_key:"popup",ref:D,max:s(r).length+1,func:s(g),onClose:U},null,8,["max","func"])])])]))}}),es=Y(Ql,[["__scopeId","data-v-c7351afc"]]);export{es as default};
