import{_ as Y,j as P,o as s,c as n,b as G,w as X,d as l,a as e,t as _,F as $,f as E,m,n as q,O as Q,P as ce,p as Z,g as ee,i as te,C as re,D as ue,k as pe,x as le,I as me,v as fe}from"./index.ab293d46.js";import{a as O}from"./axios.7738e096.js";import{C as se,S as ne,P as ve,N as _e}from"./carousel.8face52a.js";const C=I=>(Z("data-v-3c270c0c"),I=I(),ee(),I),he={class:"h-[500px] pl-5"},xe={class:"flex flex-row min-w-[500px]",key:"step1"},ge={class:"pl-2 pr-2 w-1/2"},we={class:"flex flex-col"},ye=C(()=>e("span",{class:"text-lg"},"卡片名稱:",-1)),be={class:"mt-3 flex flex-row items-baseline"},ke=C(()=>e("span",{class:"text-lg mr-1"},"卡片編號:",-1)),$e={class:"flex flex-col mt-5"},Ce=C(()=>e("span",{class:"text-lg"},"稀有度:",-1)),Ee=["value"],Ie={class:"flex flex-col mt-5"},Be=C(()=>e("span",{class:"text-lg"},"縮圖:",-1)),Se=["src"],Pe={class:"pl-2 pr-2 w-1/2 flex flex-col justify-between"},Ne={class:"flex flex-col"},je=C(()=>e("span",{class:"text-lg"},"全身圖:",-1)),De=["src"],Fe={key:"step2",class:"flex flex-row min-w-[500px]"},Le={class:"w-1/2 pl-2 pr-2 flex flex-col"},Ke={class:"flex flex-col mt-5"},Oe={class:"flex flex-row mb-1"},Me=C(()=>e("span",{class:"text-lg"},"即時效果:",-1)),Te=["onUpdate:modelValue"],Ae={class:"flex flex-col mt-5"},Je={class:"flex flex-row mb-1"},Ue=C(()=>e("span",{class:"text-lg"},"回合效果:",-1)),Ve=["placeholder","onUpdate:modelValue"],Ge={class:"flex flex-col mt-5"},qe={class:"flex flex-row mb-1"},Re=C(()=>e("span",{class:"text-lg"},"連動效果:",-1)),We=["placeholder","onUpdate:modelValue"],He={class:"w-1/2 pl-2 pr-2 flex flex-col justify-between min-h-[400px]"},ze={class:"flex flex-col"},Qe=C(()=>e("div",null,[e("span",null,"技能標籤")],-1)),Xe={class:"colorSelect w-[150px]",id:"tagSelect2"},Ye=C(()=>e("option",{value:0},_("請選擇"),-1)),Ze=["label"],et=["value"],tt={class:"flex flex-col"},lt={class:"flex flex-row min-w-[500px]",key:"step3"},st={class:"px-2 w-1/2 [&>div]:my-2"},nt={class:"flex flex-row"},at=C(()=>e("div",{class:"w-[120px]"},[e("span",null,"回合累積能量:")],-1)),ot={class:"flex flex-row"},it=C(()=>e("div",{class:"w-[120px]"},[e("span",null,"總儲存能量:")],-1)),dt={class:"flex flex-row"},ct=C(()=>e("div",{class:"w-[120px]"},[e("span",null,"回合消耗能量:")],-1)),rt={class:"flex flex-row"},ut=C(()=>e("div",{class:"w-[120px]"},[e("span",null,"進場能量:")],-1)),pt={class:"w-1/2"},mt={class:"flex flex-col"},ft=C(()=>e("span",null,"卡片關鍵字:",-1)),vt={class:"my-2"},_t=C(()=>e("span",null,"盤面圖:",-1)),ht={class:"spread"},xt=["src"],gt=C(()=>e("div",{class:"my-2"},[e("span",null,"圖片標示位置:"),e("input",{type:"number",class:"selfInput",id:"spreadIndex",min:1})],-1)),wt={class:"min-w-[500px]",key:"step4"},yt={class:"w-5/6 mx-auto mt-5 flex flex-row flex-wrap justify-between mb-5 max-[450px]:justify-center"},bt={class:"w-2/5 min-w-[150px] max-[450px]:w-[100%]"},kt={class:"[&>span]:text-[20px] mb-3 text-center"},$t={key:0,class:"w-[100%] text-center text-amber-900 font-bold"},Ct={key:1,class:"w-[100%] text-center text-slate-500 font-bold"},Et={key:2,class:"w-[100%] text-center text-yellow-600 font-bold"},It={key:0,class:"imgbox1 max-w-[150px] mx-auto"},Bt=["src","alt"],St={key:1,class:"imgbox2 max-w-[150px] mx-auto"},Pt=["src","alt"],Nt={key:2,class:"imgbox3 max-w-[150px] mx-auto"},jt=["src","alt"],Dt={class:"w-1/2 flex flex-col min-w-[150px] ml-2 max-[450px]:ml-0 max-[450px]:w-[100%]"},Ft={class:"flex flex-col mt-5 min-h-[10vh]"},Lt={class:"flex flex-row line"},Kt={key:0,class:"flex bg-amber-900 text-white rounded-md w-1/5 min-w-[100px] justify-center"},Ot=C(()=>e("span",null,"即時效果",-1)),Mt=[Ot],Tt={key:1,class:"flex bg-slate-500 text-white rounded-md w-1/5 min-w-[100px] justify-center"},At=C(()=>e("span",null,"即時效果",-1)),Jt=[At],Ut={key:2,class:"flex bg-yellow-600 text-white rounded-md w-1/5 min-w-[100px] justify-center"},Vt=C(()=>e("span",null,"即時效果",-1)),Gt=[Vt],qt={class:"flex flex-col"},Rt={class:"text-black"},Wt={class:"flex flex-col mt-5 min-h-[20vh]"},Ht={key:0,class:"flex bg-amber-900 text-white rounded-md w-1/5 min-w-[100px] justify-center"},zt=C(()=>e("span",null,"回合效果",-1)),Qt=[zt],Xt={key:1,class:"flex bg-slate-500 text-white rounded-md w-1/5 min-w-[100px] justify-center"},Yt=C(()=>e("span",null,"回合效果",-1)),Zt=[Yt],el={key:2,class:"flex bg-yellow-600 text-white rounded-md w-1/5 min-w-[100px] justify-center"},tl=C(()=>e("span",null,"回合效果",-1)),ll=[tl],sl={class:"flex flex-col"},nl={class:"text-black"},al={class:"flex flex-col mt-5 min-h-[10vh]"},ol={key:0,class:"flex bg-amber-900 text-white rounded-md w-1/5 min-w-[100px] justify-center"},il=C(()=>e("span",null,"連動效果",-1)),dl=[il],cl={key:1,class:"flex bg-slate-500 text-white rounded-md w-1/5 min-w-[100px] justify-center"},rl=C(()=>e("span",null,"連動效果",-1)),ul=[rl],pl={key:2,class:"flex bg-yellow-600 text-white rounded-md w-1/5 min-w-[100px] justify-center"},ml=C(()=>e("span",null,"連動效果",-1)),fl=[ml],vl={class:"flex flex-col"},_l={class:"text-black"},hl={__name:"AddCard",props:["max","func"],emits:["close"],setup(I,{expose:N,emit:b}){let D=I,a=P({}),k=P(1),p=P(null),v=P(null),S=P(null),B=P([]),u=P([]),y=P([""]),w=P([""]),x=P([""]);const K=b;console.log(B.value);function M(f){document.getElementById(f).value=null,document.getElementById(f).click()}async function T(f){let d=document.getElementById(f).files[0];const i=new FileReader;i.onload=h=>{f==="iconInput"?p.value={file:h.target.result,name:d.name,realFile:d}:f==="imageInput"?v.value={file:h.target.result,name:d.name,realFile:d}:f==="spreadInput"&&(S.value={file:h.target.result,name:d.name,realFile:d}),console.log(S.value)},await i.readAsDataURL(d)}function J(f){switch(f){case"combo":w.value.push("");break;case"round":y.value.push("");break;case"instant":x.value.push("");break}}function U(f){switch(f){case"combo":w.value.length>1&&(w.value=w.value.filter((d,i)=>i!==w.value.length-1)),console.log(w.value.length);break;case"round":y.value.length>1&&(y.value=y.value.filter((d,i)=>i!==y.value.length-1)),console.log(y.value.length);break;case"instant":x.value.length>1&&(x.value=x.value.filter((d,i)=>i!==x.value.length-1)),console.log(x.value.length);break}}function W(){console.log(B.value);var f=parseInt(document.getElementById("tagSelect2").value),d={};B.value.forEach(i=>{let h=i.data.find(F=>F.id===f);h!==void 0&&(d=h)}),console.log(f),!(u.value.includes(d)||f===0)&&(u.value.push(d),console.log(u.value),u.value=u.value.sort((i,h)=>i.id-h.id),a.value.tag.push(f),a.value.tag=a.value.tag.sort((i,h)=>i-h),console.log(u.value))}function V(f){f.key==="Enter"&&(a.value.keyword===void 0&&(a.value.keyword=[]),a.value.keyword.push(f.target.value),f.target.value="",console.log(a.value.keyword))}async function A(){if(console.log(k.value),k.value<3){k.value+=1;return}if(k.value===3)if(a.value.PointMax===void 0||a.value.PointConsume===void 0||a.value.PointGet===void 0||a.value.PointEnter===void 0){alert("請輸入對應資料!!");return}else{H(),k.value+=1;return}if(k.value===4){console.log("step4"),k.value+=1;let f=new FormData;f.append("image",p.value.realFile),f.append("oldName",p.value.name.split(".")[0]),f.append("newName",`1_${a.value.id}`),console.log(f.getAll("image"));const d=await O.post("http://localhost:5000/card/icon",f,{headers:{"Content-Type":"multipart/form-data"}});console.log(d.data);let i=new FormData;i.append("image",v.value.realFile),i.append("oldName",v.value.name.split(".")[0]),i.append("newName",`1_${a.value.id}`),console.log(v.value);const h=await O.post("http://localhost:5000/card/image",i,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(h.data),console.log(S),S.value!==null&&S.value!==void 0){console.log("開始上傳盤面");let L=new FormData;L.append("image",S.value.realFile),L.append("oldName",S.value.name.split(".")[0]),L.append("newName",`1_${a.value.id}`),console.log(S.value),await O.post("http://localhost:5000/card/spread",L,{headers:{"Content-Type":"multipart/form-data"}})}let F={series:1,card:a.value};console.log(F),await O.post("http://localhost:5000/card/add",F).then(L=>{console.log(L.data),k.value=1,alert("新卡片已添加"),K("close",""),K("updateCard",L.data)})}}function H(){a.value.id===void 0&&(a.value.id=D.max),a.value.roundEffect=y.value,a.value.instantEffect=x.value,a.value.comboEffect=w.value,a.value.image=`/images/card/icon/1_${a.value.id}.png`,a.value.fullimage=`/images/card/image/1_${a.value.id}.png`,document.getElementById("spreadIndex").value===null&&(a.value.spread={id:parseInt(document.getElementById("spreadIndex").value),image:`/images/card/image/${a.value.id}.png`});let f=[];u.value.forEach(i=>{f.push(parseInt(i.id))}),a.value.tag=f;let d={id:a.value.id,name:a.value.name,rarity:a.value.rarity,image:a.value.image,instantEffect:a.value.instantEffect,roundEffect:a.value.roundEffect,comboEffect:a.value.comboEffect,PointMax:parseInt(a.value.PointMax),PointEnter:parseInt(a.value.PointEnter),PointConsume:parseInt(a.value.PointConsume),PointGet:parseInt(a.value.PointGet),tag:a.value.tag,fullimage:a.value.fullimage,keyword:a.value.keyword,...a.value.spread?{spread:a.value.spread}:{}};a.value=d,console.log(a.value)}function z(f){B.value=f}return N({setFunc:z}),(f,d)=>(s(),n("div",he,[G(ce,{name:"step",tag:"div",class:"flex flex-row"},{default:X(()=>[l(k)===1?(s(),n("div",xe,[e("div",ge,[e("div",we,[ye,e("input",{type:"text",class:"selfInput",placeholder:"卡片名子",onChange:d[0]||(d[0]=i=>l(a).name=i.target.value)},null,32)]),e("div",be,[ke,e("span",null,_(I.max),1)]),e("div",$e,[Ce,(s(),n($,null,E(3,i=>e("div",null,[e("input",{type:"radio",name:"rarity",value:i,onChange:d[1]||(d[1]=h=>l(a).rarity=parseInt(h.target.value))},null,40,Ee),e("span",null,_(i+"星"),1)])),64))]),e("div",Ie,[Be,e("button",{onClick:d[2]||(d[2]=i=>M("iconInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"iconInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:d[3]||(d[3]=()=>T("iconInput"))},null,32),l(p)!==null?(s(),n("img",{key:0,src:l(p).file,alt:"縮圖",class:"max-w-[100px] max-h-[100px]"},null,8,Se)):m("",!0)])]),e("div",Pe,[e("div",Ne,[je,e("button",{onClick:d[4]||(d[4]=i=>M("imageInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"imageInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:d[5]||(d[5]=()=>T("imageInput"))},null,32),l(v)!==null?(s(),n("img",{key:0,src:l(v).file,alt:"縮圖",class:"max-w-[200px] max-h-[300px]"},null,8,De)):m("",!0)]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:A},"下一步")])])])):m("",!0),l(k)===2?(s(),n("div",Fe,[e("div",Le,[e("div",Ke,[e("div",Oe,[Me,e("button",{class:"addBtn ml-3 px-3",onClick:d[6]||(d[6]=i=>J("instant"))},"添加"),l(x).length>1?(s(),n("button",{key:0,class:"addBtn ml-3 px-3",onClick:d[7]||(d[7]=i=>U("instant"))},"刪除")):m("",!0)]),(s(!0),n($,null,E(l(x),(i,h)=>q((s(),n("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:"即使效果","onUpdate:modelValue":F=>l(x)[h]=F},null,8,Te)),[[Q,l(x)[h]]])),256))]),e("div",Ae,[e("div",Je,[Ue,e("button",{class:"addBtn ml-3 px-3",onClick:d[8]||(d[8]=i=>J("round"))},"添加"),l(y).length>1?(s(),n("button",{key:0,class:"addBtn ml-3 px-3",onClick:d[9]||(d[9]=i=>U("round"))},"刪除")):m("",!0)]),(s(!0),n($,null,E(l(y),(i,h)=>q((s(),n("input",{type:"text",class:"selfInput mt-1 mb-1 whitespace-pre-wrap",placeholder:`回合效果${h+1}`,"onUpdate:modelValue":F=>l(y)[h]=F},null,8,Ve)),[[Q,l(y)[h]]])),256))]),e("div",Ge,[e("div",qe,[Re,e("button",{class:"addBtn ml-3 px-3",onClick:d[10]||(d[10]=i=>J("combo"))},"添加"),l(w).length>1?(s(),n("button",{key:0,class:"addBtn ml-3 px-3",onClick:d[11]||(d[11]=i=>U("combo"))},"刪除")):m("",!0)]),(s(!0),n($,null,E(l(w),(i,h)=>q((s(),n("textarea",{class:"selfInput mt-1 mb-1 min-h-[25px] max-h-[50px]",placeholder:`連動效果${h+1}`,"onUpdate:modelValue":F=>l(w)[h]=F},null,8,We)),[[Q,l(w)[h]]])),256))])]),e("div",He,[e("div",ze,[Qe,e("div",null,[e("select",Xe,[Ye,(s(!0),n($,null,E(l(B),i=>(s(),n("optgroup",{label:i.typeName},[(s(!0),n($,null,E(i.data,h=>(s(),n("option",{value:h.id,class:"bg-amber-900"},_(h.name),9,et))),256))],8,Ze))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:d[12]||(d[12]=i=>W())},"新增")]),e("div",tt,[(s(!0),n($,null,E(l(u),i=>(s(),n("span",null,_(i.id+" "+i.name),1))),256))])]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:A},"下一步")])])])):m("",!0),l(k)===3?(s(),n("div",lt,[e("div",st,[e("div",nt,[at,e("input",{type:"number",id:"pointGet",class:"inputNum",min:1,max:8,required:"",onChange:d[13]||(d[13]=i=>l(a).PointGet=i.target.value)},null,32)]),e("div",ot,[it,e("input",{type:"number",id:"pointMax",class:"inputNum",min:1,max:8,required:"",onChange:d[14]||(d[14]=i=>l(a).PointMax=i.target.value)},null,32)]),e("div",dt,[ct,e("input",{type:"number",id:"pointConsume",class:"inputNum",min:1,max:8,required:"",onChange:d[15]||(d[15]=i=>l(a).PointConsume=i.target.value)},null,32)]),e("div",rt,[ut,e("input",{type:"number",id:"pointEnter",class:"inputNum",min:1,max:8,required:"",onChange:d[16]||(d[16]=i=>l(a).PointEnter=i.target.value)},null,32)])]),e("div",pt,[e("div",mt,[ft,e("input",{type:"text",class:"selfInput",placeholder:"輸入完成後按Enter",onKeydown:V},null,32),(s(!0),n($,null,E(l(a).keyword,i=>(s(),n("span",null,_(i),1))),256))]),e("div",vt,[_t,e("button",{onClick:d[17]||(d[17]=i=>M("spreadInput")),class:"max-w-[100px] addBtn px-2"},"上傳"),e("input",{type:"file",id:"spreadInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:d[18]||(d[18]=()=>T("spreadInput"))},null,32),e("div",ht,[l(S)!==null?(s(),n("img",{key:0,src:l(S).file,alt:"盤面圖",class:"w-[240px]"},null,8,xt)):m("",!0)])]),gt,e("div",{class:"mt-2"},[e("button",{class:"addBtn pl-2 pr-2",onClick:A},"下一步")])])])):m("",!0),l(k)===4||l(k)===5?(s(),n("div",wt,[e("div",yt,[e("div",bt,[e("div",kt,[l(a).rarity===1?(s(),n("span",$t,_(l(a).name),1)):m("",!0),l(a).rarity===2?(s(),n("span",Ct,_(l(a).name),1)):m("",!0),l(a).rarity===3?(s(),n("span",Et,_(l(a).name),1)):m("",!0)]),l(a).rarity===1?(s(),n("div",It,[e("img",{src:l(v).file,alt:l(a).name,class:"h-[40vh] min-w-[150px]"},null,8,Bt)])):m("",!0),l(a).rarity===2?(s(),n("div",St,[e("img",{src:l(v).file,alt:l(a).name,class:"h-[40vh] min-w-[150px]"},null,8,Pt)])):m("",!0),l(a).rarity===3?(s(),n("div",Nt,[e("img",{src:l(v).file,alt:l(a).name,class:"h-[40vh] min-w-[150px]"},null,8,jt)])):m("",!0)]),e("div",Dt,[e("div",Ft,[e("div",Lt,[l(a).rarity===1?(s(),n("div",Kt,Mt)):m("",!0),l(a).rarity===2?(s(),n("div",Tt,Jt)):m("",!0),l(a).rarity===3?(s(),n("div",Ut,Gt)):m("",!0)]),e("div",qt,[(s(!0),n($,null,E(l(a).instantEffect,i=>(s(),n("span",Rt,"•"+_(i),1))),256))])]),e("div",Wt,[l(a).rarity===1?(s(),n("div",Ht,Qt)):m("",!0),l(a).rarity===2?(s(),n("div",Xt,Zt)):m("",!0),l(a).rarity===3?(s(),n("div",el,ll)):m("",!0),e("div",sl,[(s(!0),n($,null,E(l(a).roundEffect,i=>(s(),n("span",nl,"•"+_(i),1))),256))])]),e("div",al,[l(a).rarity===1?(s(),n("div",ol,dl)):m("",!0),l(a).rarity===2?(s(),n("div",cl,ul)):m("",!0),l(a).rarity===3?(s(),n("div",pl,fl)):m("",!0),e("div",vl,[(s(!0),n($,null,E(l(a).comboEffect,i=>(s(),n("span",_l,"•"+_(i),1))),256))])])])]),e("div",{class:"w-5/6 mt-5 mx-auto"},[e("button",{class:"addBtn min-w-[100px] ml-2",onClick:A},"儲存")])])):m("",!0)]),_:1})]))}},xl=Y(hl,[["__scopeId","data-v-3c270c0c"]]);const R=I=>(Z("data-v-e1489e1b"),I=I(),ee(),I),gl=R(()=>e("div",{class:"flex-col"},[e("span",{class:"text-amber-800 text-[18px]"},"基本訊息")],-1)),wl={class:"mt-2"},yl={class:"my-2 flex flex-col"},bl=R(()=>e("span",{class:"text-amber-600 text-[16px]"},"名稱",-1)),kl=["value"],$l={class:"my-2"},Cl=R(()=>e("span",{class:"text-amber-600 text-[16px]"},"稀有度",-1)),El=["onClick"],Il={key:0},Bl=["src","alt"],Sl=["src"],Pl={key:1,class:"opacity-60"},Nl=["src","alt"],jl={class:"my-2"},Dl=R(()=>e("span",{class:"text-amber-600 text-[16px]"},"FP能量",-1)),Fl={class:"flex flex-row"},Ll={class:"text-white w-[100px]"},Kl={class:"w-[100px]"},Ol=["value","onChange"],Ml={__name:"EditBasic",props:["card"],emits:["update:card"],setup(I,{emit:N}){let b=I;const D=N,a=te("frontpath");if(a!==""){var k=window.location.href;k.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}let p=re(()=>[{name:"進場FP",mode:"PointEnter",value:b.card.PointEnter},{name:"補充FP",mode:"PointGet",value:b.card.PointGet},{name:"消耗FP",mode:"PointConsume",value:b.card.PointConsume},{name:"最大FP",mode:"PointMax",value:b.card.PointMax}]);function v(y){D("update:card",{...b.card,rarity:y})}function S(){document.getElementById("nameSpan").style.display="none",document.getElementById("nameInput").style.display="block"}function B(y){console.log(y.key),y.key==="Enter"&&(console.log("55555"),b.card.name=y.target.value,document.getElementById("nameSpan").style.display="block",document.getElementById("nameInput").style.display="none")}const u=(y,w)=>{const x=parseInt(y.target.value);p.value.find(K=>K.mode===w).value=x,console.log(p.value),D("update:card",{...b.card,[w]:x})};return(y,w)=>(s(),n($,null,[gl,e("div",wl,[e("div",yl,[bl,e("span",{class:"text-white",onDblclick:w[0]||(w[0]=x=>S()),id:"nameSpan"},_(l(b).card.name),33),e("input",{type:"text",class:"w-[150px] bg-gray-500 text-white",id:"nameInput",style:{display:"none"},value:l(b).card.name,onKeydown:w[1]||(w[1]=x=>B(x))},null,40,kl)]),e("div",$l,[Cl,e("div",null,[(s(),n($,null,E(3,x=>e("button",{class:"max-w-[70px] mr-2 relative inline-block rarity",onClick:K=>v(x)},[l(b).card.rarity===x?(s(),n("div",Il,[e("img",{src:l(a)+`/images/rarity${x}.png`,alt:`rarity${x}`},null,8,Bl),e("img",{src:l(a)+"/images/checked.svg",class:"text-white top-[0px] right-0 absolute"},null,8,Sl)])):(s(),n("div",Pl,[e("img",{src:l(a)+`/images/rarity${x}.png`,alt:`rarity${x}`},null,8,Nl)]))],8,El)),64))])]),e("div",jl,[Dl,(s(!0),n($,null,E(l(p),x=>(s(),n("div",Fl,[e("span",Ll,_(x.name),1),e("div",Kl,[e("input",{type:"number",class:"outline-none w-[40px] bg-inherit text-white border-b-2 text-center",value:x.value,onChange:K=>u(K,x.mode)},null,40,Ol)])]))),256))])])],64))}},Tl=Y(Ml,[["__scopeId","data-v-e1489e1b"]]),Al=e("span",{class:"standwardLabel"},"關鍵字管理",-1),Jl=["value"],Ul={key:0,class:"overflow-y-scroll hiddenScrollbar"},Vl={class:"flex flex-row my-2"},Gl={key:0,class:"text-white min-w-[200px]"},ql={key:1},Rl=["id","onClick"],Wl={__name:"EditKeyword",props:["card"],emits:["update:card"],setup(I,{emit:N}){let b=I,D="";if(te("frontpath")!==""){var k=window.location.href;k.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}function p(B){D=B.target.value}function v(){let B=b.card.keyword;B==null&&(B=[]),B.push(D),console.log(B),D=""}function S(B){let u=b.card.keyword;u=u.filter((y,w)=>w!==B),b.card.keyword=u}return(B,u)=>(s(),n($,null,[Al,e("div",null,[e("input",{type:"text",value:l(D),placeholder:"搜尋關鍵字",onInput:u[0]||(u[0]=y=>p(y)),class:"colorSelect"},null,40,Jl),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:u[1]||(u[1]=y=>v())},"新增")]),l(b).card.keyword!==void 0&&l(b).card.keyword.length!==0?(s(),n("div",Ul,[(s(!0),n($,null,E(l(b).card.keyword,(y,w)=>(s(),n("div",Vl,[y!==""?(s(),n("div",Gl,[e("span",null,_(y),1)])):m("",!0),y!==""?(s(),n("div",ql,[e("button",{class:"removeBtn",id:"btns"+w,onClick:x=>S(w)},"移除",8,Rl)])):m("",!0)]))),256))])):m("",!0)],64))}};const j=I=>(Z("data-v-530de4d7"),I=I(),ee(),I),Hl={class:"main"},zl={class:"w-4/5 mx-auto mb-2"},Ql=j(()=>e("span",{class:"text-white text-xl"},"系列",-1)),Xl={class:"flex flex-row"},Yl={class:"w-4/5 mx-auto flex flex-row justify-evenly"},Zl={key:0,class:"w-1/2 min-h-[500px] flex flex-row"},es={class:"CardImage w-1/2"},ts={class:"text-white font-bold text-xl"},ls=["src"],ss={class:"Details flex flex-col w-1/2 mt-5 [&>div]:mb-5"},ns={class:"flex flex-row"},as=j(()=>e("span",{class:"standwardLabel"},"即時效果",-1)),os={class:"mb-3 flex flex-col"},is=["onKeydown"],ds={class:"flex flex-row"},cs=j(()=>e("span",{class:"standwardLabel"},"回合效果",-1)),rs={class:"mb-3 flex flex-col"},us=["onKeydown"],ps={class:"flex flex-row"},ms=j(()=>e("span",{class:"standwardLabel"},"連動效果",-1)),fs={class:"mb-3 flex flex-col"},vs=["onKeydown"],_s=j(()=>e("span",{class:"text-red-700 text-lg"},"選擇要編輯的項目:",-1)),hs={class:"flex flex-col"},xs=["onClick"],gs=["src"],ws={key:0,class:"text-red-500 text-md"},ys={key:1,class:"text-white text-md"},bs={key:1,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},ks={key:2,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},$s={class:"flex-col"},Cs=j(()=>e("span",{class:"standwardLabel"},"自身技能標籤",-1)),Es={class:"mb-3"},Is=["value"],Bs={key:0},Ss={class:"colorSelect w-[150px]",id:"tagSelect"},Ps=j(()=>e("option",{value:0},_("請選擇"),-1)),Ns=["label"],js=["value"],Ds={key:1},Fs=j(()=>e("span",{class:"text-yellow-500 font-bold text-lg"},"沒有找到匹配技能標籤",-1)),Ls=[Fs],Ks={class:"mb-2 flex-col"},Os={class:"overflow-y-scroll hiddenScrollbar"},Ms={class:"flex flex-col"},Ts={class:"flex flex-row my-1"},As={class:"w-1/5"},Js={class:"text-white"},Us={class:"w-2/5"},Vs={class:"text-white"},Gs={class:"w-2/5"},qs=["id","onClick"],Rs={key:3,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},Ws={key:4,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},Hs=j(()=>e("div",null,[e("span",{class:"text-amber-800 text-[18px]"},"效果敘述")],-1)),zs={class:"my-5"},Qs={class:"flex flex-row"},Xs=j(()=>e("span",{class:"standwardSubLabel"},"即時效果",-1)),Ys={class:"mb-3 flex flex-col"},Zs=["onKeydown"],en={class:"my-5"},tn={class:"flex flex-row my-1"},ln=j(()=>e("span",{class:"standwardSubLabel"},"回合效果",-1)),sn={class:"mb-3 flex flex-col"},nn=["onKeydown"],an={class:"my-5"},on={class:"flex flex-row my-1"},dn=j(()=>e("span",{class:"standwardSubLabel"},"連動效果",-1)),cn={class:"mb-3 flex flex-col"},rn=["onKeydown"],un={key:5,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},pn=j(()=>e("div",null,[e("span",{class:"text-amber-800 text-[18px]"},"刪除卡片")],-1)),mn=j(()=>e("span",{class:"text-white"},"經過此操作後，該筆資料將永久刪除，按下下面按鈕以確認操作",-1)),fn={class:"w-3/5 mx-auto my-3"},vn={class:"slide w-4/5 mx-auto mt-3 pt-3"},_n={class:"ml-5 mb-3"},hn=j(()=>e("span",{class:"text-white"},"請輸入要卡片編號:",-1)),xn={class:"flex flex-row"},gn=["onClick"],wn=["src"],yn={key:0,class:"w-[100%] text-center bg-amber-900 text-white rounded-md"},bn={key:1,class:"w-[100%] text-center bg-slate-500 text-white rounded-md"},kn={key:2,class:"w-[100%] text-center bg-yellow-600 text-white rounded-md"},$n={className:"overlay",id:"overlay"},Cn={class:"popup max-[500px]:w-[80%] max-[500px]:min-w-[200px]"};let ae=P(null);const En={name:"App",components:{Carousel:se,Slide:ne,Pagination:ve,Navigation:_e},methods:{slideItem:function(I,N){if(I.target.value>N||I.target.value<0)alert("該編號卡片資料沒有找到!!");else{let b=I.target.value;ae.value.data.slideTo(b-1)}}},data(){}},In=Object.assign(En,{setup(I){let N=[],b=[],D=P(1),a=P([]),k=P([]),p=P([]),v=P(1),S="",B=P(null),u=P({}),y=P([{name:"基本資訊",mode:"edit_basic"},{name:"效果敘述",mode:"edit_description"},{name:"技能標籤",mode:"edit_tag"},{name:"關鍵字",mode:"edit_keyword"},{name:"圖片管理",mode:"edit_img"},{name:"刪除卡片",mode:"delete"}]),w=P("edit_basic");const x=te("frontpath");if(x!==""){var K=window.location.href;K.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}M();function M(){O.post("http://localhost:5000/card/get",{get:D.value}).then(r=>{if(console.log(r.data),N=r.data.card,b=r.data.func,r.data=="發生錯誤"){console.log("沒有發現相關資料");return}k.value=JSON.parse(JSON.stringify(b)),p.value=JSON.parse(JSON.stringify(N)),V(1)}).catch(r=>{alert("伺服器尚未開啟請稍後再試!!"),window.location=window.location.origin+"/vuepage/"})}function T(r){let o=document.getElementById("series"+r);o.classList.contains("clicked")?o.classList.remove("clicked"):o.classList.add("clicked"),D.value=parseInt(r),M()}function J(r){a.value=a.value.filter((t,c)=>c!==r);let o=p.value.find(t=>t.id===parseInt(v.value)).tag;p.value.find(t=>t.id===parseInt(v.value)).tag=o.filter((t,c)=>c!==r),console.log(p.value.find(t=>t.id===parseInt(v.value)))}function U(){var r=parseInt(document.getElementById("tagSelect").value),o={};k.value.forEach(t=>{let c=t.data.find(g=>g.id===r);c!==void 0&&(o=c)}),!(a.value.includes(o)||r===0)&&(a.value.push(o),a.value=a.value.sort((t,c)=>t.id-c.id),p.value.find(t=>t.id===v.value).tag.push(r),p.value.find(t=>t.id===v.value).tag=p.value.find(t=>t.id===v.value).tag.sort((t,c)=>t-c),console.log(N.find(t=>t.id===v.value).tag),console.log(p.value.find(t=>t.id===v.value).tag))}function W(){if(confirm("將會儲存你所做的所有更改，如果確定覆蓋則按確定"))try{let r={getId:D.value,newData:p.value};console.log(r),O.post("http://localhost:5000/card/edit",r).then(o=>{console.log(o),alert(o.data),N=JSON.parse(JSON.stringify(p.value))})}catch(r){console.log(r)}}function V(r){v.value=r,u.value=p.value.find(o=>o.id===v.value),a.value=[],u.value.tag.forEach(o=>{b.forEach(t=>{let c=t.data.find(g=>g.id===o);c!==void 0&&a.value.push(c)})})}function A(){let r={series:D.value,id:v.value};O.post("http://localhost:5000/card/delete",r).then(o=>{console.log(o),p.value=p.value.filter(t=>t.id!==v.value),console.log(p.value),N=JSON.parse(JSON.stringify(p.value)),V(p.value[0].id),alert("卡片刪除成功!")})}function H(r){if(S=r.target.value,console.log(S),S===""){k.value=b;return}let o=[];b.forEach(t=>{let c=[];if(t.data.forEach(g=>{g.name.includes(S)&&c.push(g)}),c.length!==0){console.log(c);let g=t;g.data=c,o.push(g)}}),o.length!==0?k.value=o:k.value=[]}function z(){let r=N.find(t=>t.id===v.value);if(r==null)return;let o=JSON.parse(JSON.stringify(r));a.value=[],o.tag.forEach(t=>{b.forEach(c=>{let g=c.data.find(de=>de.id===t);g!==void 0&&a.value.push(g)})}),u.value=o,Object.assign(r,o)}function f(r){r.target.parentElement.querySelector("textarea").classList.remove("hidden"),r.target.classList.add("hidden")}function d(r,o,t=void 0){if(console.log(r.key),r.key==="Enter"){switch(o){case"instant":p.value[v.value-1].instantEffect[t]=r.target.value;break;case"round":p.value[v.value-1].roundEffect[t]=r.target.value;break;case"combo":p.value[v.value-1].comboEffect[t]=r.target.value;break}console.log(p.value.find(g=>g.id===v.value)),r.target.parentElement.querySelector("span").classList.remove("hidden"),r.target.classList.add("hidden");return}if(r.key,r.key==="Delete")switch(o){case"instant":break;case"round":p.value.find(c=>c.id===v.value).roundEffect=p.value.find(c=>c.id===v.value).roundEffect.filter((c,g)=>g!==t);break;case"combo":p.value.find(c=>c.id===v.value).comboEffect=p.value.find(c=>c.id===v.value).comboEffect.filter((c,g)=>g!==t);break}}function i(r){let o=p.value.find(t=>t.id===v.value);switch(r){case"round":o.roundEffect.push("回合效果");break;case"instant":o.instantEffect.push("即時效果");break;case"combo":o.comboEffect.push("連動效果");break}}function h(r){let o=p.value.find(t=>t.id===v.value);switch(r){case"round":if(o.roundEffect.length===1)break;o.roundEffect=o.roundEffect.filter((t,c)=>c!==o.roundEffect.length-1);break;case"instant":if(o.instantEffect.length===1)break;o.instantEffect=o.instantEffect.filter((t,c)=>c!==o.instantEffect.length-1);break;case"combo":if(o.comboEffect.length===1)break;o.comboEffect=o.comboEffect.filter((t,c)=>c!==o.comboEffect.length-1);break}}function F(){document.getElementById("overlay").style.display="block",B.value.setFunc(k.value)}function L(){document.getElementById("overlay").style.display="none"}function oe(r){w.value=r}function ie(r){N=r,p.value=JSON.parse(JSON.stringify(N))}return ue(u,(r,o)=>{p.value[r.id-1]=r,console.log(p.value)},{deep:!0}),pe("close",L),(r,o)=>(s(),n("div",Hl,[e("div",zl,[Ql,e("div",Xl,[e("button",{class:"addBtn mr-5 w-[100px]",onClick:o[0]||(o[0]=t=>T(1)),id:"series1"},"晨曦塔"),e("button",{class:"addBtn mr-5 w-[100px]",onClick:o[1]||(o[1]=t=>T(2)),id:"series2"},"測試塔")])]),e("div",Yl,[l(u)!==void 0?(s(),n("div",Zl,[e("div",es,[e("span",ts,_(l(u).name),1),e("img",{src:l(x)+l(u).fullimage,alt:"全身圖",class:"max-h-[500px]"},null,8,ls)]),q(e("div",ss,[e("div",null,[e("div",ns,[as,e("button",{class:"addBtn ml-5",onClick:o[2]||(o[2]=t=>i("instant"))},"新增"),l(u).instantEffect.length>1?(s(),n("button",{key:0,class:"addBtn ml-5",onClick:o[3]||(o[3]=t=>h("instant"))},"刪除")):m("",!0)]),(s(!0),n($,null,E(l(u).instantEffect,(t,c)=>(s(),n("div",os,[e("span",{class:"text-white font-bold",onDblclick:f},_(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:g=>d(g,"instant",c)},_(t),41,is)]))),256))]),e("div",null,[e("div",ds,[cs,e("button",{class:"addBtn ml-5",onClick:o[4]||(o[4]=t=>i("round"))},"新增"),l(u).roundEffect.length>1?(s(),n("button",{key:0,class:"addBtn ml-5",onClick:o[5]||(o[5]=t=>h("round"))},"刪除")):m("",!0)]),(s(!0),n($,null,E(l(u).roundEffect,(t,c)=>(s(),n("div",rs,[e("span",{class:"text-white font-bold",onDblclick:f},_(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:g=>d(g,"round",c)},_(t),41,us)]))),256))]),e("div",null,[e("div",ps,[ms,e("button",{class:"addBtn ml-5",onClick:o[6]||(o[6]=t=>i("combo"))},"新增"),l(u).comboEffect.length>1?(s(),n("button",{key:0,class:"addBtn ml-5",onClick:o[7]||(o[7]=t=>h("combo"))},"刪除")):m("",!0)]),(s(!0),n($,null,E(l(u).comboEffect,(t,c)=>(s(),n("div",fs,[e("span",{class:"text-white font-bold",onDblclick:f},_(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:g=>d(g,"combo",c)},_(t),41,vs)]))),256))])],512),[[fe,!1]]),e("div",null,[_s,e("div",hs,[(s(!0),n($,null,E(l(y),t=>(s(),n("div",{class:"my-2 flex flex-row cursor-pointer",onClick:c=>oe(t.mode)},[e("img",{src:l(x)+"/images/arrow_right.png",width:"20",height:"20"},null,8,gs),t.mode==="delete"?(s(),n("span",ws,_(t.name),1)):(s(),n("span",ys,_(t.name),1))],8,xs))),256))])])])):m("",!0),l(w)=="edit_basic"?(s(),n("div",bs,[G(Tl,{card:l(u),"onUpdate:card":o[8]||(o[8]=t=>le(u)?u.value=t:u=t)},null,8,["card"])])):m("",!0),l(w)=="edit_tag"?(s(),n("div",ks,[e("div",$s,[Cs,e("div",Es,[e("input",{type:"text",value:l(S),placeholder:"技能關鍵字",onInput:o[9]||(o[9]=t=>H(t)),class:"colorSelect"},null,40,Is)]),l(k).length!==0?(s(),n("div",Bs,[e("select",Ss,[Ps,(s(!0),n($,null,E(l(k),t=>(s(),n("optgroup",{label:t.typeName},[(s(!0),n($,null,E(t.data,c=>(s(),n("option",{value:c.id,class:"bg-amber-900"},_(c.name),9,js))),256))],8,Ns))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:o[10]||(o[10]=t=>U())},"新增")])):(s(),n("div",Ds,Ls))]),e("div",Ks,[e("div",Os,[e("div",Ms,[(s(!0),n($,null,E(l(a),(t,c)=>(s(),n("div",Ts,[e("div",As,[e("span",Js,_(t.id),1)]),e("div",Us,[e("span",Vs,_(t.name),1)]),e("div",Gs,[e("button",{class:"removeBtn",id:"btns"+c,onClick:g=>J(c)},"移除",8,qs)])]))),256))])])])])):m("",!0),l(w)=="edit_keyword"?(s(),n("div",Rs,[G(Wl,{card:l(u),"onUpdate:card":o[11]||(o[11]=t=>le(u)?u.value=t:u=t)},null,8,["card"])])):m("",!0),l(w)=="edit_description"?(s(),n("div",Ws,[Hs,e("div",zs,[e("div",Qs,[Xs,e("button",{class:"addBtn ml-5",onClick:o[12]||(o[12]=t=>i("instant"))},"新增"),l(u).instantEffect.length>1?(s(),n("button",{key:0,class:"addBtn ml-5",onClick:o[13]||(o[13]=t=>h("instant"))},"刪除")):m("",!0)]),(s(!0),n($,null,E(l(u).instantEffect,(t,c)=>(s(),n("div",Ys,[e("span",{class:"text-white font-bold",onDblclick:f},_(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:g=>d(g,"instant",c)},_(t),41,Zs)]))),256))]),e("div",en,[e("div",tn,[ln,e("button",{class:"addBtn ml-5",onClick:o[14]||(o[14]=t=>i("round"))},"新增"),l(u).roundEffect.length>1?(s(),n("button",{key:0,class:"addBtn ml-5",onClick:o[15]||(o[15]=t=>h("round"))},"刪除")):m("",!0)]),(s(!0),n($,null,E(l(u).roundEffect,(t,c)=>(s(),n("div",sn,[e("span",{class:"text-white font-bold",onDblclick:f},_(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:g=>d(g,"round",c)},_(t),41,nn)]))),256))]),e("div",an,[e("div",on,[dn,e("button",{class:"addBtn ml-5",onClick:o[16]||(o[16]=t=>i("combo"))},"新增"),l(u).comboEffect.length>1?(s(),n("button",{key:0,class:"addBtn ml-5",onClick:o[17]||(o[17]=t=>h("combo"))},"刪除")):m("",!0)]),(s(!0),n($,null,E(l(u).comboEffect,(t,c)=>(s(),n("div",cn,[e("span",{class:"text-white font-bold",onDblclick:f},_(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:g=>d(g,"combo",c)},_(t),41,rn)]))),256))])])):m("",!0),l(w)=="delete"?(s(),n("div",un,[pn,e("div",{class:"flex flex-col mt-2 justify-start"},[mn,e("button",{class:"removeBtn w-[100px]",onClick:A},"確認刪除")])])):m("",!0)]),e("div",fn,[e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:o[18]||(o[18]=t=>W())},"儲存"),e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:o[19]||(o[19]=t=>z())},"還原")]),e("div",vn,[e("div",_n,[hn,e("div",xn,[e("input",{type:"number",class:"w-[100px] rounded-md text-center",onChange:o[20]||(o[20]=t=>r.slideItem(t,l(p).length))},null,32),e("button",{class:"addBtn ml-3 px-3",onClick:F},"添加卡片")])]),G(l(se),{"wrap-around":!0,"items-to-show":5,ref_key:"cardSlide",ref:ae},{default:X(()=>[(s(!0),n($,null,E(l(p),(t,c)=>(s(),me(l(ne),{key:c},{default:X(()=>[e("div",{class:"flex-col [&>span]:block cursor-pointer",onClick:g=>V(t.id)},[e("img",{src:l(x)+t.image,width:"160",alt:"not found"},null,8,wn),t.rarity===1?(s(),n("span",yn,_(t.id),1)):m("",!0),t.rarity===2?(s(),n("span",bn,_(t.id),1)):m("",!0),t.rarity===3?(s(),n("span",kn,_(t.id),1)):m("",!0)],8,gn)]),_:2},1024))),128))]),_:1},512)]),e("div",$n,[e("div",Cn,[e("div",{className:"close",onClick:L},"✖"),G(xl,{ref_key:"popup",ref:B,max:l(p).length+1,func:l(k),onClose:L,onUpdateCard:ie},null,8,["max","func"])])])]))}}),Nn=Y(In,[["__scopeId","data-v-530de4d7"]]);export{Nn as default};
