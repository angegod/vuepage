import{_ as Y,j as B,o as n,c as a,b as G,w as X,d as l,a as e,F as k,f as $,t as v,m as x,n as R,C as Q,T as de,p as Z,g as ee,i as te,D as ce,E as ue,k as re,x as le,G as pe,v as fe}from"./index.1c71341d.js";import{a as U}from"./axios.1779699b.js";import{C as se,S as ne,P as me,N as ve}from"./carousel.9aedf428.js";const S=E=>(Z("data-v-09b49dac"),E=E(),ee(),E),_e={class:"h-[500px] pl-5"},xe={class:"flex flex-row min-w-[500px]",key:"step1"},he={class:"pl-2 pr-2 w-1/2"},ge={class:"flex flex-col"},we=S(()=>e("span",{class:"text-lg"},"卡片名稱:",-1)),be={class:"mt-3 flex flex-row"},ye=S(()=>e("span",{class:"text-lg mr-1"},"卡片編號:",-1)),ke=["value"],$e={class:"flex flex-col mt-5"},Ce=S(()=>e("span",{class:"text-lg"},"稀有度:",-1)),Ee=["value"],Ie={class:"flex flex-col mt-5"},Be=S(()=>e("span",{class:"text-lg"},"縮圖:",-1)),Se=["src"],Pe={class:"pl-2 pr-2 w-1/2 flex flex-col justify-between"},Ne={class:"flex flex-col"},De=S(()=>e("span",{class:"text-lg"},"全身圖:",-1)),Fe=["src"],je={key:"step2",class:"flex flex-row min-w-[500px]"},Le={class:"w-1/2 pl-2 pr-2 flex flex-col"},Ke={class:"flex flex-col mt-5"},Me={class:"flex flex-row mb-1"},Te=S(()=>e("span",{class:"text-lg"},"即時效果:",-1)),Ae=["onUpdate:modelValue"],Oe={class:"flex flex-col mt-5"},Ue={class:"flex flex-row mb-1"},Je=S(()=>e("span",{class:"text-lg"},"回合效果:",-1)),Ve=["placeholder","onUpdate:modelValue"],Ge={class:"flex flex-col mt-5"},qe={class:"flex flex-row mb-1"},Re=S(()=>e("span",{class:"text-lg"},"連動效果:",-1)),We=["placeholder","onUpdate:modelValue"],He={class:"w-1/2 pl-2 pr-2 flex flex-col justify-between min-h-[400px]"},ze={class:"flex flex-col"},Qe=S(()=>e("div",null,[e("span",null,"技能標籤")],-1)),Xe={class:"colorSelect w-[150px]",id:"tagSelect2"},Ye=S(()=>e("option",{value:0},v("請選擇"),-1)),Ze=["label"],et=["value"],tt={class:"flex flex-col"},lt={class:"flex flex-row min-w-[500px]",key:"step3"},st={class:"px-2 w-1/2 [&>div]:my-2"},nt={class:"flex flex-row"},at=S(()=>e("div",{class:"w-[120px]"},[e("span",null,"回合累積能量:")],-1)),ot={class:"flex flex-row"},it=S(()=>e("div",{class:"w-[120px]"},[e("span",null,"總儲存能量:")],-1)),dt={class:"flex flex-row"},ct=S(()=>e("div",{class:"w-[120px]"},[e("span",null,"回合消耗能量:")],-1)),ut={class:"flex flex-row"},rt=S(()=>e("div",{class:"w-[120px]"},[e("span",null,"進場能量:")],-1)),pt={class:"w-1/2"},ft={class:"flex flex-col"},mt=S(()=>e("span",null,"卡片關鍵字:",-1)),vt={class:"my-2"},_t=S(()=>e("span",null,"盤面圖:",-1)),xt={class:"spread"},ht=["src"],gt=S(()=>e("div",{class:"my-2"},[e("span",null,"圖片標示位置:"),e("input",{type:"number",class:"selfInput",id:"spreadIndex",min:1})],-1)),wt={class:"min-w-[500px]",key:"step4"},bt={class:"w-5/6 mx-auto mt-5 flex flex-row flex-wrap justify-between mb-5 max-[450px]:justify-center"},yt={class:"w-2/5 min-w-[150px] max-[450px]:w-[100%]"},kt={class:"[&>span]:text-[20px] mb-3 text-center"},$t={key:0,class:"w-[100%] text-center text-amber-900 font-bold"},Ct={key:1,class:"w-[100%] text-center text-slate-500 font-bold"},Et={key:2,class:"w-[100%] text-center text-yellow-600 font-bold"},It={key:0,class:"imgbox1 max-w-[150px] mx-auto"},Bt=["src","alt"],St={key:1,class:"imgbox2 max-w-[150px] mx-auto"},Pt=["src","alt"],Nt={key:2,class:"imgbox3 max-w-[150px] mx-auto"},Dt=["src","alt"],Ft={class:"w-1/2 flex flex-col min-w-[150px] ml-2 max-[450px]:ml-0 max-[450px]:w-[100%]"},jt={class:"flex flex-col mt-5 min-h-[10vh]"},Lt=S(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"即時效果")])],-1)),Kt={class:"flex flex-col"},Mt={class:"text-black"},Tt={class:"flex flex-col mt-5 min-h-[20vh]"},At=S(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"回合效果")])],-1)),Ot={class:"flex flex-col"},Ut={class:"text-black"},Jt={class:"flex flex-col mt-5 min-h-[10vh]"},Vt=S(()=>e("div",{class:"flex flex-row line"},[e("div",{class:"flex bg-blue-400 text-white rounded-md w-1/5 min-w-[100px] justify-center"},[e("span",null,"連動效果")])],-1)),Gt={class:"flex flex-col"},qt={class:"text-black"},Rt={__name:"AddCard",props:["max","func"],emits:["close"],setup(E,{expose:N,emit:y}){let D=E,o=B({}),C=B(1),p=B(null),m=B(null),P=B(null),I=B([]),r=B([]),g=B([""]),w=B([""]),_=B([""]);const L=y;console.log(I.value);function T(f){document.getElementById(f).value=null,document.getElementById(f).click()}async function A(f){let d=document.getElementById(f).files[0];const i=new FileReader;i.onload=b=>{f==="iconInput"?p.value={file:b.target.result,name:d.name,realFile:d}:f==="imageInput"?m.value={file:b.target.result,name:d.name,realFile:d}:f==="spreadInput"&&(P.value={file:b.target.result,name:d.name,realFile:d}),console.log(P.value)},await i.readAsDataURL(d)}function J(f){switch(f){case"combo":w.value.push("");break;case"round":g.value.push("");break;case"instant":_.value.push("");break}}function V(f){switch(f){case"combo":w.value.length>1&&(w.value=w.value.filter((d,i)=>i!==w.value.length-1)),console.log(w.value.length);break;case"round":g.value.length>1&&(g.value=g.value.filter((d,i)=>i!==g.value.length-1)),console.log(g.value.length);break;case"instant":_.value.length>1&&(_.value=_.value.filter((d,i)=>i!==_.value.length-1)),console.log(_.value.length);break}}function H(){console.log(I.value);var f=parseInt(document.getElementById("tagSelect2").value),d={};I.value.forEach(i=>{let b=i.data.find(F=>F.id===f);b!==void 0&&(d=b)}),console.log(f),!(r.value.includes(d)||f===0)&&(r.value.push(d),console.log(r.value),r.value=r.value.sort((i,b)=>i.id-b.id),o.value.tag.push(f),o.value.tag=o.value.tag.sort((i,b)=>i-b),console.log(r.value))}function q(f){f.key==="Enter"&&(o.value.keyword===void 0&&(o.value.keyword=[]),o.value.keyword.push(f.target.value),f.target.value="")}async function O(){if(console.log(C.value),C.value===3&&(o.value.PointMax===void 0||o.value.PointConsume===void 0||o.value.PointGet===void 0||o.value.PointEnter===void 0)){alert("請輸入對應資料!!");return}if(C.value+=1,C.value===4&&(console.log(o.value),z()),C.value===5){let f=new FormData;f.append("image",p.value.realFile),f.append("oldName",p.value.name.split(".")[0]),f.append("newName",`1_${o.value.id}`),console.log(f.getAll("image"));const d=await U.post("http://localhost:5000/card/icon",f,{headers:{"Content-Type":"multipart/form-data"}});console.log(d.data);let i=new FormData;i.append("image",m.value.realFile),i.append("oldName",m.value.name.split(".")[0]),i.append("newName",`1_${o.value.id}`),console.log(m.value);const b=await U.post("http://localhost:5000/card/image",i,{headers:{"Content-Type":"multipart/form-data"}});if(console.log(b.data),P.value!==null||P.value!==void 0){console.log("開始上傳盤面");let K=new FormData;K.append("image",P.value.realFile),K.append("oldName",P.value.name.split(".")[0]),K.append("newName",`1_${o.value.id}`),console.log(P.value),await U.post("http://localhost:5000/card/spread",K,{headers:{"Content-Type":"multipart/form-data"}})}let F={series:1,card:o.value};await U.post("http://localhost:5000/card/add",F).then(K=>{console.log(K.data),C.value=1,alert("新卡片已添加"),L("close",""),L("updateCard",K.data)})}}function z(){o.value.id===void 0&&(o.value.id=D.max),o.value.roundEffect=g.value,o.value.instantEffect=_.value,o.value.comboEffect=w.value,o.value.image=`/images/card/icon/1_${o.value.id}.png`,o.value.fullimage=`/images/card/image/1_${o.value.id}.png`,o.value.spread={id:parseInt(document.getElementById("spreadIndex").value),image:`/images/card/image/${o.value.id}.png`};let f=[];r.value.forEach(i=>{f.push(parseInt(i.id))}),o.value.tag=f;let d={id:o.value.id,name:o.value.name,rarity:o.value.rarity,image:o.value.image,instantEffect:o.value.instantEffect,roundEffect:o.value.roundEffect,comboEffect:o.value.comboEffect,PointMax:parseInt(o.value.PointMax),PointEnter:parseInt(o.value.PointEnter),PointConsume:parseInt(o.value.PointConsume),PointGet:parseInt(o.value.PointGet),tag:o.value.tag,fullimage:o.value.fullimage,keyword:o.value.keyword,spread:o.value.spread};o.value=d,console.log(o.value)}function M(f){I.value=f}return N({setFunc:M}),(f,d)=>(n(),a("div",_e,[G(de,{name:"step",tag:"div",class:"flex flex-row"},{default:X(()=>[l(C)===1?(n(),a("div",xe,[e("div",he,[e("div",ge,[we,e("input",{type:"text",class:"selfInput",placeholder:"卡片名子",onChange:d[0]||(d[0]=i=>l(o).name=i.target.value)},null,32)]),e("div",be,[ye,e("input",{type:"number",class:"inputNum",readonly:"",value:E.max,onChange:d[1]||(d[1]=i=>l(o).id=parseInt(i.target.value))},null,40,ke)]),e("div",$e,[Ce,(n(),a(k,null,$(3,i=>e("div",null,[e("input",{type:"radio",name:"rarity",value:i,onChange:d[2]||(d[2]=b=>l(o).rarity=parseInt(b.target.value))},null,40,Ee),e("span",null,v(i+"星"),1)])),64))]),e("div",Ie,[Be,e("button",{onClick:d[3]||(d[3]=i=>T("iconInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"iconInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:d[4]||(d[4]=()=>A("iconInput"))},null,32),l(p)!==null?(n(),a("img",{key:0,src:l(p).file,alt:"縮圖",class:"max-w-[100px] max-h-[100px]"},null,8,Se)):x("",!0)])]),e("div",Pe,[e("div",Ne,[De,e("button",{onClick:d[5]||(d[5]=i=>T("imageInput")),class:"max-w-[100px] addBtn"},"上傳"),e("input",{type:"file",id:"imageInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:d[6]||(d[6]=()=>A("imageInput"))},null,32),l(m)!==null?(n(),a("img",{key:0,src:l(m).file,alt:"縮圖",class:"max-w-[200px] max-h-[300px]"},null,8,Fe)):x("",!0)]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:O},"下一步")])])])):x("",!0),l(C)===2?(n(),a("div",je,[e("div",Le,[e("div",Ke,[e("div",Me,[Te,e("button",{class:"addBtn ml-3 px-3",onClick:d[7]||(d[7]=i=>J("instant"))},"添加"),l(_).length>1?(n(),a("button",{key:0,class:"addBtn ml-3 px-3",onClick:d[8]||(d[8]=i=>V("instant"))},"刪除")):x("",!0)]),(n(!0),a(k,null,$(l(_),(i,b)=>R((n(),a("input",{type:"text",class:"selfInput mt-1 mb-1",placeholder:"即使效果","onUpdate:modelValue":F=>l(_)[b]=F},null,8,Ae)),[[Q,l(_)[b]]])),256))]),e("div",Oe,[e("div",Ue,[Je,e("button",{class:"addBtn ml-3 px-3",onClick:d[9]||(d[9]=i=>J("round"))},"添加"),l(g).length>1?(n(),a("button",{key:0,class:"addBtn ml-3 px-3",onClick:d[10]||(d[10]=i=>V("round"))},"刪除")):x("",!0)]),(n(!0),a(k,null,$(l(g),(i,b)=>R((n(),a("input",{type:"text",class:"selfInput mt-1 mb-1 whitespace-pre-wrap",placeholder:`回合效果${b+1}`,"onUpdate:modelValue":F=>l(g)[b]=F},null,8,Ve)),[[Q,l(g)[b]]])),256))]),e("div",Ge,[e("div",qe,[Re,e("button",{class:"addBtn ml-3 px-3",onClick:d[11]||(d[11]=i=>J("combo"))},"添加"),l(w).length>1?(n(),a("button",{key:0,class:"addBtn ml-3 px-3",onClick:d[12]||(d[12]=i=>V("combo"))},"刪除")):x("",!0)]),(n(!0),a(k,null,$(l(w),(i,b)=>R((n(),a("textarea",{class:"selfInput mt-1 mb-1",placeholder:`連動效果${b+1}`,"onUpdate:modelValue":F=>l(w)[b]=F},null,8,We)),[[Q,l(w)[b]]])),256))])]),e("div",He,[e("div",ze,[Qe,e("div",null,[e("select",Xe,[Ye,(n(!0),a(k,null,$(l(I),i=>(n(),a("optgroup",{label:i.typeName},[(n(!0),a(k,null,$(i.data,b=>(n(),a("option",{value:b.id,class:"bg-amber-900"},v(b.name),9,et))),256))],8,Ze))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:d[13]||(d[13]=i=>H())},"新增")]),e("div",tt,[(n(!0),a(k,null,$(l(r),i=>(n(),a("span",null,v(i.id+" "+i.name),1))),256))])]),e("div",null,[e("button",{class:"addBtn pl-2 pr-2",onClick:O},"下一步")])])])):x("",!0),l(C)===3?(n(),a("div",lt,[e("div",st,[e("div",nt,[at,e("input",{type:"number",id:"pointGet",class:"inputNum",min:1,max:8,required:"",onChange:d[14]||(d[14]=i=>l(o).PointGet=i.target.value)},null,32)]),e("div",ot,[it,e("input",{type:"number",id:"pointMax",class:"inputNum",min:1,max:8,required:"",onChange:d[15]||(d[15]=i=>l(o).PointMax=i.target.value)},null,32)]),e("div",dt,[ct,e("input",{type:"number",id:"pointConsume",class:"inputNum",min:1,max:8,required:"",onChange:d[16]||(d[16]=i=>l(o).PointConsume=i.target.value)},null,32)]),e("div",ut,[rt,e("input",{type:"number",id:"pointEnter",class:"inputNum",min:1,max:8,required:"",onChange:d[17]||(d[17]=i=>l(o).PointEnter=i.target.value)},null,32)])]),e("div",pt,[e("div",ft,[mt,e("input",{type:"text",class:"selfInput",placeholder:"輸入完成後按Enter",onKeydown:q},null,32),(n(!0),a(k,null,$(l(o).keyword,i=>(n(),a("span",null,v(i),1))),256))]),e("div",vt,[_t,e("button",{onClick:d[18]||(d[18]=i=>T("spreadInput")),class:"max-w-[100px] addBtn px-2"},"上傳"),e("input",{type:"file",id:"spreadInput",class:"hidden",accept:"image/jpeg, image/png, image/jpg",onChange:d[19]||(d[19]=()=>A("spreadInput"))},null,32),e("div",xt,[l(P)!==null?(n(),a("img",{key:0,src:l(P).file,alt:"盤面圖",class:"w-[240px]"},null,8,ht)):x("",!0)])]),gt,e("div",{class:"mt-2"},[e("button",{class:"addBtn pl-2 pr-2",onClick:O},"下一步")])])])):x("",!0),l(C)===4?(n(),a("div",wt,[e("div",bt,[e("div",yt,[e("div",kt,[l(o).rarity===1?(n(),a("span",$t,v(l(o).name),1)):x("",!0),l(o).rarity===2?(n(),a("span",Ct,v(l(o).name),1)):x("",!0),l(o).rarity===3?(n(),a("span",Et,v(l(o).name),1)):x("",!0)]),l(o).rarity===1?(n(),a("div",It,[e("img",{src:l(m).file,alt:l(o).name,class:"h-[40vh] min-w-[150px]"},null,8,Bt)])):x("",!0),l(o).rarity===2?(n(),a("div",St,[e("img",{src:l(m).file,alt:l(o).name,class:"h-[40vh] min-w-[150px]"},null,8,Pt)])):x("",!0),l(o).rarity===3?(n(),a("div",Nt,[e("img",{src:l(m).file,alt:l(o).name,class:"h-[40vh] min-w-[150px]"},null,8,Dt)])):x("",!0)]),e("div",Ft,[e("div",jt,[Lt,e("div",Kt,[(n(!0),a(k,null,$(l(o).instantEffect,i=>(n(),a("span",Mt,"•"+v(i),1))),256))])]),e("div",Tt,[At,e("div",Ot,[(n(!0),a(k,null,$(l(o).roundEffect,i=>(n(),a("span",Ut,"•"+v(i),1))),256))])]),e("div",Jt,[Vt,e("div",Gt,[(n(!0),a(k,null,$(l(o).comboEffect,i=>(n(),a("span",qt,"•"+v(i),1))),256))])])])]),e("div",{class:"w-5/6 mt-5 mx-auto"},[e("button",{class:"addBtn min-w-[100px] ml-2",onClick:O},"儲存")])])):x("",!0)]),_:1})]))}},Wt=Y(Rt,[["__scopeId","data-v-09b49dac"]]);const W=E=>(Z("data-v-e1489e1b"),E=E(),ee(),E),Ht=W(()=>e("div",{class:"flex-col"},[e("span",{class:"text-amber-800 text-[18px]"},"基本訊息")],-1)),zt={class:"mt-2"},Qt={class:"my-2 flex flex-col"},Xt=W(()=>e("span",{class:"text-amber-600 text-[16px]"},"名稱",-1)),Yt=["value"],Zt={class:"my-2"},el=W(()=>e("span",{class:"text-amber-600 text-[16px]"},"稀有度",-1)),tl=["onClick"],ll={key:0},sl=["src","alt"],nl=["src"],al={key:1,class:"opacity-60"},ol=["src","alt"],il={class:"my-2"},dl=W(()=>e("span",{class:"text-amber-600 text-[16px]"},"FP能量",-1)),cl={class:"flex flex-row"},ul={class:"text-white w-[100px]"},rl={class:"w-[100px]"},pl=["value","onChange"],fl={__name:"EditBasic",props:["card"],emits:["update:card"],setup(E,{emit:N}){let y=E;const D=N,o=te("frontpath");if(o!==""){var C=window.location.href;C.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}let p=ce(()=>[{name:"進場FP",mode:"PointEnter",value:y.card.PointEnter},{name:"補充FP",mode:"PointGet",value:y.card.PointGet},{name:"消耗FP",mode:"PointConsume",value:y.card.PointConsume},{name:"最大FP",mode:"PointMax",value:y.card.PointMax}]);function m(g){D("update:card",{...y.card,rarity:g})}function P(){document.getElementById("nameSpan").style.display="none",document.getElementById("nameInput").style.display="block"}function I(g){console.log(g.key),g.key==="Enter"&&(console.log("55555"),y.card.name=g.target.value,document.getElementById("nameSpan").style.display="block",document.getElementById("nameInput").style.display="none")}const r=(g,w)=>{const _=parseInt(g.target.value);p.value.find(L=>L.mode===w).value=_,console.log(p.value),D("update:card",{...y.card,[w]:_})};return(g,w)=>(n(),a(k,null,[Ht,e("div",zt,[e("div",Qt,[Xt,e("span",{class:"text-white",onDblclick:w[0]||(w[0]=_=>P()),id:"nameSpan"},v(l(y).card.name),33),e("input",{type:"text",class:"w-[150px] bg-gray-500 text-white",id:"nameInput",style:{display:"none"},value:l(y).card.name,onKeydown:w[1]||(w[1]=_=>I(_))},null,40,Yt)]),e("div",Zt,[el,e("div",null,[(n(),a(k,null,$(3,_=>e("button",{class:"max-w-[70px] mr-2 relative inline-block rarity",onClick:L=>m(_)},[l(y).card.rarity===_?(n(),a("div",ll,[e("img",{src:l(o)+`/images/rarity${_}.png`,alt:`rarity${_}`},null,8,sl),e("img",{src:l(o)+"/images/checked.svg",class:"text-white top-[0px] right-0 absolute"},null,8,nl)])):(n(),a("div",al,[e("img",{src:l(o)+`/images/rarity${_}.png`,alt:`rarity${_}`},null,8,ol)]))],8,tl)),64))])]),e("div",il,[dl,(n(!0),a(k,null,$(l(p),_=>(n(),a("div",cl,[e("span",ul,v(_.name),1),e("div",rl,[e("input",{type:"number",class:"outline-none w-[40px] bg-inherit text-white border-b-2 text-center",value:_.value,onChange:L=>r(L,_.mode)},null,40,pl)])]))),256))])])],64))}},ml=Y(fl,[["__scopeId","data-v-e1489e1b"]]),vl=e("span",{class:"standwardLabel"},"關鍵字管理",-1),_l=["value"],xl={key:0,class:"overflow-y-scroll hiddenScrollbar"},hl={class:"flex flex-row my-2"},gl={key:0,class:"text-white min-w-[200px]"},wl={key:1},bl=["id","onClick"],yl={__name:"EditKeyword",props:["card"],emits:["update:card"],setup(E,{emit:N}){let y=E,D="";if(te("frontpath")!==""){var C=window.location.href;C.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}function p(I){D=I.target.value}function m(){let I=y.card.keyword;I==null&&(I=[]),I.push(D),console.log(I),D=""}function P(I){let r=y.card.keyword;r=r.filter((g,w)=>w!==I),y.card.keyword=r}return(I,r)=>(n(),a(k,null,[vl,e("div",null,[e("input",{type:"text",value:l(D),placeholder:"搜尋關鍵字",onInput:r[0]||(r[0]=g=>p(g)),class:"colorSelect"},null,40,_l),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:r[1]||(r[1]=g=>m())},"新增")]),l(y).card.keyword!==void 0&&l(y).card.keyword.length!==0?(n(),a("div",xl,[(n(!0),a(k,null,$(l(y).card.keyword,(g,w)=>(n(),a("div",hl,[g!==""?(n(),a("div",gl,[e("span",null,v(g),1)])):x("",!0),g!==""?(n(),a("div",wl,[e("button",{class:"removeBtn",id:"btns"+w,onClick:_=>P(w)},"移除",8,bl)])):x("",!0)]))),256))])):x("",!0)],64))}};const j=E=>(Z("data-v-cc80033e"),E=E(),ee(),E),kl={class:"main"},$l={class:"w-4/5 mx-auto mb-2"},Cl=j(()=>e("span",{class:"text-white text-xl"},"系列",-1)),El={class:"flex flex-row"},Il={class:"w-4/5 mx-auto flex flex-row justify-evenly"},Bl={key:0,class:"w-1/2 min-h-[500px] flex flex-row"},Sl={class:"CardImage w-1/2"},Pl={class:"text-white font-bold text-xl"},Nl=["src"],Dl={class:"Details flex flex-col w-1/2 mt-5 [&>div]:mb-5"},Fl={class:"flex flex-row"},jl=j(()=>e("span",{class:"standwardLabel"},"即時效果",-1)),Ll={class:"mb-3 flex flex-col"},Kl=["onKeydown"],Ml={class:"flex flex-row"},Tl=j(()=>e("span",{class:"standwardLabel"},"回合效果",-1)),Al={class:"mb-3 flex flex-col"},Ol=["onKeydown"],Ul={class:"flex flex-row"},Jl=j(()=>e("span",{class:"standwardLabel"},"連動效果",-1)),Vl={class:"mb-3 flex flex-col"},Gl=["onKeydown"],ql=j(()=>e("span",{class:"text-red-700 text-lg"},"選擇要編輯的項目:",-1)),Rl={class:"flex flex-col"},Wl=["onClick"],Hl=["src"],zl={class:"text-white text-md"},Ql={key:1,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},Xl={key:2,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},Yl={class:"flex-col"},Zl=j(()=>e("span",{class:"standwardLabel"},"自身技能標籤",-1)),es={class:"mb-3"},ts=["value"],ls={key:0},ss={class:"colorSelect w-[150px]",id:"tagSelect"},ns=j(()=>e("option",{value:0},v("請選擇"),-1)),as=["label"],os=["value"],is={key:1},ds=j(()=>e("span",{class:"text-yellow-500 font-bold text-lg"},"沒有找到匹配技能標籤",-1)),cs=[ds],us={class:"mb-2 flex-col"},rs={class:"overflow-y-scroll hiddenScrollbar"},ps={class:"flex flex-col"},fs={class:"flex flex-row my-1"},ms={class:"w-1/5"},vs={class:"text-white"},_s={class:"w-2/5"},xs={class:"text-white"},hs={class:"w-2/5"},gs=["id","onClick"],ws={key:3,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},bs={key:4,class:"w-2/5 pl-3 right mt-5 h-[500px] relative"},ys=j(()=>e("div",null,[e("span",{class:"text-amber-800 text-[18px]"},"效果敘述")],-1)),ks={class:"my-5"},$s={class:"flex flex-row"},Cs=j(()=>e("span",{class:"standwardSubLabel"},"即時效果",-1)),Es={class:"mb-3 flex flex-col"},Is=["onKeydown"],Bs={class:"my-5"},Ss={class:"flex flex-row my-1"},Ps=j(()=>e("span",{class:"standwardSubLabel"},"回合效果",-1)),Ns={class:"mb-3 flex flex-col"},Ds=["onKeydown"],Fs={class:"my-5"},js={class:"flex flex-row my-1"},Ls=j(()=>e("span",{class:"standwardSubLabel"},"連動效果",-1)),Ks={class:"mb-3 flex flex-col"},Ms=["onKeydown"],Ts={class:"w-3/5 mx-auto my-3"},As={class:"slide w-4/5 mx-auto mt-3 pt-3"},Os={class:"ml-5 mb-3"},Us=j(()=>e("span",{class:"text-white"},"請輸入要卡片編號:",-1)),Js={class:"flex flex-row"},Vs=["onClick"],Gs=["src"],qs={key:0,class:"w-[100%] text-center bg-amber-900 text-white rounded-md"},Rs={key:1,class:"w-[100%] text-center bg-slate-500 text-white rounded-md"},Ws={key:2,class:"w-[100%] text-center bg-yellow-600 text-white rounded-md"},Hs={className:"overlay",id:"overlay"},zs={class:"popup max-[500px]:w-[80%] max-[500px]:min-w-[200px]"};let ae=B(null);const Qs={name:"App",components:{Carousel:se,Slide:ne,Pagination:me,Navigation:ve},methods:{slideItem:function(E,N){if(E.target.value>N||E.target.value<0)alert("該編號卡片資料沒有找到!!");else{let y=E.target.value;ae.value.data.slideTo(y-1)}}},data(){}},Xs=Object.assign(Qs,{setup(E){let N=[],y=[],D=B(1),o=B([]),C=B([]),p=B([]),m=B(1),P="",I=B(null),r=B({}),g=B([{name:"基本資訊",mode:"edit_basic"},{name:"效果敘述",mode:"edit_description"},{name:"技能標籤",mode:"edit_tag"},{name:"關鍵字",mode:"edit_keyword"},{name:"圖片管理",mode:"edit_img"}]),w=B("edit_basic");const _=te("frontpath");if(_!==""){var L=window.location.href;L.includes("https://angegod.github.io/vuepage")?window.location.href="https://angegod.github.io/vuepage":window.location.href="http://localhost:5173/vuepage"}T();function T(){U.post("http://localhost:5000/card/get",{get:D.value}).then(u=>{if(console.log(u.data),N=u.data.card,y=u.data.func,u.data=="發生錯誤"){console.log("沒有發現相關資料");return}C.value=JSON.parse(JSON.stringify(y)),p.value=JSON.parse(JSON.stringify(N)),q(1)})}function A(u){let s=document.getElementById("series"+u);s.classList.contains("clicked")?s.classList.remove("clicked"):s.classList.add("clicked"),D.value=parseInt(u),T()}function J(u){o.value=o.value.filter((t,c)=>c!==u);let s=p.value.find(t=>t.id===parseInt(m.value)).tag;p.value.find(t=>t.id===parseInt(m.value)).tag=s.filter((t,c)=>c!==u),console.log(p.value.find(t=>t.id===parseInt(m.value)))}function V(){var u=parseInt(document.getElementById("tagSelect").value),s={};C.value.forEach(t=>{let c=t.data.find(h=>h.id===u);c!==void 0&&(s=c)}),!(o.value.includes(s)||u===0)&&(o.value.push(s),o.value=o.value.sort((t,c)=>t.id-c.id),p.value.find(t=>t.id===m.value).tag.push(u),p.value.find(t=>t.id===m.value).tag=p.value.find(t=>t.id===m.value).tag.sort((t,c)=>t-c),console.log(N.find(t=>t.id===m.value).tag),console.log(p.value.find(t=>t.id===m.value).tag))}function H(){if(confirm("將會儲存你所做的所有更改，如果確定覆蓋則按確定"))try{console.log(p.value),console.log(N);let u={getId:D.value,newData:p.value};console.log(u),U.post("http://localhost:5000/card/edit",u).then(s=>{console.log(s),alert(s.data),N=JSON.parse(JSON.stringify(p.value))})}catch(u){console.log(u)}}function q(u){m.value=u,r.value=p.value.find(s=>s.id===m.value),o.value=[],r.value.tag.forEach(s=>{y.forEach(t=>{let c=t.data.find(h=>h.id===s);c!==void 0&&o.value.push(c)})})}function O(u){if(P=u.target.value,console.log(P),P===""){C.value=y;return}let s=[];y.forEach(t=>{let c=[];if(t.data.forEach(h=>{h.name.includes(P)&&c.push(h)}),c.length!==0){console.log(c);let h=t;h.data=c,s.push(h)}}),s.length!==0?C.value=s:C.value=[]}function z(){let u=N.find(t=>t.id===m.value);if(u==null)return;let s=JSON.parse(JSON.stringify(u));o.value=[],s.tag.forEach(t=>{y.forEach(c=>{let h=c.data.find(ie=>ie.id===t);h!==void 0&&o.value.push(h)})}),r.value=s,Object.assign(u,s)}function M(u){u.target.parentElement.querySelector("textarea").classList.remove("hidden"),u.target.classList.add("hidden")}function f(u,s,t=void 0){if(console.log(u.key),u.key==="Enter"){switch(s){case"instant":p.value[m.value-1].instantEffect[t]=u.target.value;break;case"round":p.value[m.value-1].roundEffect[t]=u.target.value;break;case"combo":p.value[m.value-1].comboEffect[t]=u.target.value;break}console.log(p.value.find(h=>h.id===m.value)),u.target.parentElement.querySelector("span").classList.remove("hidden"),u.target.classList.add("hidden");return}if(u.key,u.key==="Delete")switch(s){case"instant":break;case"round":p.value.find(c=>c.id===m.value).roundEffect=p.value.find(c=>c.id===m.value).roundEffect.filter((c,h)=>h!==t);break;case"combo":p.value.find(c=>c.id===m.value).comboEffect=p.value.find(c=>c.id===m.value).comboEffect.filter((c,h)=>h!==t);break}}function d(u){let s=p.value.find(t=>t.id===m.value);switch(u){case"round":s.roundEffect.push("回合效果");break;case"instant":s.instantEffect.push("即時效果");break;case"combo":s.comboEffect.push("連動效果");break}}function i(u){let s=p.value.find(t=>t.id===m.value);switch(u){case"round":if(s.roundEffect.length===1)break;s.roundEffect=s.roundEffect.filter((t,c)=>c!==s.roundEffect.length-1);break;case"instant":if(s.instantEffect.length===1)break;s.instantEffect=s.instantEffect.filter((t,c)=>c!==s.instantEffect.length-1);break;case"combo":if(s.comboEffect.length===1)break;s.comboEffect=s.comboEffect.filter((t,c)=>c!==s.comboEffect.length-1);break}}function b(){document.getElementById("overlay").style.display="block",I.value.setFunc(C.value)}function F(){document.getElementById("overlay").style.display="none"}function K(u){w.value=u}function oe(u){N=u,p.value=JSON.parse(JSON.stringify(N))}return ue(r,(u,s)=>{p.value[u.id-1]=u,console.log(p.value)},{deep:!0}),re("close",F),(u,s)=>(n(),a("div",kl,[e("div",$l,[Cl,e("div",El,[e("button",{class:"addBtn mr-5 w-[100px]",onClick:s[0]||(s[0]=t=>A(1)),id:"series1"},"晨曦塔"),e("button",{class:"addBtn mr-5 w-[100px]",onClick:s[1]||(s[1]=t=>A(2)),id:"series2"},"測試塔")])]),e("div",Il,[l(r)!==void 0?(n(),a("div",Bl,[e("div",Sl,[e("span",Pl,v(l(r).name),1),e("img",{src:l(_)+l(r).fullimage,alt:"全身圖",class:"max-h-[500px]"},null,8,Nl)]),R(e("div",Dl,[e("div",null,[e("div",Fl,[jl,e("button",{class:"addBtn ml-5",onClick:s[2]||(s[2]=t=>d("instant"))},"新增"),l(r).instantEffect.length>1?(n(),a("button",{key:0,class:"addBtn ml-5",onClick:s[3]||(s[3]=t=>i("instant"))},"刪除")):x("",!0)]),(n(!0),a(k,null,$(l(r).instantEffect,(t,c)=>(n(),a("div",Ll,[e("span",{class:"text-white font-bold",onDblclick:M},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:h=>f(h,"instant",c)},v(t),41,Kl)]))),256))]),e("div",null,[e("div",Ml,[Tl,e("button",{class:"addBtn ml-5",onClick:s[4]||(s[4]=t=>d("round"))},"新增"),l(r).roundEffect.length>1?(n(),a("button",{key:0,class:"addBtn ml-5",onClick:s[5]||(s[5]=t=>i("round"))},"刪除")):x("",!0)]),(n(!0),a(k,null,$(l(r).roundEffect,(t,c)=>(n(),a("div",Al,[e("span",{class:"text-white font-bold",onDblclick:M},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:h=>f(h,"round",c)},v(t),41,Ol)]))),256))]),e("div",null,[e("div",Ul,[Jl,e("button",{class:"addBtn ml-5",onClick:s[6]||(s[6]=t=>d("combo"))},"新增"),l(r).comboEffect.length>1?(n(),a("button",{key:0,class:"addBtn ml-5",onClick:s[7]||(s[7]=t=>i("combo"))},"刪除")):x("",!0)]),(n(!0),a(k,null,$(l(r).comboEffect,(t,c)=>(n(),a("div",Vl,[e("span",{class:"text-white font-bold",onDblclick:M},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:h=>f(h,"combo",c)},v(t),41,Gl)]))),256))])],512),[[fe,!1]]),e("div",null,[ql,e("div",Rl,[(n(!0),a(k,null,$(l(g),t=>(n(),a("div",{class:"my-2 flex flex-row cursor-pointer",onClick:c=>K(t.mode)},[e("img",{src:l(_)+"/images/arrow_right.png",width:"20",height:"20"},null,8,Hl),e("span",zl,v(t.name),1)],8,Wl))),256))])])])):x("",!0),l(w)=="edit_basic"?(n(),a("div",Ql,[G(ml,{card:l(r),"onUpdate:card":s[8]||(s[8]=t=>le(r)?r.value=t:r=t)},null,8,["card"])])):x("",!0),l(w)=="edit_tag"?(n(),a("div",Xl,[e("div",Yl,[Zl,e("div",es,[e("input",{type:"text",value:l(P),placeholder:"技能關鍵字",onInput:s[9]||(s[9]=t=>O(t)),class:"colorSelect"},null,40,ts)]),l(C).length!==0?(n(),a("div",ls,[e("select",ss,[ns,(n(!0),a(k,null,$(l(C),t=>(n(),a("optgroup",{label:t.typeName},[(n(!0),a(k,null,$(t.data,c=>(n(),a("option",{value:c.id,class:"bg-amber-900"},v(c.name),9,os))),256))],8,as))),256))]),e("button",{class:"rounded-sm bg-gray-600 min-w-[50px] text-white",onClick:s[10]||(s[10]=t=>V())},"新增")])):(n(),a("div",is,cs))]),e("div",us,[e("div",rs,[e("div",ps,[(n(!0),a(k,null,$(l(o),(t,c)=>(n(),a("div",fs,[e("div",ms,[e("span",vs,v(t.id),1)]),e("div",_s,[e("span",xs,v(t.name),1)]),e("div",hs,[e("button",{class:"removeBtn",id:"btns"+c,onClick:h=>J(c)},"移除",8,gs)])]))),256))])])])])):x("",!0),l(w)=="edit_keyword"?(n(),a("div",ws,[G(yl,{card:l(r),"onUpdate:card":s[11]||(s[11]=t=>le(r)?r.value=t:r=t)},null,8,["card"])])):x("",!0),l(w)=="edit_description"?(n(),a("div",bs,[ys,e("div",ks,[e("div",$s,[Cs,e("button",{class:"addBtn ml-5",onClick:s[12]||(s[12]=t=>d("instant"))},"新增"),l(r).instantEffect.length>1?(n(),a("button",{key:0,class:"addBtn ml-5",onClick:s[13]||(s[13]=t=>i("instant"))},"刪除")):x("",!0)]),(n(!0),a(k,null,$(l(r).instantEffect,(t,c)=>(n(),a("div",Es,[e("span",{class:"text-white font-bold",onDblclick:M},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:h=>f(h,"instant",c)},v(t),41,Is)]))),256))]),e("div",Bs,[e("div",Ss,[Ps,e("button",{class:"addBtn ml-5",onClick:s[14]||(s[14]=t=>d("round"))},"新增"),l(r).roundEffect.length>1?(n(),a("button",{key:0,class:"addBtn ml-5",onClick:s[15]||(s[15]=t=>i("round"))},"刪除")):x("",!0)]),(n(!0),a(k,null,$(l(r).roundEffect,(t,c)=>(n(),a("div",Ns,[e("span",{class:"text-white font-bold",onDblclick:M},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:h=>f(h,"round",c)},v(t),41,Ds)]))),256))]),e("div",Fs,[e("div",js,[Ls,e("button",{class:"addBtn ml-5",onClick:s[16]||(s[16]=t=>d("combo"))},"新增"),l(r).comboEffect.length>1?(n(),a("button",{key:0,class:"addBtn ml-5",onClick:s[17]||(s[17]=t=>i("combo"))},"刪除")):x("",!0)]),(n(!0),a(k,null,$(l(r).comboEffect,(t,c)=>(n(),a("div",Ks,[e("span",{class:"text-white font-bold",onDblclick:M},v(t),33),e("textarea",{class:"hidden bg-gray-600 text-white h-auto rounded-sm min-h-[50px]",onKeydown:h=>f(h,"combo",c)},v(t),41,Ms)]))),256))])])):x("",!0)]),e("div",Ts,[e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:s[18]||(s[18]=t=>H())},"儲存"),e("button",{class:"removeBtn min-w-[150px] mb-3",onClick:s[19]||(s[19]=t=>z())},"還原")]),e("div",As,[e("div",Os,[Us,e("div",Js,[e("input",{type:"number",class:"w-[100px] rounded-md",onChange:s[20]||(s[20]=t=>u.slideItem(t,l(p).length))},null,32),e("button",{class:"addBtn ml-3 px-3",onClick:b},"添加卡片")])]),G(l(se),{"wrap-around":!0,"items-to-show":5,ref_key:"cardSlide",ref:ae},{default:X(()=>[(n(!0),a(k,null,$(l(p),(t,c)=>(n(),pe(l(ne),{key:c},{default:X(()=>[e("div",{class:"flex-col [&>span]:block cursor-pointer",onClick:h=>q(t.id)},[e("img",{src:l(_)+t.image,width:"160",alt:"not found"},null,8,Gs),t.rarity===1?(n(),a("span",qs,v(t.id),1)):x("",!0),t.rarity===2?(n(),a("span",Rs,v(t.id),1)):x("",!0),t.rarity===3?(n(),a("span",Ws,v(t.id),1)):x("",!0)],8,Vs)]),_:2},1024))),128))]),_:1},512)]),e("div",Hs,[e("div",zs,[e("div",{className:"close",onClick:F},"✖"),G(Wt,{ref_key:"popup",ref:I,max:l(p).length+1,func:l(C),onClose:F,onUpdateCard:oe},null,8,["max","func"])])])]))}}),tn=Y(Xs,[["__scopeId","data-v-cc80033e"]]);export{tn as default};
